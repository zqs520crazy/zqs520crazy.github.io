var crStr={};crStr.klib="version.160330 Copyright(C) Kishin, All rights reserved. http://voidism.net";crStr.bool=false;var crCheck=crStr.klib;if(crCheck.indexOf("Kishin")>=0&&crCheck.indexOf("Kishin, All")>=0&&crCheck.indexOf("voidism")>=0){crStr.bool=true;}var osPlat,bsrName,bsrType,cellPhone,aTablet;var newIE=false;var underIE8=false;var underIE9=false;var klibTagAry=new Array("a","article","aside","audio","b","blockquote","body","button","canvas","caption","code","div","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","label","li","link","main","meta","nav","ol","option","p","pre","script","section","select","small","span","strong","sub","sup","table","td","textarea","th","title","tr","u","ul","video","wbr");var klibRoundSideClassAry=new Array(0);var klibRoundSideTimer;var klibStrWidthLineNode=new Array(0);var klibStrWidthLineBaseStr=new Array(0);var klibImgFillInFinished=false;var klibImgOverFadeAry=new Array(0);var klibImgOverFadeBaseAry=new Array(0);var klibImgOverFadeTypeAry=new Array(0);var klibImgOutFadeAry=new Array(0);var klibImgOutFadeBaseAry=new Array(0);var klibImgOutFadeTypeAry=new Array(0);var klibImgFadeTimer;var klibImgDataMakeAryPath=new Array(0);var klibImgDataMakeAryWidth=new Array(0);var klibImgDataMakeAryHeight=new Array(0);var klibImgDataMakeAryValue;var klibDefaultTitle="";var klibMouseX=-1;var klibMouseY=-1;var klibMouseMonitor=false;var klibCssSpriteAryNode=new Array(0);var klibCssSpriteArySpeed=new Array(0);var klibCssSpriteTimer;var klibCheckedRCB1Timer;var klibCheckedRCB2Timer;var klibDdmovID,klibDdmovType,klibDdmovMinNum,klibDdmovMaxNum,klibDdmovFlag;var klibDdmovMouse1stX,klibDdmovMouse1stY,klibDdmovDiv1stX,klibDdmovDiv1stY;var klibclickCircleCount=0;var klibclickCircleTimer;var klibclickCircleAry=new Array(0);var klibScrToPXStart=-9999;var klibScrToPXCount=0;var klibScrToPXTarPX;var klibScrToNodeStart=-9999;var klibScrToNodeCount=0;var klibScrToNodeTarPX;var klibScrToNodeXYStartX=-9999;var klibScrToNodeXYStartY=-9999;var klibScrToNodeXYCount=0;var klibScrToNodeXYTarX;var klibScrToNodeXYTarY;var klibScrToPTStart=-9999;var klibScrToPTCount=0;var klibScrConstantVector=false;var klibScrConstantTarPX=false;var klibScrConstantLastPos=false;var klibSpringToPTMoving=false;var klibSpringToPTCount=0;var klibStickBarsStatus=false;var klibStickBarsNodes;var klibStickBarsWidth="";var klibScrLoadImgNode=new Array(0);var klibScrLoadImgValue=new Array(0);var klibScrLoadImgFading=new Array(0);var klibScrLoadImgStatus={};var klibScrLoadImgTimer;var klibScrDoFunc={};var klibScrDoFuncTimer;var klibPrlxNodeAry=new Array(0);var klibPrlxTypeArys=new Array(0);var klibPrlxValueArys=new Array(0);var klibPrlxStatus=false;var klibPrlxScrMaxH=0;var klibPrlxImgNodeAry=new Array(0);var klibPrlxImgTypeArys=new Array(0);var klibPrlxImgValueArys=new Array(0);var klibPrlxImgPathAry=new Array(0);var klibPrlxImgStatus=false;var klibPrlxImgScrMaxH=0;var klibScrPrlxVector=false;var klibScrPrlxTarPX=false;var klibScrPrlxLastPos=false;var klibScrPrlxWarpPos=false;var klibAniColorNode=new Array(0);var klibAniColorPart=new Array(0);var klibAniColorClrs=new Array(0);var klibAniColorStep=new Array(0);var klibAniColorTimer;var klibAniDelayFadeAry=new Array(0);var klibAniDelayFadeValue=new Array(0);var klibAniDelayFadeTimer;var klibAniCircleDic={};var klibAniCircleMoving=false;var klibAniPendulumNode=new Array(0);var klibAniPendulumValue=new Array(0);var klibAniPendulumCount=new Array(0);var klibAniPendulumPause=new Array(0);var klibAniPendulumTimer;var klibAniFadeSWSettings=new Array(0);var klibAniFadeSWTimer;var klibAniRotateSWSettings=new Array(0);var klibAniRotateSWTimer;function $id(idName){if(crStr.bool){return document.getElementById(idName);}}function $getTarNode(aNode){if(crStr.bool){var tarNode=aNode;if(aNode.nodeType!=1){tarNode=$id(aNode);}return tarNode;}}function $tag(tagName,aNode){if(crStr.bool){if(tagName.toLowerCase()=="body"){return new Array(document.body);}else{if(arguments.length==2&&aNode!==null){var tarNode=$getTarNode(aNode);return tarNode.getElementsByTagName(tagName);}else{return document.getElementsByTagName(tagName);}}}}function $name(nameName){if(crStr.bool){return document.getElementsByName(nameName);}}function $getNodes(aName){if(crStr.bool){var checkArea=false;var useItemNum=-1;if(arguments.length==2){if(isNaN(arguments[1])){checkArea=true;}else{useItemNum=arguments[1];}}else if(arguments.length==3){checkArea=true;useItemNum=arguments[2];}var resultAry=new Array(0);var tempNode=$getTarNode(aName);if(tempNode){resultAry.push(tempNode);}else{if(checkArea){resultAry=$getWithClass(aName,arguments[1]);}else{resultAry=$getWithClass(aName);}}if(resultAry.length===0||useItemNum>=resultAry.length){return null;}else{if(useItemNum>=0){return resultAry[useItemNum];}else{return resultAry;}}}}function $getWithClass(classname,aNode){if(crStr.bool){var getWithClassAry=new Array(0);var useNodeAry;for(var i=0;i<klibTagAry.length;i++){if(arguments.length==2){var tarNode=$getTarNode(aNode);useNodeAry=$tag(klibTagAry[i],tarNode);}else{useNodeAry=$tag(klibTagAry[i]);}for(var ii=0;ii<useNodeAry.length;ii++){if($getClass(useNodeAry[ii])){if($getClass(useNodeAry[ii]).indexOf(" ")>=0){var workClassAry=$getClass(useNodeAry[ii]).split(" ");for(var iii=0;iii<workClassAry.length;iii++){if(workClassAry[iii]==classname){getWithClassAry.push(useNodeAry[ii]);break;}}}else{if($getClass(useNodeAry[ii])==classname){getWithClassAry.push(useNodeAry[ii]);}}}}}return getWithClassAry;}}function $getWithAttr(aAttr,aNode){if(crStr.bool){var getWithAttrAry=new Array(0);var tarNode=null;if(arguments.length==2){tarNode=$getTarNode(aNode);}for(var i=0;i<klibTagAry.length;i++){var tempAry=$tag(klibTagAry[i],tarNode);for(var ii=0;ii<tempAry.length;ii++){var tempAttrValue=$getAttr(tempAry[ii],aAttr);if(tempAttrValue){getWithAttrAry.push(tempAry[ii]);}}}if(getWithAttrAry.length>=1){return getWithAttrAry;}else{return null;}}}function $getClass(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);return tarNode.getAttribute("class");}}function $cName(tarNode){return $getClass(tarNode);}function $createNode(usename,type){if(crStr.bool){if(type===0){return document.createElement(usename);}else if(type==1){return document.createTextNode(usename);}}}function $create(usename,type){$createNode(usename,type);}function $removeNode(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);if(tarNode){tarNode.parentNode.removeChild(tarNode);}}}function $delNode(tarNode){$removeNode(tarNode);}function $makeImgNode(aFilePath,aRetina,aW,aH,aAlt,aOnLoad){if(crStr.bool){if(aRetina&&aW<=0&&aH<=0){alert("klib $makeImgNode : an error occurred");return null;}else{var newNode=document.createElement('img');var useFilePath;if(aRetina&&aFilePath.indexOf("/")>=0){var useDirectlyName=aFilePath.substr(0,aFilePath.lastIndexOf("/"));var useFileName=aFilePath.substr(aFilePath.lastIndexOf("/")+1);useFilePath=useDirectlyName+$getRetinaCode()+"/"+useFileName;}else{useFilePath=aFilePath;}newNode.setAttribute("src",useFilePath);if(aW>=1){newNode.setAttribute("width",aW);}if(aH>=1){newNode.setAttribute("height",aH);}if(aAlt.length>=1){newNode.setAttribute("alt",aAlt);}if(aOnLoad.length>=1){newNode.setAttribute("onload",aOnLoad);}return newNode;}}}function $addImgNode(aNode,aFilePath,aRetina,aW,aH,aAlt,aOnLoad){if(crStr.bool){var newImgNode=$makeImgNode(aFilePath,aRetina,aW,aH,aAlt,aOnLoad);if(newImgNode){var tarNode=$getTarNode(aNode);tarNode.appendChild(newImgNode);}}}function $getText(aNode,nlBool){if(crStr.bool){var tarNode=$getTarNode(aNode);var tarNodeStyle=$style(tarNode);var tarStyleChanged=false;if(tarNodeStyle.visibility=="hidden"){tarStyleChanged=true;tarNode.style.visibility="visible";}var getText;if(bsrName!="firefox"){getText=tarNode.innerText;}else{var tarHTML=tarNode.innerHTML;var workHTML=$strReplaceAll(tarHTML,"<br />","===RETURN===");workHTML=$strReplaceAll(workHTML,"<br>","===RETURN===");$toHTML(tarNode,workHTML);getText=tarNode.textContent;getText=$strReplaceAll(getText,"===RETURN===",String.fromCharCode(10));$toHTML(tarNode,tarHTML);}if(tarStyleChanged){$resetCSS(tarNode,"visibility");}if(nlBool){return $removeNL(getText);}else{return getText;}}}function $getTxt(aNode,nlBool){return $getText(aNode,nlBool);}function $getTextList(aNode,findClass,separator,topMark){if(crStr.bool){var tarNode=$getTarNode(aNode);var childList=$getNodes(findClass,tarNode);var resultStr="";if(childList!==null){var topMarkStr="";if(arguments.length==4){topMarkStr=topMark;}var sepStr=separator;if(separator=="nl"){sepStr=String.fromCharCode(10);}for(var i=0;i<childList.length;i++){resultStr+=topMarkStr;resultStr+=$getText(childList[i]);if(i<childList.length-1){resultStr+=sepStr;}}}return resultStr;}}function $setId(aNode,aName,doReplace){if(crStr.bool){var tarNode=$getTarNode(aNode);if(!$id(aName)){if(tarNode.id){if(doReplace){tarNode.id=aName;}}else{tarNode.id=aName;}}}}function $setClass(aNode,aName,doRemove,doReplace){if(crStr.bool){var tarNode=$getTarNode(aNode);var nowClass=$getClass(tarNode);if(nowClass===null){nowClass="";}if(doReplace){tarNode.className=aName;}else{var newClass;if(nowClass.indexOf(aName)>=0){if(doRemove){newClass=nowClass.replace(aName+" ","");newClass=newClass.replace(" "+aName,"");newClass=newClass.replace(aName,"");if(newClass===""){newClass=null;}}else{newClass=nowClass;}}else{if(nowClass===""){newClass=aName;}else{newClass=nowClass+" "+aName;}}tarNode.className=newClass;}}}function $setClassSomeone(newClass,tarClass,aryNum,aNode){if(crStr.bool){var tarNodes;if(arguments.length==3){tarNodes=$getNodes(tarClass);}else{tarNodes=$getNodes(tarClass,aNode);}if(aryNum>=0){if(tarNodes.length>aryNum){for(var i in tarNodes){if(i==aryNum){$setClass(tarNodes[i],newClass,false,false);}else{$removeClass(tarNodes[i],newClass);}}}}else{for(var ii in tarNodes){$removeClass(tarNodes[ii],newClass);}}}}function $removeClass(aNode,aName){if(crStr.bool){var tarNode=$getTarNode(aNode);var nowClass=$getClass(tarNode);if(nowClass===null){nowClass="";}var removeClassAry=aName.split(" ");for(var i in removeClassAry){var removeClassStr=removeClassAry[i];if($str(nowClass,removeClassStr)){$setClass(tarNode,removeClassStr,true,false);}}}}function $style(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);if(bsrName.substr(0,2)=="ie"){return tarNode.currentStyle;}else{return document.defaultView.getComputedStyle(tarNode,"");}}}function $isTextNode(aNode){if(crStr.bool){if(aNode.nodeType==3){return true;}else{return false;}}}function $replace(newNode,oldNode){if(crStr.bool){oldNode.parentNode.replaceChild(newNode,oldNode);}}function $getAttr(aNode,aName){if(crStr.bool){var tarNode=$getTarNode(aNode);return tarNode.getAttribute(aName);}}function $get(aNode,aName){return $getAttr(aNode,aName);}function $addOnscroll(aFunction){if(crStr.bool){if(bsrType=="ie"){if(newIE){window.addEventListener("scroll",aFunction,false);}else{window.attachEvent('onscroll',aFunction);}}else{var nowValue=$getAttr(document.body,"onscroll");if(nowValue===null){document.body.setAttribute("onscroll",aFunction.name+"()");}else{if(nowValue.indexOf(aFunction)<0){document.body.setAttribute("onscroll",nowValue+";"+aFunction.name+"();");}}}}}function $setAttribute(aNode,aName,aValue){if(crStr.bool){var tarNode=$getTarNode(aNode);if(aName!="onscroll"){var nowValue=$getAttr(aNode,aName);if(nowValue===null){tarNode.setAttribute(aName,aValue);}else{if(nowValue.indexOf(aValue)<0){tarNode.setAttribute(aName,nowValue+";"+aValue+";");}}}else{alert("klib $setAttribute : use $addOnscroll() for onscroll");}}}function $removeAttribute(aNode,aName,aFunc){if(crStr.bool){var tarNode=$getTarNode(aNode);var nowValue=$getAttr(aNode,aName);if(bsrType=="ie"){tarNode.setAttribute(aName,"");}else{tarNode.removeAttribute(aName);}if(arguments.length==3){var newValue=nowValue;if(nowValue.indexOf(aFunc+";")>=0){newValue=nowValue.replace(aFunc+";","");}else if(nowValue.indexOf(aFunc)>=0){newValue=nowValue.replace(aFunc,"");}if(newValue.length>=1){$setAttribute(aNode,aName,newValue);}}}}function $toHTML(aNode,htmltxt){if(crStr.bool){var tarNode=$getTarNode(aNode);tarNode.innerHTML=htmltxt;}}function $insert(newNode,tarNode,setpos){if(crStr.bool){if(setpos===0){tarNode.parentNode.insertBefore(newNode,tarNode);}else if(setpos==1){tarNode.parentNode.insertBefore(newNode,tarNode.nextSibling);}}}function $innerSizeA(vctrType){if(crStr.bool){var getInSize;if(vctrType.toUpperCase()=="W"){if(bsrName.substr(0,2)=="ie"&&!newIE){getInSize=document.documentElement.clientWidth;}else{getInSize=window.innerWidth;}}else if(vctrType.toUpperCase()=="H"){if(bsrName.substr(0,2)=="ie"&&!newIE){getInSize=document.documentElement.clientHeight;}else{getInSize=window.innerHeight;}}return getInSize;}}function $innerSize(vctrType){return $innerSizeA(vctrType);}function $innerSizeB(vctrType){if(crStr.bool){var getInSize;if(vctrType.toUpperCase()=="W"){getInSize=document.documentElement.clientWidth;}else if(vctrType.toUpperCase()=="H"){getInSize=document.documentElement.clientHeight;}return getInSize;}}function $innerSize2(vctrType){return $innerSizeB(vctrType);}function $bodySize(vctrType){if(crStr.bool){var getSize;if(vctrType.toUpperCase()=="W"){getSize=document.documentElement.scrollWidth||document.body.scrollWidth;}else if(vctrType.toUpperCase()=="H"){getSize=document.documentElement.scrollHeight||document.body.scrollHeight;}return getSize;}}function $scrBarSize(){if(crStr.bool){if(bsrType!="ie"||newIE){var workNode=$createNode("div",0);document.body.appendChild(workNode);var divAry=$tag("div");var addedDiv=divAry[divAry.length-1];addedDiv.style.height="9999px";var getSize=$innerSizeA("W")-$innerSizeB("W");$removeNode(addedDiv);return getSize;}else{return 17;}}}function $mathViewSize(aNode,minW,minH,maxW,maxH){if(crStr.bool){var tarNode=$getTarNode(aNode);var bsrFullW=$innerSizeA("W");var bsrFullH=$innerSizeA("H");var scrbarSize=$scrBarSize();var bodyH=$bodySize("H");var newW,newH;tarNode.style.position="fixed";if(bodyH<=bsrFullH){if(bsrFullW<minW){newW=minW;newH=bsrFullH-scrbarSize;if(newH<minH){newH=minH;}}else{newW=bsrFullW;newH=bsrFullH;}}else{if(bsrFullW-scrbarSize<minW){newW=minW;newH=bsrFullH-scrbarSize;}else{newW=bsrFullW-scrbarSize;newH=bsrFullH;}}tarNode.style.position="relative";if(!maxW){maxW=99999;}if(!maxH){maxH=99999;}var resultW=$numFitRange(newW,minW,maxW);var resultH=$numFitRange(newH,minH,maxH);return {"width":resultW,"height":resultH};}}function $positionInPage(aNode,vctrType){if(crStr.bool){var tarNode=$getTarNode(aNode);var resetDisplay=false;if($style(tarNode).display=="none"){tarNode.style.display="block";resetDisplay=true;}var checkNode=tarNode;var nodeHierarchy=new Array(0);var stopCheck=false;do{var aTagName=checkNode.tagName;if(aTagName.toLowerCase()!="body"){nodeHierarchy.push(checkNode);if($style(checkNode).position!="fixed"){checkNode=checkNode.offsetParent;}else{stopCheck=true;}}else{stopCheck=true;}}while(!stopCheck);var tempX=0;var tempY=0;for(var ppi=0;ppi<nodeHierarchy.length;ppi++){var tempStyle=$style(nodeHierarchy[ppi]);if(tempStyle.position=="fixed"){tempX+=$unitToNum(tempStyle.left);tempY+=$unitToNum(tempStyle.top);}else{tempX+=nodeHierarchy[ppi].offsetLeft;tempY+=nodeHierarchy[ppi].offsetTop;}}if(resetDisplay){tarNode.style.display="none";}if(vctrType.toUpperCase()=="X"){return tempX;}else if(vctrType.toUpperCase()=="Y"){return tempY;}}}function $arrangeW(classname,tarNode){if(crStr.bool){var classNode;if(tarNode){classNode=$getWithClass(classname,tarNode);}else{classNode=$getWithClass(classname);}var useW=0;for(var i=0;i<classNode.length;i++){useW=Math.max(useW,classNode[i].offsetWidth);}for(var ii=0;ii<classNode.length;ii++){var nowOutWidth=classNode[ii].offsetWidth-$getContSize(classNode[ii],"W");classNode[ii].style.width=(useW-nowOutWidth)+"px";}}}function $classW(classname,actType,tarNode){if(crStr.bool){var classNode;if(tarNode){classNode=$getWithClass(classname,tarNode);}else{classNode=$getWithClass(classname);}var wAry=new Array(0);for(i=0;i<classNode.length;i++){wAry.push(classNode[i].offsetWidth);}var useW;if(actType=="max"){useW=0;for(i=0;i<wAry.length;i++){useW=Math.max(useW,wAry[i]);}}else if(actType=="min"){useW=999999;for(i=0;i<wAry.length;i++){useW=Math.min(useW,wAry[i]);}}for(i=0;i<classNode.length;i++){var nowOutWidth=classNode[i].offsetWidth-$getContSize(classNode[i],"W");if(nowOutWidth<=useW){var newWidth=useW-nowOutWidth;classNode[i].style.width=newWidth+"px";classNode[i].style.overflow="hidden";}}}}function $arrangeH(classname,tarNode){if(crStr.bool){var classNode;if(tarNode){classNode=$getWithClass(classname,tarNode);}else{classNode=$getWithClass(classname);}var useH=0;for(var i=0;i<classNode.length;i++){useH=Math.max(useH,classNode[i].offsetHeight);}for(var ii=0;ii<classNode.length;ii++){var nowOutHeight=classNode[ii].offsetHeight-$getContSize(classNode[ii],"H");classNode[ii].style.height=(useH-nowOutHeight)+"px";}}}function $classH(classname,actType,tarNode){if(crStr.bool){var classNode;if(tarNode){classNode=$getWithClass(classname,tarNode);}else{classNode=$getWithClass(classname);}var hAry=new Array(0);for(i=0;i<classNode.length;i++){hAry.push(classNode[i].offsetHeight);}var useH;if(actType=="max"){useH=0;for(i=0;i<hAry.length;i++){useH=Math.max(useH,hAry[i]);}}else if(actType=="min"){useH=999999;for(i=0;i<hAry.length;i++){useH=Math.min(useH,hAry[i]);}}for(i=0;i<classNode.length;i++){var nowOutHeight=classNode[i].offsetHeight-$getContSize(classNode[i],"H");if(nowOutHeight<=useH){var newHeight=useH-nowOutHeight;classNode[i].style.height=newHeight+"px";classNode[i].style.overflow="hidden";}}}}function $classAlignMid(classname,tarNode){if(crStr.bool){var tarNodeAry;if(tarNode){tarNodeAry=$getWithClass(classname,tarNode);}else{tarNodeAry=$getWithClass(classname);}var memoryBdrTopAry=new Array(0);var memoryBdrBtmAry=new Array(0);var memoryHAry=new Array(0);for(var i=0;i<tarNodeAry.length;i++){var thisStyle=$style(tarNodeAry[i]);var getBdrTop=$unitToNum(thisStyle.borderTopWidth);memoryBdrTopAry.push(getBdrTop);var getBdrBtm=$unitToNum(thisStyle.borderBottomWidth);memoryBdrBtmAry.push(getBdrBtm);memoryHAry.push(tarNodeAry[i].offsetHeight-getBdrTop-getBdrBtm);}for(var ii=0;ii<tarNodeAry.length;ii++){tarNodeAry[ii].style.paddingTop="0";tarNodeAry[ii].style.paddingBottom="0";tarNodeAry[ii].style.height="auto";}for(var iii=0;iii<tarNodeAry.length;iii++){var autoH=tarNodeAry[iii].offsetHeight-memoryBdrTopAry[iii]-memoryBdrBtmAry[iii];var newPaddTop=Math.floor((memoryHAry[iii]-autoH)/2);var newHeight=memoryHAry[iii]-newPaddTop;tarNodeAry[iii].style.paddingTop=newPaddTop+"px";tarNodeAry[iii].style.height=newHeight+"px";}}}function $arrangeHAlignMid(classname,paddNum,tarNode){if(crStr.bool){var classNode;if(tarNode){classNode=$getWithClass(classname,tarNode);}else{classNode=$getWithClass(classname);}for(var i=0;i<classNode.length;i++){classNode[i].style.paddingTop="0px";classNode[i].style.paddingBottom="0px";classNode[i].style.height="auto";}var useH=0;for(var ii=0;ii<classNode.length;ii++){useH=Math.max(useH,classNode[ii].offsetHeight);}for(var iii=0;iii<classNode.length;iii++){var usePaddTop=Math.round((useH-classNode[iii].offsetHeight)/2);var usePaddBtm=(useH-classNode[iii].offsetHeight)-usePaddTop;classNode[iii].style.paddingTop=usePaddTop+Number(paddNum)+"px";classNode[iii].style.paddingBottom=usePaddBtm+Number(paddNum)+"px";}}}function $classHighestMid(classname){if(crStr.bool){$arrangeH(classname);$classAlignMid(classname);}}function $getContSize(aNode,vctrType,withPadd){if(crStr.bool){var tarNode=$getTarNode(aNode);var thisStyle=$style(tarNode);var nowDisplay=thisStyle.display;tarNode.style.display="block";var outsideTotal=0;var contOutWH,wrokNum;if(vctrType.toUpperCase()=="W"){contOutWH=tarNode.offsetWidth;workNum=$unitToNum(thisStyle.borderLeftWidth);if(workNum>=0){outsideTotal+=workNum;}workNum=$unitToNum(thisStyle.borderRightWidth);if(workNum>=0){outsideTotal+=workNum;}if(!withPadd){workNum=$unitToNum(thisStyle.paddingLeft);if(workNum>=0){outsideTotal+=workNum;}workNum=$unitToNum(thisStyle.paddingRight);if(workNum>=0){outsideTotal+=workNum;}}}else if(vctrType.toUpperCase()=="H"){contOutWH=tarNode.offsetHeight;workNum=$unitToNum(thisStyle.borderTopWidth);if(workNum>=0){outsideTotal+=workNum;}workNum=$unitToNum(thisStyle.borderBottomWidth);if(workNum>=0){outsideTotal+=workNum;}if(!withPadd){workNum=$unitToNum(thisStyle.paddingTop);if(workNum>=0){outsideTotal+=workNum;}workNum=$unitToNum(thisStyle.paddingBottom);if(workNum>=0){outsideTotal+=workNum;}}}var contWH=contOutWH-outsideTotal;tarNode.style.display=nowDisplay;return contWH;}}function $getOutSize(aNode,vctrType){if(crStr.bool){var tarNode=$getTarNode(aNode);var thisStyle=$style(tarNode);var nowDisplay=thisStyle.display;tarNode.style.display="block";var contWH;if(vctrType.toUpperCase()=="W"){contWH=tarNode.offsetWidth;}else if(vctrType.toUpperCase()=="H"){contWH=tarNode.offsetHeight;}tarNode.style.display=nowDisplay;return contWH;}}function $roundSide(tarClass,roundPos){if(crStr.bool){if(!$aryFind(klibRoundSideClassAry,tarClass)[0]){clearTimeout(klibRoundSideTimer);var useRoundPos;if(!roundPos||(roundPos.toUpperCase()!="L"&&roundPos.toUpperCase()!="R")){useRoundPos="BOTH";}else{useRoundPos=roundPos;}klibRoundSideClassAry.push(useRoundPos.toUpperCase());klibRoundSideClassAry.push(tarClass);$roundSideAct();}}}function $roundSideAct(){var workSide="BOTH";for(var k=0;k<klibRoundSideClassAry.length;k++){if(klibRoundSideClassAry[k]=="BOTH"||klibRoundSideClassAry[k]=="L"||klibRoundSideClassAry[k]=="R"){workSide=klibRoundSideClassAry[k];}else{var workClass=$getWithClass(klibRoundSideClassAry[k]);for(var kk=0;kk<workClass.length;kk++){var tarNode=workClass[kk];var useRadius=Math.floor(tarNode.offsetHeight/2);if(workSide=="BOTH"||workSide=="L"){tarNode.style.borderTopLeftRadius=useRadius+"px";tarNode.style.borderBottomLeftRadius=useRadius+"px";}if(workSide=="BOTH"||workSide=="R"){tarNode.style.borderTopRightRadius=useRadius+"px";tarNode.style.borderBottomRightRadius=useRadius+"px";}}}}klibRoundSideTimer=setTimeout($roundSideAct,100);}function $setFloat(aNode,tarPosition){if(crStr.bool){var tarNode=$getTarNode(aNode);var usePosition;if(tarPosition.toUpperCase()=="L"){usePosition="left";}else if(tarPosition.toUpperCase()=="R"){usePosition="right";}if(bsrType=="ie"){tarNode.style.styleFloat=usePosition;}else if(bsrName=="firefox"||bsrName=="opera"){tarNode.style.cssFloat=usePosition;}else{tarNode.style.float=usePosition;}}}function $addBalloonA(aNode,aSize,aPosition){if(crStr.bool){var tarNode=$getTarNode(aNode);var useVector=aPosition.split(" ")[0].substr(0,1).toLowerCase();var balloonClass="klibBalloon-a-"+useVector;if($getWithClass(balloonClass,tarNode)[0]){$removeNode($getWithClass(balloonClass,tarNode)[0]);}if(aSize>=1&&(bsrType!="ie"||newIE)){var tarNodeStyle=$style(tarNode);if(tarNodeStyle.position=="static"){tarNode.style.position="relative";}var tarNodeW=$getContSize(tarNode,"W",true);var tarNodeH=$getContSize(tarNode,"H",true);var aKey;switch(useVector){case "t":aKey="Top";break;case "b":aKey="Bottom";break;case "l":aKey="Left";break;case "r":aKey="Right";break;}var bdrWidth=$unitToNum(tarNodeStyle["border"+aKey+"Width"]);if(isNaN(bdrWidth)){bdrWidth=0;}var bdrStyle=tarNodeStyle["border"+aKey+"Style"];var bdrColor=tarNodeStyle["border"+aKey+"Color"];var bdrValue=bdrWidth+"px "+bdrStyle+" "+bdrColor;var shapeSize=Math.floor(aSize*2/Math.SQRT2);if(shapeSize%2==1){shapeSize+=1;}var totalSize=Math.floor(shapeSize*Math.SQRT2);if(totalSize%2==1){totalSize+=1;}var bdrSQRT=Math.ceil(bdrWidth*Math.SQRT2);var bdrAdjust=Math.ceil(bdrSQRT-bdrWidth);var layoutRange,brTL,brTR,brBL,brBR;if(useVector=="t"){brTL=$unitToNum(tarNodeStyle.borderTopLeftRadius)+bdrAdjust;brTR=$unitToNum(tarNodeStyle.borderTopRightRadius)+bdrAdjust;layoutRange=tarNodeW-brTL-brTR;}else if(useVector=="b"){brBL=$unitToNum(tarNodeStyle.borderBottomLeftRadius)+bdrAdjust;brBR=$unitToNum(tarNodeStyle.borderBottomRightRadius)+bdrAdjust;layoutRange=tarNodeW-brBL-brBR;}else if(useVector=="l"){brTL=$unitToNum(tarNodeStyle.borderTopLeftRadius)+bdrAdjust;brBL=$unitToNum(tarNodeStyle.borderBottomLeftRadius)+bdrAdjust;layoutRange=tarNodeH-brTL-brBL;}else if(useVector=="r"){brTR=$unitToNum(tarNodeStyle.borderTopRightRadius)+bdrAdjust;brBR=$unitToNum(tarNodeStyle.borderBottomRightRadius)+bdrAdjust;layoutRange=tarNodeH-brTR-brBR;}var useBg;var bgImg=tarNodeStyle.backgroundImage;var useBgSize=tarNodeStyle.backgroundSize;if(bgImg!="none"){useBg=bgImg+" center center";}else{useBg=tarNodeStyle.backgroundColor;}if(layoutRange>=(totalSize+bdrSQRT*2)){var balloonNode=$createNode("div",0);$setClass(balloonNode,balloonClass,false,true);balloonNode.style.position="absolute";balloonNode.style.width=totalSize+"px";balloonNode.style.height=totalSize+"px";var balloonShapeBox=$createNode("div",0);balloonShapeBox.style.position="absolute";balloonShapeBox.style.top="0";balloonShapeBox.style.left="0";balloonShapeBox.style.width=totalSize+"px";balloonShapeBox.style.height=totalSize+"px";var balloonShape=$createNode("div",0);balloonShape.style.position="absolute";balloonShape.style.top=(totalSize-shapeSize)/2+"px";balloonShape.style.left=(totalSize-shapeSize)/2+"px";balloonShape.style.width=shapeSize+"px";balloonShape.style.height=shapeSize+"px";balloonShape.style.background=useBg;balloonShape.style.backgroundSize=useBgSize;balloonShape.style.msTransformOrigin="50% 50%";balloonShape.style.transformOrigin="50% 50%";balloonShape.style.msTransform="rotate(45deg)";balloonShape.style.transform="rotate(45deg)";var balloonBdrBox=$createNode("div",0);balloonBdrBox.style.position="absolute";balloonBdrBox.style.top="0";balloonBdrBox.style.left="0";balloonBdrBox.style.width=totalSize+"px";balloonBdrBox.style.height=totalSize+"px";var balloonBdr=$createNode("div",0);balloonBdr.style.position="absolute";balloonBdr.style.top=(totalSize-shapeSize-(bdrWidth*2))/2+"px";balloonBdr.style.left=(totalSize-shapeSize-(bdrWidth*2))/2+"px";balloonBdr.style.width=shapeSize+"px";balloonBdr.style.height=shapeSize+"px";balloonBdr.style.border=bdrValue;balloonBdr.style.msTransformOrigin="50% 50%";balloonBdr.style.transformOrigin="50% 50%";balloonBdr.style.msTransform="rotate(45deg)";balloonBdr.style.transform="rotate(45deg)";var usePosition=aPosition.split(" ")[1];var positionType;if(!usePosition){usePosition="50%";}if(usePosition.indexOf("%")>=0){usePosition=$unitToNum(usePosition)/100;usePosition=(layoutRange-totalSize)*usePosition;}else{brTL=0;brBL=0;brTR=0;usePosition=$unitToNum(usePosition)-(totalSize/2);}if(useVector=="t"){balloonNode.style.top=(-1*totalSize/2)+"px";balloonNode.style.left=brTL+usePosition+"px";balloonShapeBox.style.clip="rect("+0+"px,"+totalSize+"px,"+(totalSize/2+1)+"px,"+0+"px)";balloonBdrBox.style.clip="rect("+(-1*bdrSQRT)+"px,"+(totalSize+bdrSQRT)+"px,"+(totalSize/2)+"px,"+(-1*bdrSQRT)+"px)";}else if(useVector=="b"){balloonNode.style.top=tarNodeH-(totalSize/2)+"px";balloonNode.style.left=brBL+usePosition+"px";balloonShapeBox.style.clip="rect("+(totalSize/2-1)+"px,"+totalSize+"px,"+totalSize+"px,"+0+"px)";balloonBdrBox.style.clip="rect("+(totalSize/2)+"px,"+(totalSize+bdrSQRT)+"px,"+(totalSize+bdrSQRT)+"px,"+(-1*bdrSQRT)+"px)";}else if(useVector=="l"){balloonNode.style.top=brTL+usePosition+"px";balloonNode.style.left=(-1*totalSize/2)+"px";balloonShapeBox.style.clip="rect("+0+"px,"+(totalSize/2+1)+"px,"+totalSize+"px,"+0+"px)";balloonBdrBox.style.clip="rect("+(-1*bdrSQRT)+"px,"+(totalSize/2)+"px,"+(totalSize+bdrSQRT)+"px,"+(-1*bdrSQRT)+"px)";}else if(useVector=="r"){balloonNode.style.top=brTR+usePosition+"px";balloonNode.style.left=tarNodeW-(totalSize/2)+"px";balloonShapeBox.style.clip="rect("+0+"px,"+totalSize+"px,"+totalSize+"px,"+(totalSize/2-1)+"px)";balloonBdrBox.style.clip="rect("+(-1*bdrSQRT)+"px,"+(totalSize+bdrSQRT)+"px,"+(totalSize+bdrSQRT)+"px,"+(totalSize/2)+"px)";}balloonShapeBox.appendChild(balloonShape);balloonBdrBox.appendChild(balloonBdr);balloonNode.appendChild(balloonShapeBox);balloonNode.appendChild(balloonBdrBox);tarNode.appendChild(balloonNode);}else{if(layoutRange>=4){var newSize=Math.floor((layoutRange-(bdrSQRT*2)-(bdrAdjust*2))/2);$addBalloonA(aNode,newSize,aPosition);}else{}}}}}function $addBalloonB(aNode,aSize,aPosition,aBg){if(crStr.bool){var tarNode=$getTarNode(aNode);var useVector=aPosition.split(" ")[0].substr(0,1).toLowerCase();var balloonClass="klibBalloon-b-"+useVector;if($getWithClass(balloonClass,tarNode)[0]){$removeNode($getWithClass(balloonClass,tarNode)[0]);}if(aSize>=1&&(bsrType!="ie"||newIE)){var tarNodeStyle=$style(tarNode);if(tarNodeStyle.position=="static"){tarNode.style.position="relative";}var tarNodeW=$getContSize(tarNode,"W",true);var tarNodeH=$getContSize(tarNode,"H",true);var aKey;switch(useVector){case "t":aKey="Top";break;case "b":aKey="Bottom";break;case "l":aKey="Left";break;case "r":aKey="Right";break;}var bdrWidth=$unitToNum(tarNodeStyle["border"+aKey+"Width"]);if(isNaN(bdrWidth)){bdrWidth=0;}var bdrStyle=tarNodeStyle["border"+aKey+"Style"];var bdrColor=tarNodeStyle["border"+aKey+"Color"];var bdrValue=bdrWidth+"px "+bdrStyle+" "+bdrColor;var layoutRange,brTL,brTR,brBL,brBR;if(useVector=="t"){brTL=$unitToNum(tarNodeStyle.borderTopLeftRadius);brTR=$unitToNum(tarNodeStyle.borderTopRightRadius);layoutRange=tarNodeW-brTL-brTR;}else if(useVector=="b"){brBL=$unitToNum(tarNodeStyle.borderBottomLeftRadius);brBR=$unitToNum(tarNodeStyle.borderBottomRightRadius);layoutRange=tarNodeW-brBL-brBR;}else if(useVector=="l"){brTL=$unitToNum(tarNodeStyle.borderTopLeftRadius);brBL=$unitToNum(tarNodeStyle.borderBottomLeftRadius);layoutRange=tarNodeH-brTL-brBL;}else if(useVector=="r"){brTR=$unitToNum(tarNodeStyle.borderTopRightRadius);brBR=$unitToNum(tarNodeStyle.borderBottomRightRadius);layoutRange=tarNodeH-brTR-brBR;}var useBg;var bgImg=tarNodeStyle.backgroundImage;var useBgSize=tarNodeStyle.backgroundSize;if(bgImg!="none"){useBg=bgImg+" center center";}else{useBg=tarNodeStyle.backgroundColor;}var useOutBg="#fff";var useOutBgSize="50%";if(arguments.length==3){var checkNode=tarNode;var checkFlag=false;do{checkNode=checkNode.parentNode;var checkStyle=$style(checkNode);if(checkStyle.backgroundImage!="none"){useOutBg=checkStyle.backgroundImage+" center center";useOutBgSize=checkStyle.backgroundSize;checkFlag=true;}else{var checkBgColor=checkStyle.backgroundColor;if(!$clrTransparent(checkBgColor)){useOutBg=checkBgColor;checkFlag=true;}}}while(!checkFlag);}else{if(aBg.indexOf(".")>=0){useOutBg="url("+aBg+") center center";}else{if(aBg.substr(0,1)!="#"){aBg+="#"+aBg;}useOutBg=aBg;}}if(layoutRange>=aSize*2){var balloonNode=$createNode("div",0);$setClass(balloonNode,balloonClass,false,true);balloonNode.style.position="absolute";balloonNode.style.background=useBg;balloonNode.style.backgroundSize=useBgSize;if(bsrType!="ie"){balloonNode.style.overflow="hidden";}var balloonItem1=$createNode("div",0);balloonItem1.style.position="absolute";balloonItem1.style.width=aSize+1+"px";balloonItem1.style.height=aSize+1+"px";balloonItem1.style.background=useOutBg;balloonItem1.style.backgroundSize=useOutBgSize;var balloonItem2=$createNode("div",0);balloonItem2.style.position="absolute";balloonItem2.style.width=aSize+1+"px";balloonItem2.style.height=aSize+1+"px";balloonItem2.style.background=useOutBg;balloonItem2.style.backgroundSize=useOutBgSize;var usePosition=aPosition.split(" ")[1];if(!usePosition){usePosition="50%";}if(usePosition.indexOf("%")>=0){usePosition=$unitToNum(usePosition)/100;usePosition=(layoutRange-aSize*2)*usePosition;}else{brTL=0;brBL=0;brTR=0;usePosition=$unitToNum(usePosition)-aSize;}if(useVector=="t"||useVector=="b"){balloonNode.style.width=aSize*2+"px";balloonNode.style.height=aSize+1+"px";balloonItem1.style.left="-1px";balloonItem2.style.left=aSize+"px";if(useVector=="t"){balloonNode.style.top=aSize*-1+"px";balloonNode.style.left=brTL+usePosition+"px";balloonItem1.style.top=-1-bdrWidth+"px";balloonItem2.style.top=-1-bdrWidth+"px";balloonItem1.style.borderBottomRightRadius=aSize+"px";balloonItem2.style.borderBottomLeftRadius=aSize+"px";balloonItem1.style.borderRight=bdrValue;balloonItem1.style.borderBottom=bdrValue;balloonItem2.style.borderLeft=bdrValue;balloonItem2.style.borderBottom=bdrValue;}else{balloonNode.style.top=tarNodeH-1+"px";balloonNode.style.left=brBL+usePosition+"px";balloonItem1.style.top="1px";balloonItem2.style.top="1px";balloonItem1.style.borderTopRightRadius=aSize+"px";balloonItem2.style.borderTopLeftRadius=aSize+"px";balloonItem1.style.borderRight=bdrValue;balloonItem1.style.borderTop=bdrValue;balloonItem2.style.borderLeft=bdrValue;balloonItem2.style.borderTop=bdrValue;}}else{balloonNode.style.width=aSize+1+"px";balloonNode.style.height=aSize*2+"px";balloonItem1.style.top="-1px";balloonItem2.style.top=aSize+"px";if(useVector=="l"){balloonNode.style.top=brTL+usePosition+"px";balloonNode.style.left=aSize*-1+"px";balloonItem1.style.left=-1-bdrWidth+"px";balloonItem2.style.left=-1-bdrWidth+"px";balloonItem1.style.borderBottomRightRadius=aSize+"px";balloonItem2.style.borderTopRightRadius=aSize+"px";balloonItem1.style.borderRight=bdrValue;balloonItem1.style.borderBottom=bdrValue;balloonItem2.style.borderRight=bdrValue;balloonItem2.style.borderTop=bdrValue;}else{balloonNode.style.top=brTR+usePosition+"px";balloonNode.style.left=tarNodeW-1+"px";balloonItem1.style.left="1px";balloonItem2.style.left="1px";balloonItem1.style.borderBottomLeftRadius=aSize+"px";balloonItem2.style.borderTopLeftRadius=aSize+"px";balloonItem1.style.borderLeft=bdrValue;balloonItem1.style.borderBottom=bdrValue;balloonItem2.style.borderLeft=bdrValue;balloonItem2.style.borderTop=bdrValue;}}balloonNode.appendChild(balloonItem1);balloonNode.appendChild(balloonItem2);tarNode.appendChild(balloonNode);}else{if(layoutRange>=4){var newSize=Math.floor(layoutRange/2);if(arguments.length==3){$addBalloonB(aNode,newSize,aPosition);}else{$addBalloonB(aNode,newSize,aPosition,aBg);}}else{}}}}}function $makeColumns(aClass,columns,separate){if(crStr.bool){var classNodeAry=$getWithClass(aClass);for(var i=0;i<classNodeAry.length;i++){classNodeAry[i].style.position="absolute";}var classOffsetW=classNodeAry[0].offsetWidth;var pNode=classNodeAry[0].parentNode;var pNodeW=$getContSize(pNode,"W");var aStyle=$style(pNode);var pnPaddTop=$unitToNum(aStyle.paddingTop);var pnPaddLeft=$unitToNum(aStyle.paddingLeft);if(aStyle.position=="static"){pNode.style.position="relative";}var useColumns;if(pNodeW>=classOffsetW*columns){useColumns=columns;}else{if(separate.indexOf(" ")>=0){useColumns=columns;var separeteSize=separate.split(" ")[0];if(separeteSize.indexOf("px")>=0){separeteSize=$unitToNum(separeteSize);}else{separeteSize=$unitToNum(separeteSize);separeteSize=Math.floor(pNodeW*(separeteSize/100));}var classContW=$getContSize(classNodeAry[0],"W");var classFrameW=classOffsetW-classContW;var newClassW=Math.floor((pNodeW-(separeteSize*(columns-1)))/columns);var classW=newClassW-classFrameW;for(var ii=0;ii<classNodeAry.length;ii++){classNodeAry[ii].style.width=classW+"px";}classOffsetW=classNodeAry[0].offsetWidth;}else{var downCount=1;var flag;do{flag=false;if(pNodeW>classOffsetW*(columns-downCount)){flag=true;}else{downCount++;}}while(!flag);useColumns=columns-downCount;}}var columnsHAry=new Array(0);for(i=0;i<useColumns;i++){columnsHAry.push(0);}var freeSpace=pNodeW-(classOffsetW*useColumns);var separateW=Math.floor(freeSpace/(useColumns-1));var separateH;if(separate.indexOf(" ")>=0){separateH=$unitToNum(separate.split(" ")[1]);}else{separateH=$unitToNum(separate);}for(i=0;i<classNodeAry.length;i++){var minItem=$aryMinItem(columnsHAry);var minH=columnsHAry[minItem];classNodeAry[i].style.top=pnPaddTop+minH+"px";classNodeAry[i].style.left=pnPaddLeft+(classOffsetW+separateW)*minItem+"px";columnsHAry[minItem]=minH+classNodeAry[i].offsetHeight+separateH;}var maxItem=$aryMaxItem(columnsHAry);pNode.style.height=columnsHAry[maxItem]-separateH+"px";}}function $divTableA(){if(crStr.bool){var baseDivAry=$getWithClass("divtable");for(var i=0;i<baseDivAry.length;i++){var childDivAry=new Array(0);var clearDivAry=new Array(0);for(var ii=0;ii<baseDivAry[i].childNodes.length;ii++){var workObj=baseDivAry[i].childNodes[ii];if(workObj.tagName=="DIV"){if($getClass(workObj)=="clearfloat"||$getClass(workObj)=="cf"){clearDivAry.push(workObj);}else{childDivAry.push(workObj);}}}var divTableColumns=Math.floor(childDivAry.length/clearDivAry.length);for(var iii=0;iii<clearDivAry.length;iii++){clearDivAry[iii].style.border="none";clearDivAry[iii].style.margin=clearDivAry[iii].style.padding=clearDivAry[iii].style.width=clearDivAry[iii].style.height="0";clearDivAry[iii].style.overflow="hidden";}var childDivWAry=new Array(0);for(var iv=0;iv<childDivAry.length;iv++){if(bsrName=="firefox"||bsrName=="opera"){childDivAry[iv].style.cssFloat="left";}else if(bsrType=="ie"){childDivAry[iv].style.styleFloat="left";}else{childDivAry[iv].style.float="left";}childDivWAry.push($getContSize(childDivAry[iv],"W"));}var biggestWNumAry=new Array(0);for(var v=0;v<divTableColumns;v++){biggestWNumAry.push(0);}for(var vi=0;vi<childDivAry.length;vi++){biggestWNumAry[vi%divTableColumns]=Math.max(biggestWNumAry[vi%divTableColumns],childDivWAry[vi]);}for(var vii=0;vii<childDivAry.length;vii++){childDivAry[vii].style.width=biggestWNumAry[vii%divTableColumns]+"px";}var workStyle2=$style(baseDivAry[i]);var baseDivW=$unitToNum(workStyle2.width);var row1W=0;for(var viii=1;viii<=divTableColumns;viii++){var cellStyle=$style(childDivAry[viii-1]);row1W+=$getOutSize(childDivAry[viii-1],"W");row1W+=$unitToNum(cellStyle.marginRight);row1W+=$unitToNum(cellStyle.marginLeft);}if(baseDivW>=row1W){var surplus=baseDivW-row1W;var addW1=Math.floor(surplus/divTableColumns);var addW2=surplus-(addW1*(divTableColumns-1));for(var ix=0;ix<biggestWNumAry.length;ix++){if(ix!=biggestWNumAry.length-1){biggestWNumAry[ix]+=addW1;}else{biggestWNumAry[ix]+=addW2;}}}else{var insufficient=row1W-baseDivW;var delW1=Math.floor(insufficient/divTableColumns);var delW2=insufficient-(delW1*(divTableColumns-1));for(var x=0;x<biggestWNumAry.length;x++){if(x!=biggestWNumAry.length-1){biggestWNumAry[x]-=delW1;}else{biggestWNumAry[x]-=delW2;}}}for(var xi=0;xi<childDivAry.length;xi++){childDivAry[xi].style.width=biggestWNumAry[xi%divTableColumns]+"px";}var childDivHAry=new Array(0);for(var xii=0;xii<childDivAry.length;xii++){childDivHAry.push($getContSize(childDivAry[xii],"H"));}var biggestHNumAry=new Array(0);for(var xiii=0;xiii<Math.floor(childDivAry.length/divTableColumns);xiii++){biggestHNumAry.push(0);}for(var xiv=0;xiv<childDivAry.length;xiv++){biggestHNumAry[Math.floor(xiv/divTableColumns)]=Math.max(biggestHNumAry[Math.floor(xiv/divTableColumns)],childDivHAry[xiv]);}for(var xv=0;xv<childDivAry.length;xv++){childDivAry[xv].style.height=biggestHNumAry[Math.floor(xv/divTableColumns)]+"px";}}}}function $divTable(){$divTableA();}function $divTableB(aNode,columns){if(crStr.bool){var tarNode=$getTarNode(aNode);var dtWidth=$getContSize(tarNode,"W");var divTableDataAry=$getWithClass("dt-item",tarNode);var divTableWidthAry=new Array(0);for(var i=1;i<=columns;i++){divTableWidthAry.push(0);}for(var ii=0;ii<divTableDataAry.length;ii++){$setFloat(divTableDataAry[ii],"L");var checkWidth=divTableWidthAry[ii%columns];var thisStyle=$style(divTableDataAry[ii]);var thisWidth=divTableDataAry[ii].offsetWidth;thisWidth+=$unitToNum(thisStyle.marginRight)+$unitToNum(thisStyle.marginLeft);if(checkWidth<thisWidth){divTableWidthAry[ii%columns]=thisWidth;}}var totalItemWidth=0;for(var iii=0;iii<divTableWidthAry.length;iii++){totalItemWidth+=divTableWidthAry[iii];}var divTableBError=false;var dtDistance;if(dtWidth>=totalItemWidth){dtDistance=dtWidth-totalItemWidth;divTableWidthAry[divTableWidthAry.length-1]+=dtDistance;}else{dtDistance=totalItemWidth-dtWidth;if(divTableWidthAry[divTableWidthAry.length-1]>dtDistance){divTableWidthAry[divTableWidthAry.length-1]-=dtDistance;}else{alert("klib $divTableB : an error occurred");divTableBError=true;}}if(!divTableBError){for(var iv=0;iv<divTableDataAry.length;iv++){var tempOutWidth=$getOutSize(divTableDataAry[iv],"W");var thisStyle2=$style(divTableDataAry[iv]);tempOutWidth+=$unitToNum(thisStyle2.marginRight)+$unitToNum(thisStyle2.marginLeft);var tempInWidth=$getContSize(divTableDataAry[iv],"W");var tempOutMargin=tempOutWidth-tempInWidth;var useWidth=divTableWidthAry[iv%columns]-tempOutMargin;divTableDataAry[iv].style.width=useWidth+"px";}for(var v=0;v<Math.floor(divTableDataAry.length/columns);v++){var tempMaxH=-1;var tempNodeNum,tempNode,tempOutHeight;for(var v1=0;v1<columns;v1++){tempNodeNum=(v*columns)+v1;tempNode=divTableDataAry[tempNodeNum];tempOutHeight=$getOutSize(tempNode,"H");tempMaxH=Math.max(tempMaxH,tempOutHeight);}for(var v2=0;v2<columns;v2++){tempNodeNum=(v*columns)+v2;tempNode=divTableDataAry[tempNodeNum];tempOutHeight=$getOutSize(tempNode,"H");var tempInHeight=$getContSize(tempNode,"H");var tempDistance=tempOutHeight-tempInHeight;tempNode.style.height=tempMaxH-tempDistance+"px";}}for(var vi=0;vi<divTableDataAry.length;vi++){if(vi%columns==columns-1){var clearNode=$createNode('div',0);$setAttribute(clearNode,'class','cf');$insert(clearNode,divTableDataAry[vi],1);}}}}}function $removeNLTFrom(){if(crStr.bool){if(arguments.length>=1){var argumentsAry;if(arguments.length>=2){argumentsAry=arguments;}else{argumentsAry=arguments[0].split(" ");}for(var lii=0;lii<argumentsAry.length;lii++){var workNode,getHTML,newHTML;if($id(argumentsAry[lii])){workNode=$id(argumentsAry[lii]);getHTML=workNode.innerHTML;newHTML=$removeNLTAB(getHTML);$toHTML(workNode,newHTML);}else{var workNodeAry=$getWithClass(argumentsAry[lii]);for(var wli=0;wli<workNodeAry.length;wli++){workNode=workNodeAry[wli];getHTML=workNode.innerHTML;newHTML=$removeNLTAB(getHTML);$toHTML(workNode,newHTML);}}}}}}function $removeNLOfList(anyArguments){$removeNLTFrom(anyArguments);}function $categorizeListWithKey(aNode,Key,tarDelete){if(crStr.bool){var tarNode=$getTarNode(aNode);var thisTag=tarNode.tagName;if(thisTag.toUpperCase()=="OL"||thisTag.toUpperCase()=="UL"){var liAry=$tag('li',tarNode);var cateNameAry=new Array(0);var tempCateNameAry=new Array(0);var resultAry=new Array(0);var useNoCate=false;for(var cli=0;cli<liAry.length;cli++){var anctxt=$getText(liAry[cli]);var keyPos=anctxt.indexOf(Key);var cateName;if(keyPos>=1){cateName=anctxt.substr(0,keyPos+Key.length);}else{cateName="noCategory";useNoCate=true;}tempCateNameAry.push(cateName);if(cateName!="noCategory"&&!$aryFind(cateNameAry,cateName)[0]){cateNameAry.push(cateName);resultAry.push($createNode(thisTag,0));}}if(useNoCate){cateNameAry.push("noCategory");resultAry.push($createNode(thisTag,0));}for(var clii=0;clii<liAry.length;clii++){var thisCate=tempCateNameAry[clii];var thisCateNum=$aryFind(cateNameAry,thisCate)[1];resultAry[thisCateNum].appendChild(liAry[clii].cloneNode(true));}if(tarDelete){$removeNode(tarNode);}return resultAry;}else{return null;}}}function $categorizeListWithAry(aNode,cateAry,tarDelete){if(crStr.bool){var tarNode=$getTarNode(aNode);var thisTag=tarNode.tagName;if(thisTag.toUpperCase()=="OL"||thisTag.toUpperCase()=="UL"){var liAry=$tag('li',tarNode);var cateNameAry=new Array(0);var tempCateNameAry=new Array(0);var resultAry=new Array(0);var useNoCate=false;for(var cli=0;cli<liAry.length;cli++){var anctxt=$getText(liAry[cli]);var cateName='';for(var clii=0;clii<cateAry.length;clii++){if(anctxt.indexOf(cateAry[clii])>=0){cateName=cateAry[clii];break;}}if(cateName===''){cateName="noCategory";useNoCate=true;}tempCateNameAry.push(cateName);if(cateName!="noCategory"&&!$aryFind(cateNameAry,cateName)[0]){cateNameAry.push(cateName);resultAry.push($createNode(thisTag,0));}}if(useNoCate){cateAry.push("noCategory");cateNameAry.push("noCategory");resultAry.push($createNode(thisTag,0));}for(var cliii=0;cliii<liAry.length;cliii++){var thisCate=tempCateNameAry[cliii];var thisCateNum=$aryFind(cateNameAry,thisCate)[1];resultAry[thisCateNum].appendChild(liAry[cliii].cloneNode(true));}var resultAry2=new Array(0);for(var cliv=0;cliv<cateAry.length;cliv++){var tempNum=$aryFind(cateNameAry,cateAry[cliv])[1];if(tempNum>=0){resultAry2.push(resultAry[tempNum]);}}if(tarDelete){$removeNode(tarNode);}return resultAry2;}else{return null;}}}function $aryCopy(tarAry){if(crStr.bool){var newCopyAry=new Array(0);for(var cai=0;cai<tarAry.length;cai++){newCopyAry.push(tarAry[cai]);}return newCopyAry;}}function $copyAry(tarAry){return $aryCopy(tarAry);}function $aryRandomNum(rnaNum1,rnaNum2){if(crStr.bool){var rnaLength=rnaNum2-rnaNum1+1;var rnaArray=new Array(0);for(var i=1;i<=rnaLength;i++){var getRdmNum,rnaCheck;do{getRdmNum=Math.floor(Math.random()*rnaLength)+rnaNum1;rnaCheck=$aryFind(rnaArray,getRdmNum)[0];}while(rnaCheck);rnaArray.push(getRdmNum);}return rnaArray;}}function $rdmNumAry(rnaNum1,rnaNum2){return $aryRandomNum(rnaNum1,rnaNum2);}function $aryRandom(tarAry){if(crStr.bool){var usedNumAry=$aryRandomNum(0,tarAry.length-1);var newRdmAry=new Array(0);for(var i=0;i<usedNumAry.length;i++){newRdmAry.push(tarAry[usedNumAry[i]]);}return newRdmAry;}}function $rdmAry(tarAry){return $aryRandom(tarAry);}function $aryFind(tarAry,tarElm){if(crStr.bool){var fAresultAry=new Array(0);var fAadded=false;for(var i=0;i<tarAry.length;i++){if(tarAry[i]==tarElm){fAresultAry.push(i);}}if(fAresultAry.length>=1){fAresultAry.unshift(true);}else{fAresultAry.push(false);fAresultAry.push(-1);}return fAresultAry;}}function $findAry(tarAry,tarElm){return $aryFind(tarAry,tarElm);}function $arySort(Arraies,sortType){if(crStr.bool){var baseAry=$aryCopy(Arraies[0]);var saAryObj={};saAryObj.saAry0=$aryCopy(Arraies[0]);var arrayNums=Arraies.length;for(var i=1;i<arrayNums;i++){saAryObj["saAry"+i]=new Array(0);}var saOrderAry=new Array(0);if(sortType=="az"||sortType=="za"){saAryObj.saAry0=saAryObj.saAry0.sort();var saTempAry=new Array(0);for(var ii=0;ii<saAryObj.saAry0.length;ii++){var saCheckAry=new Array(0);for(var iii=0;iii<baseAry.length;iii++){if(saAryObj.saAry0[ii]==baseAry[iii]){saCheckAry.push(iii);}}if(saCheckAry.length==1){saOrderAry.push(saCheckAry[0]);}else{for(var iv=0;iv<saCheckAry.length;iv++){var added=$aryFind(saTempAry,saCheckAry[iv])[0];if(!added){saTempAry.push(saCheckAry[iv]);break;}}saOrderAry.push(saCheckAry[iv]);}}}else if(sortType=="rdm"){var saRdmAry=$aryRandomNum(0,baseAry.length-1);saOrderAry=saRdmAry;}saAryObj.saAry0.length=new Array(0);for(var v=0;v<saOrderAry.length;v++){for(var vi=0;vi<arrayNums;vi++){saAryObj["saAry"+vi].push(Arraies[vi][saOrderAry[v]]);}}var totalAry=new Array(0);for(var vii=0;vii<arrayNums;vii++){if(sortType=="za"){totalAry.push(saAryObj["saAry"+vii].reverse());}else{totalAry.push(saAryObj["saAry"+vii]);}}return totalAry;}}function $sortAry(Arraies,sortType){return $arySort(Arraies,sortType);}function $arySumItems(aArray,aStart,aNums){if(crStr.bool){var aEndPoint;if(aNums>=1){aEndPoint=aStart+aNums-1;}else{aEndPoint=aArray.length-1;}if(aEndPoint>aArray.length-1){return NaN;}var tempResultNum=0;for(var i=aStart;i<=aEndPoint;i++){if(!isNaN(aArray[i])){tempResultNum+=aArray[i];}}return tempResultNum;}}function $sumAryItems(aArray,aStart,aNums){return $arySumItems(aArray,aStart,aNums);}function $aryMinItem(aArray,aBool){if(crStr.bool){var minNum=99999999;var minItem=-1;for(var i=0;i<aArray.length;i++){var checkNum=aArray[i];if(!isNaN(checkNum)){if(aBool){if(checkNum<=minNum){minNum=checkNum;minItem=i;}}else{if(checkNum<minNum){minNum=checkNum;minItem=i;}}}}return minItem;}}function $aryMaxItem(aArray,aBool){if(crStr.bool){var maxNum=-99999999;var maxItem=-1;for(var i=0;i<aArray.length;i++){var checkNum=aArray[i];if(!isNaN(checkNum)){if(aBool){if(checkNum>=maxNum){maxNum=checkNum;maxItem=i;}}else{if(checkNum>maxNum){maxNum=checkNum;maxItem=i;}}}}return maxItem;}}function $aryConcat(){if(crStr.bool){if(arguments.length===0){return new Array(0);}else if(arguments.length==1){return arguments[0];}else{var resultAry=new Array(0);for(var i=0;i<arguments.length;i++){resultAry=resultAry.concat(arguments[i]);}return resultAry;}}}function $aryFromDic(aDic){if(crStr.bool){var keyArray=new Array(0);var dataArray=new Array(0);for(var keyStr in aDic){keyArray.push(keyStr);dataArray.push(aDic[keyStr]);}var resultArray=new Array(keyArray,dataArray);return resultArray;}}function $dicFromAry(aArray,aType){if(crStr.bool){var useType;if(!aType){useType="N";}else{useType=aType;}var newDic={};if(aArray.length%2===0){var keyArray=new Array(0);var dataArray=new Array(0);var numberingCount,overwriteNum;for(var i=0;i<aArray.length;i++){if(i%2===0){overwriteNum=-1;var checkKey=aArray[i];if(!$aryFind(keyArray,checkKey)[0]){keyArray.push(checkKey);}else{if(useType.toUpperCase()=="T"){i++;}else if(useType.toUpperCase()=="O"){overwriteNum=$aryFind(keyArray,checkKey)[1];keyArray[overwriteNum]=checkKey;}else{numberingCount=2;var nowNumbering=true;do{var newCheckKey=checkKey+"("+String(numberingCount)+")";if(!$aryFind(keyArray,newCheckKey)[0]){keyArray.push(newCheckKey);nowNumbering=false;}else{numberingCount++;}}while(nowNumbering);}}}else{if(overwriteNum<0){dataArray.push(aArray[i]);}else{dataArray[overwriteNum]=aArray[i];}}}for(var ii=0;ii<keyArray.length;ii++){newDic[keyArray[ii]]=dataArray[ii];}}else{alert("klib $dicFromAry : an error occurred\nPlease make length of array into even number.");}return newDic;}}function $dicFrom2Ary(keyArray,dataArray,aType){if(crStr.bool){var useType;if(!aType){useType="N";}else{useType=aType;}var newDic={};if(keyArray.length>=dataArray.length){var newAry=new Array(0);var distanceNum=keyArray.length-dataArray.length;for(var i=0;i<keyArray.length;i++){newAry.push(keyArray[i]);if(i<keyArray.length-distanceNum){newAry.push(dataArray[i]);}else{newAry.push("");}}newDic=$dicFromAry(newAry,useType);}else{alert("klib $dicFrom2Ary : an error occurred");}return newDic;}}function $dicLength(aDic){if(crStr.bool){var resultLength=0;for(var key in aDic){resultLength++;}return resultLength;}}function $dicFindKey(aDic,aKey,matchType,iCase,Found){if(crStr.bool){var foundDic={};foundDic.FOUND=0;if(matchType){for(var key1 in aDic){if(!iCase){if(String(key1).toLowerCase()==String(aKey).toLowerCase()){foundDic[key1]=aDic[key1];foundDic.FOUND++;}}else{if(String(key1)==String(aKey)){foundDic[key1]=aDic[key1];foundDic.FOUND++;}}}}else{for(var key2 in aDic){if(!iCase){if(String(key2).toLowerCase().indexOf(String(aKey).toLowerCase())>=0){foundDic[key2]=aDic[key2];foundDic.FOUND++;}}else{if(String(key2).indexOf(String(aKey))>=0){foundDic[key2]=aDic[key2];foundDic.FOUND++;}}}}if(!Found){deletefoundDic.FOUND;}if($dicLength(foundDic)>=1){return foundDic;}else{return null;}}}function $dicFindValue(aDic,aValue,matchType,iCase,Found){if(crStr.bool){var foundDic={};foundDic.FOUND=0;if(matchType){for(var key1 in aDic){if(!iCase){if(String(aDic[key1]).toLowerCase()==String(aValue).toLowerCase()){foundDic[key1]=aDic[key1];foundDic.FOUND++;}}else{if(String(aDic[key1])==String(aValue)){foundDic[key1]=aDic[key1];foundDic.FOUND++;}}}}else{for(var key2 in aDic){if(!iCase){if(String(aDic[key2]).toLowerCase().indexOf(String(aValue).toLowerCase())>=0){foundDic[key2]=aDic[key2];foundDic.FOUND++;}}else{if(String(aDic[key2]).indexOf(String(aValue))>=0){foundDic[key2]=aDic[key2];foundDic.FOUND++;}}}}if(!Found){deletefoundDic.FOUND;}if($dicLength(foundDic)>=1){return foundDic;}else{return null;}}}function $dicDeleteKey(aDic,aKey,matchType,iCase){if(crStr.bool){var tempDic=$dicFindKey(aDic,aKey,matchType,iCase,false);if($dicLength(tempDic)>=1){var baseDic=aDic;for(var key1 in tempDic){deletebaseDic[key1];}if($dicLength(baseDic)>=1){return baseDic;}else{return null;}}else{return aDic;}}}function $dicDeleteValue(aDic,aValue,matchType,iCase){if(crStr.bool){var tempDic=$dicFindValue(aDic,aValue,matchType,iCase,false);if($dicLength(tempDic)>=1){var baseDic=aDic;for(var key1 in tempDic){deletebaseDic[key1];}if($dicLength(baseDic)>=1){return baseDic;}else{return null;}}else{return aDic;}}}function $dicKeyCase(aDic,caseType){if(crStr.bool){var newDic={};for(var key1 in aDic){if(caseType.toLowerCase()=="lower"){newKey=key1.toLowerCase();}else if(caseType.toLowerCase()=="upper"){newKey=key1.toUpperCase();}newDic[newKey]=aDic[key1];}return newDic;}}function $setRights(tarID,startY,cpnyName,shortType){if(crStr.bool){var copystr=$getRightsTxt(startY,cpnyName,shortType);$toHTML(tarID,copystr);}}function $getRightsTxt(startY,cpnyName,shortType){if(crStr.bool){var nowD=new Date();var nowY="-"+nowD.getFullYear();if(startY==nowD.getFullYear()){nowY="";}if(startY===0){startY="";nowY=nowD.getFullYear();}var copystr="Copyright&copy; "+startY+nowY+" "+cpnyName;if(shortType){return copystr;}else{return copystr+", 设计达人网翻译整理.";}}}function $setRightsWithTxt(tarID,startY,rightsTxt){if(crStr.bool){var nowD=new Date();var nowY="-"+nowD.getFullYear();if(startY==nowD.getFullYear()){nowY="";}if(startY===0){startY="";nowY=nowD.getFullYear();}var copystr="Copyright&copy; "+startY+nowY+" "+rightsTxt;$toHTML(tarID,copystr);}}function $copyright(tarID,startY,cpnyName){var copystr=$copyrightStr(startY,cpnyName);$toHTML(tarID,copystr);}function $copyrightStr(startY,cpnyName){var nowD=new Date();var nowY="-"+nowD.getFullYear();if(startY==nowD.getFullYear()){nowY="";}if(startY===0){startY="";nowY=nowD.getFullYear();}var copystr="Copyright&copy; "+startY+nowY+" "+cpnyName+", All rights reserved.";return copystr;}function $setMail(){if(crStr.bool){var tempClass,classAry,mailAddress;var mail1Nodes=$getNodes("setmail1");for(var i=0;i<mail1Nodes.length;i++){tempClass=$getClass(mail1Nodes[i]);classAry=tempClass.split(" ");mailAddress=$makeMailAddress(classAry[1]);if(mailAddress){var code='<a href="mailto:'+mailAddress+'">'+mailAddress+'</a>';$toHTML(mail1Nodes[i],code);}}var mail2Nodes=$getNodes("setmail2");for(i=0;i<mail2Nodes.length;i++){tempClass=$getClass(mail2Nodes[i]);classAry=tempClass.split(" ");mailAddress=$makeMailAddress(classAry[1]);if(mailAddress){$toHTML(mail2Nodes[i],mailAddress);}}}}function $makeMailAddress(aTxt){var mailAddress=aTxt.replace("_at_","@");mailAddress=$strReplaceAll(mailAddress,"_dt_",".");if($checkBytes(mailAddress,3)){return mailAddress;}else{return null;}}function $strSwitch(){if(crStr.bool){var spanAry=$tag("span");var useNodeAry=new Array(0);for(var i=0;i<spanAry.length;i++){var workSpan=spanAry[i];if($getAttr(workSpan,"sw")){if($getAttr(workSpan,"sw")==arguments[0]){useNodeAry.push(workSpan);}}}var workW=$innerSizeB("W");var workStr;var resultNum=true;if(arguments.length==4){if(workW>=arguments[2]){workStr=arguments[1];}else{workStr=arguments[3];}}else if(arguments.length==6){if(workW>=arguments[2]){workStr=arguments[1];}else if(workW>=arguments[4]){workStr=arguments[3];}else{workStr=arguments[5];}}else{resultNum=false;}if(resultNum){if(useNodeAry.length>=1){for(var ii=0;ii<useNodeAry.length;ii++){$toHTML(useNodeAry[ii],workStr);}resultNum=useNodeAry.length;}else{resultNum=0;}}return resultNum;}}function $strSwitchAuto(){if(crStr.bool){var spanAry=$tag("span");var useNodeAry=new Array(0);for(var i=0;i<spanAry.length;i++){var workSpan=spanAry[i];if($getAttr(workSpan,"swa")){if($getAttr(workSpan,"swa")==arguments[0]){useNodeAry.push(workSpan);}}}var workStr;var resultNum=true;if(arguments.length==3){if(!cellPhone){workStr=arguments[1];}else{workStr=arguments[2];}}else if(arguments.length==4){if(!cellPhone&&!aTablet){workStr=arguments[1];}else if(aTablet){workStr=arguments[2];}else{workStr=arguments[3];}}else{resultNum=false;}if(resultNum){if(useNodeAry.length>=1){for(var ii=0;ii<useNodeAry.length;ii++){$toHTML(useNodeAry[ii],workStr);}resultNum=useNodeAry.length;}else{resultNum=0;}}return resultNum;}}function $str(baseStr,searchStr){if(crStr.bool){var resultNum=baseStr.indexOf(searchStr);if(resultNum>=0){return true;}else{return false;}}}function $strSearchAll(baseStr,searchStr,ignoreCaseType){if(crStr.bool){var resultAry=new Array(0);if(ignoreCaseType){baseStr=baseStr.toLowerCase();searchStr=searchStr.toLowerCase();}if(baseStr.indexOf(searchStr)>=0){var searchStartPos=0;do{var getPos=$strIndexWithPos(baseStr,searchStr,searchStartPos);resultAry.push(getPos);searchStartPos=getPos+searchStr.length;}while($strIndexWithPos(baseStr,searchStr,searchStartPos)>=0);}return resultAry;}}function $strLastSearchAll(baseStr,searchStr,ignoreCaseType){if(crStr.bool){var resultAry=$strSearchAll(baseStr,searchStr,ignoreCaseType);resultAry=resultAry.reverse();return resultAry;}}function $strReplaceAll(baseStr,oldStr,newStr){if(crStr.bool){var resultStr=baseStr;while(resultStr.indexOf(oldStr)>=0){resultStr=resultStr.replace(oldStr,newStr);}return resultStr;}}function $strIndexWithPos(baseStr,searchStr,splitPos){if(crStr.bool){var frontStr=baseStr.substr(0,splitPos);var rearStr=baseStr.substr(splitPos);var getPos=rearStr.indexOf(searchStr);if(getPos>=0){return getPos+splitPos;}else{return -1;}}}function $strLastIndexWithPos(baseStr,searchStr,splitPos){if(crStr.bool){var strLength=baseStr.length;var frontStr=baseStr.substr(0,splitPos);var rearStr=baseStr.substr(splitPos);var getPos=frontStr.lastIndexOf(searchStr);return getPos;}}function $strReplaceWithPos(baseStr,searchStr,replaceStr,splitPos){if(crStr.bool){var frontStr=baseStr.substr(0,splitPos);var rearStr=baseStr.substr(splitPos);rearStr=rearStr.replace(searchStr,replaceStr);return frontStr+rearStr;}}function $strLastReplaceWithPos(baseStr,searchStr,replaceStr,splitPos){if(crStr.bool){var strLength=baseStr.length;var frontStr=baseStr.substr(0,splitPos);var rearStr=baseStr.substr(splitPos);var getPos=frontStr.lastIndexOf(searchStr);if(getPos>=0){var front1Str=frontStr.substr(0,getPos);var front2Str=frontStr.substr(getPos+searchStr.length);return front1Str+replaceStr+front2Str+rearStr;}else{return frontStr+rearStr;}}}function $strSearchWithGroup(baseStr,gStart,gEnd){if(crStr.bool){var checkPos=0;var groupCont="";while($strIndexWithPos(baseStr,gStart,checkPos)>=0&&$strIndexWithPos(baseStr,gEnd,checkPos)>=0&&$strIndexWithPos(baseStr,gStart,checkPos)<$strIndexWithPos(baseStr,gEnd,checkPos)){var nowCheckPos=$strIndexWithPos(baseStr,gStart,checkPos);var getStartPos=$strIndexWithPos(baseStr,gStart,nowCheckPos+gStart.length);var getEndPos=$strIndexWithPos(baseStr,gEnd,nowCheckPos+gStart.length);if(getStartPos>=0&&getStartPos<getEndPos){checkPos=getStartPos;continue;}else{checkPos=nowCheckPos;groupCont=baseStr.substr(checkPos+gStart.length,getEndPos-checkPos-gStart.length);break;}}return groupCont;}}function $strReplaceWithGroup(baseStr,gStart,gEnd,gNewStart,gNewCont,gNewEnd,doOnce){if(crStr.bool){var checkPos=0;while($strIndexWithPos(baseStr,gStart,checkPos)>=0&&$strIndexWithPos(baseStr,gEnd,checkPos)>=0&&$strIndexWithPos(baseStr,gStart,checkPos)<$strIndexWithPos(baseStr,gEnd,checkPos)){var nowCheckPos=$strIndexWithPos(baseStr,gStart,checkPos);var getStartPos=$strIndexWithPos(baseStr,gStart,nowCheckPos+gStart.length);var getEndPos=$strIndexWithPos(baseStr,gEnd,nowCheckPos+gStart.length);if(getStartPos>=0&&getStartPos<getEndPos){checkPos=getStartPos;continue;}else{checkPos=nowCheckPos;var frontStr=baseStr.substr(0,checkPos);var groupCont=baseStr.substr(checkPos+gStart.length,getEndPos-checkPos-gStart.length);var rearStr=baseStr.substr(getEndPos+gEnd.length);baseStr=frontStr;var charDistance=0;if(gNewStart!==false){baseStr+=gNewStart;charDistance+=Number(gNewStart.length-gStart.length);}else{baseStr+=gStart;}if(gNewCont!==false){baseStr+=gNewCont;charDistance+=Number(gNewCont.length-groupCont.length);}else{baseStr+=groupCont;}if(gNewEnd!==false){baseStr+=gNewEnd;charDistance+=Number(gNewEnd.length-gEnd.length);}else{baseStr+=gEnd;}baseStr+=rearStr;checkPos=getEndPos+gEnd.length+charDistance;if(doOnce){break;}}}return baseStr;}}function $strCapitalize1(tarStr){if(crStr.bool){var checkStr=$checkBytes(tarStr,1);var tempStr;if(checkStr){tempStr=tarStr.toLowerCase();tempStr=tempStr.charAt(0).toUpperCase()+tempStr.substr(1);}else{tempStr="";}return tempStr;}}function $strCapitalize2(tarStr){if(crStr.bool){var checkStr=$checkBytes(tarStr,1);var newStr;if(checkStr){var tempStr=tarStr.toLowerCase();var tempStrAry=tempStr.split(" ");newStr="";for(var i=0;i<tempStrAry.length;i++){newStr+=tempStrAry[i].charAt(0).toUpperCase()+tempStrAry[i].substr(1);if(i!=tempStrAry.length-1){newStr+=" ";}}}else{newStr="";}return newStr;}}function $checkBytes(tarStr,checkType,avoidStr){if(crStr.bool){var chrAry=new Array(0);for(var i=0;i<tarStr.length;i++){var c=tarStr.charCodeAt(i);if((c>=0x0&&c<0x81)||(c==0xf8f0)||(c>=0xff61&&c<0xffa0)||(c>=0xf8f1&&c<0xf8f4)){chrAry.push(1);}else{chrAry.push(2);}}var checkflag=true;if(!avoidStr){avoidStr="";}if(checkType==1||checkType==3||checkType==4){for(var ii=0;ii<chrAry.length;ii++){if(chrAry[ii]==2&&!$checkAvoid(avoidStr,tarStr.substr(ii,1))){checkflag=false;break;}}}else if(checkType==2){for(var iii=0;iii<chrAry.length;iii++){if(chrAry[iii]==1&&!$checkAvoid(avoidStr,tarStr.substr(iii,1))){checkflag=false;break;}}}if(checkType==3&&checkflag){if(tarStr.indexOf("@")>=2&&tarStr.indexOf(".")>0&&tarStr.lastIndexOf(".")<=tarStr.length-3&&tarStr.substr(tarStr.indexOf("@")).indexOf(".")>=2&&tarStr.length>=8&&tarStr.indexOf(" ")<0){checkflag=true;}else{checkflag=false;}}if(checkType==4&&checkflag){for(var iv=0;iv<chrAry.length;iv++){if(isNaN(tarStr.substr(iv,1))&&!$checkAvoid(avoidStr,tarStr.substr(iv,1))){checkflag=false;break;}}}if(tarStr.length===0){checkflag=false;}return checkflag;}}function $checkAvoid(avoidStr,checkStr){var checkflag2=false;for(var v=0;v<avoidStr.length;v++){if(avoidStr.substr(v,1)==checkStr){checkflag2=true;break;}}return checkflag2;}function $azAry(chrType){if(crStr.bool){var workAZAry=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z");if(chrType){if(chrType.toUpperCase()=="L"){for(var i=0;i<26;i++){workAZAry[i]=workAZAry[i].toLowerCase();}}}return workAZAry;}}function $exchangeByte(tarByte,tarStr){if(crStr.bool){var byte1Ary=new Array('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z');byte1Ary.push('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');byte1Ary.push('0','1','2','3','4','5','6','7','8','9');byte1Ary.push('~','!','@','#','$','%','^','&','*','(',')','-','_','=','+','[',']','¥','|',';',':','<','>','/','?',' ');var byte2Ary=new Array('Ａ','Ｂ','Ｃ','Ｄ','Ｅ','Ｆ','Ｇ','Ｈ','Ｉ','Ｊ','Ｋ','Ｌ','Ｍ','Ｎ','Ｏ','Ｐ','Ｑ','Ｒ','Ｓ','Ｔ','Ｕ','Ｖ','Ｗ','Ｘ','Ｙ','Ｚ');byte2Ary.push('ａ','ｂ','ｃ','ｄ','ｅ','ｆ','ｇ','ｈ','ｉ','ｊ','ｋ','ｌ','ｍ','ｎ','ｏ','ｐ','ｑ','ｒ','ｓ','ｔ','ｕ','ｖ','ｗ','ｘ','ｙ','ｚ');byte2Ary.push('０','１','２','３','４','５','６','７','８','９');byte2Ary.push('〜','！','＠','＃','＄','％','＾','＆','＊','（','）','−','＿','＝','＋','［','］','￥','｜','；','：','＜','＞','／','？','　');var avoid="";if(arguments.length==3){avoid=arguments[2];}var avoidAry=new Array(0);if(avoid.length>=1){for(var i=0;i<avoid.length;i++){avoidAry.push(avoid.substr(i,1));}}var newStr='';for(var ii=0;ii<tarStr.length;ii++){var tarChr=String(tarStr.substr(ii,1));if(!$aryFind(avoidAry,tarChr)[0]){var checkChr;if(tarByte==1){checkChr=$aryFind(byte2Ary,tarChr);if(checkChr[0]){tarChr=byte1Ary[checkChr[1]];}}else if(tarByte==2){checkChr=$aryFind(byte1Ary,tarChr);if(checkChr[0]){tarChr=byte2Ary[checkChr[1]];}}}newStr+=tarChr;}return newStr;}}function $byte2NumToByte1Num(aStr){if(crStr.bool){var byte2NumAry=new Array("０","１","２","３","４","５","６","７","８","９");var newStr=String(aStr);var checkCount=0;var notFound;do{notFound=true;if(newStr.indexOf(byte2NumAry[checkCount])>=0){newStr=newStr.replace(byte2NumAry[checkCount],String(checkCount));notFound=false;}if(notFound){checkCount++;}}while(!notFound||checkCount<=9);if(isNaN(newStr)){return "NaN";}else{return Number(newStr);}}}function $strWidthLine(aNode,tarWidth,tarLine,addStr){if(crStr.bool){var tarNode=$getTarNode(aNode);var resultNum=-1;if(tarNode){var workStr,workAryNum;if($aryFind(klibStrWidthLineNode,tarNode)[0]){workAryNum=$aryFind(klibStrWidthLineNode,tarNode)[1];workStr=klibStrWidthLineBaseStr[workAryNum];}else{workStr=$getText(tarNode);klibStrWidthLineNode.push(tarNode);klibStrWidthLineBaseStr.push(workStr);}workStr=$removeNLTAB(workStr);var tarStyle=$style(tarNode);var defDisplay=tarStyle.display;var defOverflow=tarStyle.overflow;var defPadding=tarStyle.padding;tarNode.style.display="block";tarNode.style.width=tarWidth+"px";tarNode.style.overflow="visible";tarNode.style.padding="0";$toHTML(tarNode,"あ");var defLineHeight=tarNode.offsetHeight;var checkLineHeight=defLineHeight*tarLine+2;var checkCount=0;var checkFlag=false;var checkedStr="";do{checkFlag=true;checkedStr=workStr.substr(0,workStr.length-checkCount);if(arguments.length==4){if(checkCount>=1&&addStr!==""){checkedStr=checkedStr+addStr;}}$toHTML(tarNode,checkedStr);if(tarNode.offsetHeight>checkLineHeight){checkCount++;checkFlag=false;}}while(!checkFlag);tarNode.style.display=defDisplay;tarNode.style.width="";tarNode.style.overflow=defOverflow;tarNode.style.padding=defPadding;resultNum=$aryFind(klibStrWidthLineNode,tarNode)[1];}return resultNum;}}function $strPrgWithHeight(tarNode,tarHeight){if(crStr.bool){var tarNodeClone=tarNode.cloneNode(true);var pAry=$tag("p",tarNode);var resultAry=new Array(0);if(pAry.length>=1){var strAry=new Array(0);for(var i=0;i<pAry.length;i++){var workstr=$strReplaceAll($getText(pAry[i]),String.fromCharCode(10),"Ω");strAry.push(workstr);}var workFinish=false;var workPrgNum=0;var workStrCount=0;var workStrLen=1;var oldStrLen=1;var oldStr="";var memoryStr="";do{var workStr="";var kinsoku=false;var workPrg=strAry[workPrgNum];var getStr=workPrg.substr(workStrCount,workStrLen);getStr=$strReplaceAll(getStr,'Ω','<br />');if(getStr.charAt(getStr.length-1)=="、"||getStr.charAt(getStr.length-1)=="。"){kinsoku=true;}workStr+=memoryStr+'<p>'+getStr+'</p>';workStr=$strReplaceAll(workStr,'<p><br />','<p>');$toHTML(tarNode,workStr);var checkH=tarNode.offsetHeight;if(checkH<=tarHeight){oldStr=workStr;oldStrLen=workStrLen;if(workStrCount+workStrLen<workPrg.length){workStrLen++;}else{if(workPrgNum<strAry.length-1){memoryStr+=workStr;workStrCount=0;workStrLen=1;workPrgNum++;}else{resultAry.push(workStr);workFinish=true;}}}else{if(!kinsoku){resultAry.push(oldStr);}else{resultAry.push(oldStr.substr(0,oldStr.length-5)+"</p>");oldStrLen--;}memoryStr="";var goNextPrg=false;if(workStrCount===0&&workStrLen===1){goNextPrg=true;workPrgNum--;}if(oldStrLen<workPrg.length&&!goNextPrg){workStrCount+=oldStrLen;workStrLen=1;}else{if(workPrgNum<strAry.length-1){workStrCount=0;workStrLen=1;workPrgNum++;}else{workFinish=true;}}}}while(!workFinish);$replace(tarNodeClone,tarNode);}return resultAry;}}function $strLargeCap(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);if(tarNode.firstChild.nodeType==3){var tempTxt=$getText(tarNode);var firstChar=tempTxt.substr(0,1);$toHTML(tarNode,tempTxt.substr(1));var baseStyle=$style(tarNode);var baseFontSize=$unitToNum(baseStyle.fontSize);var baseLineHeight=$unitToNum(baseStyle.lineHeight);var baseLineHeightScale=baseLineHeight/baseFontSize;var mathLineHeightH=Math.floor(baseLineHeight-baseFontSize);var useFontSize=Math.round(baseFontSize*baseLineHeightScale*1.84);if(bsrType=="ie"){useFontSize*=1.2;}var useMgnR=Math.ceil(mathLineHeightH*0.2);if(bsrType=="ie"){useMgnR*=1.5;}var useMgnBtm;if(baseLineHeightScale>=1.8||bsrType=="ie"){useMgnBtm=0;}else if(baseLineHeightScale<1.8){useMgnBtm=Math.floor(baseFontSize*0.1);}var largeCap=$createNode("span",0);largeCap.style.display="inline";largeCap.style.width=useFontSize+"px";largeCap.style.paddingRight=useMgnR+"px";largeCap.style.marginBottom=useMgnBtm+"px";largeCap.style.fontSize=useFontSize+"px";if(bsrType=="ie"){largeCap.style.height=useFontSize+(mathLineHeightH*0.7)+"px";largeCap.style.lineHeight="130%";}else{largeCap.style.height=useFontSize+"px";largeCap.style.lineHeight="100%";}$toHTML(largeCap,firstChar);tarNode.insertBefore(largeCap,tarNode.firstChild);$setFloat(largeCap,"L");}}}function $removeNLTAB(tarStr){if(crStr.bool){tarStr=$removeNL(tarStr);tarStr=$removeTAB(tarStr);return tarStr;}}function $removeNL(tarStr){if(crStr.bool){while(tarStr.indexOf(String.fromCharCode(10))>=0){tarStr=tarStr.replace(String.fromCharCode(10),"");}while(tarStr.indexOf(String.fromCharCode(13))>=0){tarStr=tarStr.replace(String.fromCharCode(13),"");}return tarStr;}}function $removeTAB(tarStr){if(crStr.bool){while(tarStr.indexOf(String.fromCharCode(9))>=0){tarStr=tarStr.replace(String.fromCharCode(9),"");}return tarStr;}}function $makeDate(baseDate,dateType){if(crStr.bool){var typeAry=new Array("年",".","/");var getType=999;for(var i=0;i<typeAry.length;i++){if(baseDate.indexOf(typeAry[i])>=0){getType=i;break;}}if(getType==999){getType=3;}var sepalateAry=new Array("年","月","日",".",".",".","/","/","/");var yearNum,monthNum,dayNum;if(getType!=3){var workStr=baseDate;var workPos=workStr.indexOf(sepalateAry[getType*3]);yearNum=Number(workStr.substr(0,workPos));workStr=workStr.substr(workPos+1);workPos=workStr.indexOf(sepalateAry[getType*3+1]);monthNum=Number(workStr.substr(0,workPos));workStr=workStr.substr(workPos+1);workPos=workStr.indexOf(sepalateAry[getType*3+2]);if(workPos>=0){dayNum=Number(workStr.substr(0,workPos));}else{dayNum=workStr;}}else{yearNum=Number(baseDate.substr(0,4));monthNum=Number(baseDate.substr(4,2));dayNum=Number(baseDate.substr(6,2));}var dateTypeAry=new Array("j","p","s","none");if(dateType=="auto"||!dateType){dateType=dateTypeAry[getType];}var useTypeNum;if(dateType=="j"||dateType=="p"||dateType=="s"){useTypeNum=$aryFind(dateTypeAry,dateType)[1];}var newDateStr;if(dateType=="none"){newDateStr=$numColumns(yearNum,4)+$numColumns(monthNum,2)+$numColumns(dayNum,2);}else if(dateType=="e"){var monthAry=new Array("January","February","March","April","May","June","July","August","September","October","November","December");newDateStr=monthAry[monthNum-1]+" "+dayNum+", "+yearNum;}else{newDateStr=$numColumns(yearNum,4)+sepalateAry[useTypeNum*3];newDateStr+=$numColumns(monthNum,2)+sepalateAry[useTypeNum*3+1];if(dateType=="j"){newDateStr+=$numColumns(dayNum,2)+sepalateAry[useTypeNum*3+2];}else{newDateStr+=$numColumns(dayNum,2);}}return newDateStr;}}function $makeYM(baseDate,dateType){if(crStr.bool){var typeAry=new Array("年",".","/");var getType=999;for(var i=0;i<typeAry.length;i++){if(baseDate.indexOf(typeAry[i])>=0){getType=i;break;}}if(getType==999){getType=3;}var sepalateAry=new Array("年","月",".",".","/","/");var yearNum,monthNum;if(getType!=3){var workStr=baseDate;var workPos=workStr.indexOf(sepalateAry[getType*2]);yearNum=Number(workStr.substr(0,workPos));workStr=workStr.substr(workPos+1);workPos=workStr.indexOf(sepalateAry[getType*2+1]);if(workPos>=0){monthNum=Number(workStr.substr(0,workPos));}else{monthNum=workStr;}}else{yearNum=Number(baseDate.substr(0,4));monthNum=Number(baseDate.substr(4,2));}var dateTypeAry=new Array("j","p","s","none");if(dateType=="auto"||!dateType){dateType=dateTypeAry[getType];}var useTypeNum;if(dateType=="j"||dateType=="p"||dateType=="s"){useTypeNum=$aryFind(dateTypeAry,dateType)[1];}var newDateStr;if(dateType=="none"){newDateStr=$numColumns(yearNum,4)+$numColumns(monthNum,2);}else if(dateType=="e"){var monthAry=new Array("January","February","March","April","May","June","July","August","September","October","November","December");newDateStr=monthAry[monthNum-1]+" "+yearNum;}else{newDateStr=$numColumns(yearNum,4)+sepalateAry[useTypeNum*2];if(dateType=="j"){newDateStr+=$numColumns(monthNum,2)+sepalateAry[useTypeNum*2+1];}else{newDateStr+=$numColumns(monthNum,2);}}return newDateStr;}}function $strEDate(baseDate,strType,dayType){if(crStr.bool){var typeAry=new Array("年",".","/");var getType=999;for(var i=0;i<typeAry.length;i++){if(baseDate.indexOf(typeAry[i])>=0){getType=i;break;}}if(getType==999){getType=3;}var sepalateAry=new Array("年","月","日",".",".",".","/","/","/");var yearNum,monthNum,dayNum;if(getType!=3){var workStr=baseDate;var workPos=workStr.indexOf(sepalateAry[getType*3]);yearNum=Number(workStr.substr(0,workPos));workStr=workStr.substr(workPos+1);workPos=workStr.indexOf(sepalateAry[getType*3+1]);monthNum=Number(workStr.substr(0,workPos));workStr=workStr.substr(workPos+1);workPos=workStr.indexOf(sepalateAry[getType*3+2]);if(workPos>=0){dayNum=Number(workStr.substr(0,workPos));}else{dayNum=Number(workStr);}}else{yearNum=Number(baseDate.substr(0,4));monthNum=Number(baseDate.substr(4,2));dayNum=Number(baseDate.substr(6,2));}if(dayType&&strType.toLowerCase()!="d2"){dayNum=$numColumns(dayNum,2);}var monthAry=new Array("January","February","March","April","May","June","July","August","September","October","November","December");var newDateStr;if(strType.toLowerCase()=="y"){newDateStr=yearNum;}else if(strType.toLowerCase()=="m"||strType.toLowerCase()=="m1"){newDateStr=monthAry[monthNum-1];}else if(strType.toLowerCase()=="m2"){newDateStr=monthAry[monthNum-1].substr(0,3);}else if(strType.toLowerCase()=="d"||strType.toLowerCase()=="d1"){newDateStr=dayNum;}else if(strType.toLowerCase()=="d2"){if(dayNum==1||dayNum==21||dayNum==31){newDateStr=dayNum+"st";}else if(dayNum==2||dayNum==22){newDateStr=dayNum+"nd";}else if(dayNum==3||dayNum==23){newDateStr=dayNum+"rd";}else{newDateStr=dayNum+"th";}}else if(strType.toLowerCase()=="md"||strType.toLowerCase()=="md1"){newDateStr=monthAry[monthNum-1]+" "+dayNum;}else if(strType.toLowerCase()=="md2"){newDateStr=monthAry[monthNum-1].substr(0,3)+" "+dayNum;}else if(strType.toLowerCase()=="all"){newDateStr=monthAry[monthNum-1]+" "+dayNum+", "+yearNum;}return newDateStr;}}function $strEMonthToNum(eMonth,backType){if(crStr.bool){var workEShortMonth=eMonth.substr(0,3).toUpperCase();var eShortMonthAry=new Array("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC");var checkValue=$aryFind(eShortMonthAry,workEShortMonth);var resultNum,resultStr;if(checkValue[0]){resultNum=Number(checkValue[1])+1;if(backType){return String($numColumns(resultNum,2));}else{return String(resultNum);}}else{return false;}}}function $orderDate(orderType){if(crStr.bool){if(arguments.length>=3){var dateAry=new Array(0);for(var i=1;i<arguments.length;i++){dateAry.push(arguments[i]);}var monthAry=new Array("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC");var formattedDateAry=new Array(0);for(var ii=0;ii<dateAry.length;ii++){var tempDate=dateAry[ii].toUpperCase();var eMonth=-1;for(var iii=0;iii<monthAry.length;iii++){if(tempDate.indexOf(monthAry[iii])>=0){eMonth=iii+1;break;}}if(eMonth<0){var newDate=$makeDate(tempDate,'none');formattedDateAry.push(newDate);}else{var tempY=tempDate.split(",")[1].replace(" ","");var tempM=$numColumns(eMonth,2);var tempD=$numColumns(Number(tempDate.split(",")[0].split(" ")[1]),2);formattedDateAry.push(String(tempY)+String(tempM)+String(tempD));}}var resultAry=new Array(0);for(var iv=0;iv<formattedDateAry.length;iv++){var checkDate=Number(formattedDateAry[iv]);if(iv===0){resultAry.push(iv);}else{var checkFlag=false;for(var v=0;v<resultAry.length;v++){var checkedDate=formattedDateAry[resultAry[v]];if(checkDate==checkedDate){resultAry.splice(v+1,0,iv);checkFlag=true;break;}else if(checkDate<checkedDate){resultAry.splice(v,0,iv);checkFlag=true;break;}}if(!checkFlag){resultAry.push(iv);}}}if(orderType.toUpperCase()=="ASC"){return resultAry;}else{return resultAry.reverse();}}else{return false;}}}function $getMonthDays(aYear,aMonth){if(crStr.bool){var nextMonthM=$numNext(1,12,aMonth);var nextMonthY;if(aMonth==12){nextMonthY=aYear+1;}else{nextMonthY=aYear;}var next1stDay=new Date(nextMonthY+"/"+nextMonthM+"/1");var tarMonthEnd=new Date(next1stDay.getTime()-1000);return tarMonthEnd.getDate();}}function $numAddCamma(tarNum){if(crStr.bool){if(!isNaN(tarNum)){var plusNum;if(tarNum>=0){plusNum=true;}else{plusNum=false;tarNum*=-1;}var gettxt=String(Number(tarNum));var txtAry=new Array(0);for(var i=0;i<=gettxt.length-1;i++){txtAry[i]=gettxt.substr(i,1);}txtAry.reverse();var revAry=new Array(0);for(i=0;i<=txtAry.length-1;i++){if(i!==0&&(i%3)===0){revAry[revAry.length]=",";}revAry[revAry.length]=txtAry[i];}revAry.reverse();var settxt="";for(i=0;i<=revAry.length-1;i++){settxt+=revAry[i];}if(!plusNum){settxt="-"+settxt;}return settxt;}else{return "";}}}function $numColumns(tarNum,columns){if(crStr.bool){var useNum=String(Number(tarNum));var useColumns=Number(columns);if(!isNaN(useNum)&&useNum!==""){if(useNum.length<useColumns){zeroNum=useColumns-useNum.length;zeroTxt="";for(setZero=1;setZero<=zeroNum;setZero++){zeroTxt+="0";}return zeroTxt+useNum;}else{return useNum;}}else{return "";}}}function $numFitRange(aNum,aMin,aMax){if(crStr.bool){if(!isNaN(aNum)&&aNum!==""){if(aNum>=aMin&&aNum<=aMax){return aNum;}else if(aNum<aMin){return aMin;}else if(aNum>aMax){return aMax;}}else{return false;}}}function $unitToNum(tartxt){if(crStr.bool){var resultTxt=tartxt.replace("px","");resultTxt=resultTxt.replace("em","");resultTxt=resultTxt.replace("ex","");resultTxt=resultTxt.replace("pt","");resultTxt=resultTxt.replace("cm","");resultTxt=resultTxt.replace("mm","");resultTxt=resultTxt.replace("pc","");resultTxt=resultTxt.replace("%","");resultTxt=resultTxt.replace("deg","");resultTxt=resultTxt.replace("ms","");return Number(resultTxt);}}function $numFP(tarNum,tarClm,removeZero){if(crStr.bool){if(tarClm>=1){var bySize=1;for(var i=1;i<=tarClm;i++){bySize*=10;}var workNum=Math.round(tarNum*bySize);if(isNaN(workNum)){return workNum;}else{workNum=workNum/bySize;var workNumStr=String(workNum);var workNumStrFixed;if(workNumStr.indexOf(".")<0){workNumStrFixed=workNumStr+".";for(i=1;i<=tarClm;i++){workNumStrFixed+="0";}}else{var checkStrPos=workNumStr.indexOf(".");var checkStr=workNumStr.substr(checkStrPos+1);if(checkStr.length<tarClm){workNumStrFixed=workNumStr;for(i=1;i<=tarClm-checkStr.length;i++){workNumStrFixed+="0";}}else{workNumStrFixed=workNumStr;}}if(removeZero){var doAgain,strLength;do{doAgain=false;strLength=workNumStrFixed.length;var rightNum=workNumStrFixed.substr(strLength-1,1);if(rightNum=="0"){workNumStrFixed=workNumStrFixed.substr(0,strLength-1);doAgain=true;}}while(doAgain);strLength=workNumStrFixed.length;if(workNumStrFixed.substr(strLength-1,1)=="."){workNumStrFixed+="0";}}return workNumStrFixed;}}else{return String(Math.round(tarNum));}}}function $numFPRemoveZero(numTxt){if(crStr.bool){return Number(numTxt);}}function $numNext(startNum,totalNum,nowNum){if(crStr.bool){if(!isNaN(nowNum)&&nowNum>=startNum&&nowNum<startNum+totalNum){var workNum=nowNum+1;if(workNum>=startNum+totalNum){return Number(startNum);}else{return Number(workNum);}}else{return false;}}}function $numPrev(startNum,totalNum,nowNum){if(crStr.bool){if(!isNaN(nowNum)&&nowNum>=startNum&&nowNum<startNum+totalNum){var workNum=nowNum-1;if(workNum>=startNum){return Number(workNum);}else{return Number(startNum+totalNum-1);}}else{return false;}}}function $numTrans(baseData,nowType,getType){if(crStr.bool){nowType=nowType.toLowerCase();getType=getType.toLowerCase();if(nowType=="hex"){baseData=parseInt(baseData,16);}else if(nowType=="per"){baseData=Math.round(baseData*2.55);}var newData;if(getType=="rgb"){newData=baseData;}else if(getType=="hex"){newData=Number(baseData).toString(16);if(newData.length==1){newData="0"+String(newData);}newData=newData.toUpperCase();}else if(getType=="per"){newData=Math.round((baseData*100)/255);}return String(newData);}}function $mathPowRev(aBaseNum,aStep,aTimes){if(crStr.bool){return aBaseNum/Math.pow(aStep,aTimes);}}function $getAlpha(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);var gaStyle=$style(tarNode);var getAlphaNum;if(bsrType!="ie"||newIE){getAlphaNum=gaStyle.opacity*100;}else{var getAlphaTxt=gaStyle.filter;if(getAlphaTxt.indexOf("opacity=")>=0){var gaPos1=getAlphaTxt.indexOf("opacity=");var gaPos2=getAlphaTxt.indexOf(")");getAlphaNum=getAlphaTxt.substr(gaPos1+8,gaPos2-gaPos1-8);}else{getAlphaNum=100;}}getAlphaNum=Math.floor(getAlphaNum);return Number(getAlphaNum);}}function $setAlpha(aNode,tarAlpha){if(crStr.bool){var tarNode=$getTarNode(aNode);tarNode.style.zoom="1";var useAlpha;if(bsrType!="ie"||newIE){useAlpha=Math.max(tarAlpha/100,0);tarNode.style.opacity=useAlpha;}else{useAlpha=Math.max(Math.floor(tarAlpha),0);tarNode.style.filter="alpha(opacity="+useAlpha+")";}}}function $getColor(aNode,tarItem){if(crStr.bool){var tarNode=$getTarNode(aNode);tarItem=$strReplaceAll(tarItem,"tx","color");tarItem=$strReplaceAll(tarItem,"bg","backgroundColor");tarItem=$strReplaceAll(tarItem,"bc","borderTopColor");tarItem=$strReplaceAll(tarItem,"bt","borderTopColor");tarItem=$strReplaceAll(tarItem,"br","borderRightColor");tarItem=$strReplaceAll(tarItem,"bl","borderLeftColor");tarItem=$strReplaceAll(tarItem,"bb","borderBottomColor");var aStyle=$style(tarNode);var getColor=aStyle[tarItem];getColor=$strReplaceAll(getColor," ","");if(getColor=="transparent"){getColor="rgba(0,0,0,0)";}if($str(getColor,"rgb(")||$str(getColor,"#")){getColor=$clrStyleRGBTo("HEX",getColor);}if(bsrType=="ie"&&!newIE){if($str(getColor,"rgba")){getColor=$clrRGBAToHEX(getColor);}}return getColor;}}function $clrTransparent(aColor){if(crStr.bool){var resultValue=false;if(aColor.toLowerCase()=="transparent"){resultValue=true;}else if($clrGetRGBAItem(aColor,"A")===0){resultValue=true;}else if(aColor=="none"){resultValue=true;}else if(aColor===null){resultValue=true;}return resultValue;}}function $clrRGBTo(getType,vRed,vGreen,vBlue){if(crStr.bool){if((vRed>=0&&vRed<=255)&&(vGreen>=0&&vGreen<=255)&&(vBlue>=0&&vBlue<=255)){var getValue;if(getType.toLowerCase()=="hsb"){var vMax=Math.max(vRed,vGreen,vBlue);var vMin=Math.min(vRed,vGreen,vBlue);var getB=Math.round((vMax/255)*100);var getS=Math.round(((vMax-vMin)/vMax)*100);if(isNaN(getS)){getS=0;}var getH;if(vMax==vRed){getH=Math.round(60*(0+((vGreen-vBlue)/(vMax-vMin))));if(isNaN(getH)){getH=0;}}else if(vMax==vGreen){getH=Math.round(60*(2+((vBlue-vRed)/(vMax-vMin))));}else{getH=Math.round(60*(4+((vRed-vGreen)/(vMax-vMin))));}if(getH<0){getH+=360;}getValue={"H":getH,"S":getS,"B":getB};}else if(getType.toLowerCase()=="hex"){var hex1=$numTrans(vRed,"rgb","hex");var hex2=$numTrans(vGreen,"rgb","hex");var hex3=$numTrans(vBlue,"rgb","hex");getValue=hex1+hex2+hex3;}else if(getType.toLowerCase()=="per"){getValue={"R":$numTrans(vRed,"rgb","per"),"G":$numTrans(vGreen,"rgb","per"),"B":$numTrans(vBlue,"rgb","per")};}else if(getType.toLowerCase()=="cmyk"){var vBlack=Math.min(1-vRed/255,1-vGreen/255,1-vBlue/255);var vCyan=(1-(vRed/255)-vBlack)/(1-vBlack);var vMagenta=(1-(vGreen/255)-vBlack)/(1-vBlack);var vYellow=(1-(vBlue/255)-vBlack)/(1-vBlack);getValue={"C":Math.round(vCyan*100),"M":Math.round(vMagenta*100),"Y":Math.round(vYellow*100),"K":Math.round(vBlack*100)};}else if(getType.toLowerCase()=="xcode"){var perR=$numTrans(vRed,"rgb","per");var perG=$numTrans(vGreen,"rgb","per");var perB=$numTrans(vBlue,"rgb","per");var clrR=$numFP(perR/100,2,true);var clrG=$numFP(perG/100,2,true);var clrB=$numFP(perB/100,2,true);if(clrR==clrG&&clrR==clrB){clrCode="[UIColor colorWithWhite:"+clrR+" alpha:1.0]";}else{clrCode="[UIColor colorWithRed:"+clrR+" green:"+clrG+" blue:"+clrB+" alpha:1.0]";}getValue=clrCode;}return getValue;}else{return false;}}}function $clrRGBAToHEX(aRGBA,withSharp){if(crStr.bool){var vRed=$clrGetRGBAItem(aRGBA,"R");var vGreen=$clrGetRGBAItem(aRGBA,"G");var vBlue=$clrGetRGBAItem(aRGBA,"B");var resultValue=$clrRGBTo("HEX",vRed,vGreen,vBlue);if(withSharp){return "#"+resultValue;}else{return resultValue;}}}function $clrStyleRGBTo(getType,RGBcode){if(crStr.bool){if(RGBcode.substr(0,3)=="rgb"){do{RGBcode=RGBcode.replace(" ","");}while(RGBcode.indexOf(" ")>=0);var pos1=RGBcode.indexOf("(")+1;var pos2=RGBcode.indexOf(")");var clrAry=RGBcode.substr(pos1,pos2-pos1).split(",");var rValue=Number(clrAry[0]);var gValue=Number(clrAry[1]);var bValue=Number(clrAry[2]);return $clrRGBTo(getType,rValue,gValue,bValue);}else if(RGBcode.substr(0,1)=="#"){return $clrHEXTo(getType,RGBcode);}}}function $HEX6(aHEX){if(crStr.bool){if(aHEX.substr(0,1)=="#"){aHEX=aHEX.substr(1);}if(aHEX.length==3){var newHEX=aHEX.substr(0,1)+aHEX.substr(0,1);newHEX+=aHEX.substr(1,1)+aHEX.substr(1,1);newHEX+=aHEX.substr(2,1)+aHEX.substr(2,1);aHEX=newHEX;}return aHEX;}}function $clrHEXTo(getType,aHEX){if(crStr.bool){aHEX=$HEX6(aHEX);var vRed=$numTrans(aHEX.substr(0,2),"hex","rgb");var vGreen=$numTrans(aHEX.substr(2,2),"hex","rgb");var vBlue=$numTrans(aHEX.substr(4,2),"hex","rgb");if(aHEX.length==6){var getValue;if(getType.toLowerCase()=="rgb"){getValue={"R":vRed,"G":vGreen,"B":vBlue};}else if(getType.toLowerCase()=="rgba"){getValue="rgba("+vRed+","+vGreen+","+vBlue+",1.0)";}else{getValue=$clrRGBTo(getType,vRed,vGreen,vBlue);}return getValue;}else{return false;}}}function $clrHSBTo(getType,vH,vS,vB){if(crStr.bool){if(vH<0){vH+=360;}else if(vH>359){vH-=360;}if((vH>=0&&vH<=359)&&(vS>=0&&vS<=100)&&(vB>=0&&vB<=100)){var Hn=Math.floor(vH/60);var F=(vH/60)-Hn;var M=vB*(1-(vS/100));var N=vB*(1-(vS/100)*F);var K=vB*(1-(vS/100)*(1-F));switch(Hn){case 0:getR=vB;getG=K;getB=M;break;case 1:getR=N;getG=vB;getB=M;break;case 2:getR=M;getG=vB;getB=K;break;case 3:getR=M;getG=N;getB=vB;break;case 4:getR=K;getG=M;getB=vB;break;case 5:getR=vB;getG=M;getB=N;break;default:getR=getG=getB=0;break;}var getR=Math.round((255*getR)/100);var getG=Math.round((255*getG)/100);var getB=Math.round((255*getB)/100);var getValue;if(getType.toLowerCase()=="rgb"){getValue={"R":getR,"G":getG,"B":getB};}else if(getType.toLowerCase()=="rgba"){getValue="rgba("+getR+","+getG+","+getB+",1.0)";}else{getValue=$clrRGBTo(getType,getR,getG,getB);}return getValue;}else{return false;}}}function $clrGetRGBA(){if(crStr.bool){var numRed=0;var numGreen=0;var numBlue=0;var numAlpha=0.0;if(arguments.length==2){var getClr=$clrHEXTo("RGB",arguments[0]);numRed=getClr.R;numGreen=getClr.G;numBlue=getClr.B;numAlpha=String(arguments[1]);if(numAlpha.indexOf("%")>=0){numAlpha=$unitToNum(numAlpha)/100;}}else if(arguments.length==4){numRed=String(arguments[0]);if(numRed.indexOf("%")>=0){numRed=$numTrans(String($unitToNum(numRed)),"per","rgb");}numGreen=String(arguments[1]);if(numGreen.indexOf("%")>=0){numGreen=$numTrans(String($unitToNum(numGreen)),"per","rgb");}numBlue=String(arguments[2]);if(numBlue.indexOf("%")>=0){numBlue=$numTrans(String($unitToNum(numBlue)),"per","rgb");}numAlpha=String(arguments[3]);if(numAlpha.indexOf("%")>=0){numAlpha=$unitToNum(numAlpha)/100;}}return "rgba("+numRed+","+numGreen+","+numBlue+","+numAlpha+")";}}function $clrGetRGBAItem(aRGBA,getType){if(crStr.bool){aRGBA=$strReplaceAll(aRGBA," ","");var pos1=aRGBA.indexOf("(")+1;var pos2=aRGBA.indexOf(")");var clrAry=aRGBA.substr(pos1,pos2-pos1).split(",");var rValue=Number(clrAry[0]);var gValue=Number(clrAry[1]);var bValue=Number(clrAry[2]);var aValue=Number(clrAry[3]);if(arguments.length==1){return {"R":rValue,"G":gValue,"B":bValue,"A":aValue};}else if(getType.toUpperCase()=="R"){return rValue;}else if(getType.toUpperCase()=="G"){return gValue;}else if(getType.toUpperCase()=="B"){return bValue;}else if(getType.toUpperCase()=="A"){return aValue;}else{return null;}}}function $clrSetRGBAAlpha(aNode,aPropaty,newAlpha){if(crStr.bool){if(bsrType!="ie"||newIE){var tarNode=$getTarNode(aNode);var nowColor,vRed,vGreen,vBlue,vAlpha;if(aPropaty=="color"){nowColor=$style(tarNode).color;}else if(aPropaty=="backgroundColor"){nowColor=$style(tarNode).backgroundColor;}else if(aPropaty=="borderColor"){nowColor=$style(tarNode).borderColor;}else if(aPropaty=="borderTopColor"){nowColor=$style(tarNode).borderTopColor;}else if(aPropaty=="borderLeftColor"){nowColor=$style(tarNode).borderLeftColor;}else if(aPropaty=="borderRightColor"){nowColor=$style(tarNode).borderRightColor;}else if(aPropaty=="borderBottomColor"){nowColor=$style(tarNode).borderBottomColor;}if(!nowColor&&bsrName=="firefox"){if(aPropaty=="borderColor"){nowColor=$style(tarNode).borderTopColor;}}if(nowColor.substr(0,4)=="rgba"){vRed=$clrGetRGBAItem(nowColor,'R');vGreen=$clrGetRGBAItem(nowColor,'G');vBlue=$clrGetRGBAItem(nowColor,'B');}else if(nowColor.substr(0,3)=="rgb"||nowColor.indexOf("#")>=0){vRed=$clrStyleRGBTo("per",nowColor).R;vRed=$numTrans(String(vRed),'per','rgb');vGreen=$clrStyleRGBTo("per",nowColor).G;vGreen=$numTrans(String(vGreen),'per','rgb');vBlue=$clrStyleRGBTo("per",nowColor).B;vBlue=$numTrans(String(vBlue),'per','rgb');}else{nowColor=false;}if(nowColor!==false){var newRGBA="rgba("+vRed+","+vGreen+","+vBlue+","+$numFitRange(newAlpha,0.0,1.0)+")";if(aPropaty=="color"){tarNode.style.color=newRGBA;}else if(aPropaty=="backgroundColor"){tarNode.style.backgroundColor=newRGBA;}else if(aPropaty=="borderColor"){tarNode.style.borderColor=newRGBA;}else if(aPropaty=="borderTopColor"){tarNode.style.borderTopColor=newRGBA;}else if(aPropaty=="borderLeftColor"){tarNode.style.borderLeftColor=newRGBA;}else if(aPropaty=="borderRightColor"){tarNode.style.borderRightColor=newRGBA;}else if(aPropaty=="borderBottomColor"){tarNode.style.borderBottomColor=newRGBA;}}}}}function $clrTransition(clr1,clr2,aStep,aCount,withSharp){if(crStr.bool){var aValue1=false;var aValue2=false;var resultRGBA=false;if(clr1.indexOf("rgba")>=0){aValue1=$clrGetRGBAItem(clr1,"A")*100;clr1=$clrStyleRGBTo("HEX",clr1);}if(clr2.indexOf("rgba")>=0){aValue2=$clrGetRGBAItem(clr2,"A")*100;clr2=$clrStyleRGBTo("HEX",clr2);}if(aValue1!==false||aValue2!==false){resultRGBA=true;if(bsrType=="ie"&&!newIE){resultRGBA=false;}}if(aValue1===false){aValue1=100;}if(aValue2===false){aValue2=100;}if(aStep>=2&&aCount<aStep){if(aCount===0){if(resultRGBA){return $clrGetRGBA("#"+clr1,aValue1+"%");}else{if(withSharp){return "#"+clr1;}else{return clr1;}}}else if(aCount==aStep-1){if(resultRGBA){return $clrGetRGBA("#"+clr2,aValue2+"%");}else{if(withSharp){return "#"+clr2;}else{return clr2;}}}else{var HSB1=$clrHEXTo("hsb",clr1);var HSB2=$clrHEXTo("hsb",clr2);var movHMax=Math.max(HSB1.H,HSB2.H);var movHMin=Math.min(HSB1.H,HSB2.H);var movHValue1=movHMax-movHMin;var movHValue2=movHMin+(359-movHMax);var movHValue=Math.min(movHValue1,movHValue2);if(movHValue1<movHValue2){if(HSB1.H>HSB2.H){movHValue*=-1;}}else{if(HSB1.H<HSB2.H){movHValue*=-1;}}var movH=movHValue/(aStep-1);var tempH=HSB1.H+Math.round(movH*aCount);if(tempH<0){tempH+=360;}else if(tempH>359){tempH-=360;}var movS=(HSB2.S-HSB1.S)/(aStep-1);var tempS=HSB1.S+Math.round(movS*aCount);tempS=$numFitRange(tempS,0,100);var movB=(HSB2.B-HSB1.B)/(aStep-1);var tempB=HSB1.B+Math.round(movB*aCount);tempB=$numFitRange(tempB,0,100);var movA=(aValue2-aValue1)/(aStep-1);var tempA=aValue1+(movA*aCount);tempA=$numFitRange(tempA,0,100);if(resultRGBA){var newHEX=$clrHSBTo("hex",tempH,tempS,tempB);return $clrGetRGBA("#"+newHEX,tempA+"%");}else{if(withSharp){return "#"+$clrHSBTo("hex",tempH,tempS,tempB);}else{return $clrHSBTo("hex",tempH,tempS,tempB);}}}}else{return false;}}}function $clrTransitionH(aHex,aH,aStep,aCount){if(crStr.bool){if(aStep>=1&&aCount<aStep){if(aCount===0){return aHex;}else{var aHSB=$clrHEXTo("hsb",aHex);var H1=aHSB.H;var H2=aHSB.H+aH;do{if(H2<0){H2+=360;}else if(H2>359){H2-=360;}}while(H2<0||H2>359);var movHMax=Math.max(H1,H2);var movHMin=Math.min(H1,H2);var movHValue1=movHMax-movHMin;var movHValue2=movHMin+(359-movHMax);var movHValue=Math.min(movHValue1,movHValue2);if(movHValue1<movHValue2){if(H1>H2){movHValue*=-1;}}else{if(H1<H2){movHValue*=-1;}}var movH=movHValue/(aStep-1);var tempH=H1+Math.round(movH*aCount);if(tempH<0){tempH+=360;}else if(tempH>359){tempH-=360;}return $clrHSBTo("hex",tempH,aHSB.S,aHSB.B);}}else{return false;}}}function $clrTransitionS(aHex,aS,aStep,aCount){if(crStr.bool){if(aStep>=1&&aCount<aStep){if(aCount===0){return aHex;}else{var aHSB=$clrHEXTo("hsb",aHex);var S1=aHSB.S;var S2=aHSB.S+aS;S2=$numFitRange(S2,0,100);var movS=(S2-S1)/(aStep-1);var tempS=S1+Math.round(movS*aCount);tempS=$numFitRange(tempS,0,100);return $clrHSBTo("hex",aHSB.H,tempS,aHSB.B);}}else{return false;}}}function $clrTransitionB(aHex,aB,aStep,aCount){if(crStr.bool){if(aStep>=1&&aCount<aStep){if(aCount===0){return aHex;}else{var aHSB=$clrHEXTo("hsb",aHex);var B1=aHSB.B;var B2=aHSB.B+aB;B2=$numFitRange(B2,0,100);var movB=(B2-B1)/(aStep-1);var tempB=B1+Math.round(movB*aCount);tempB=$numFitRange(tempB,0,100);return $clrHSBTo("hex",aHSB.H,aHSB.S,tempB);}}else{return false;}}}function $clrByClr(frontHEX,aAlpha,rearHEX){if(crStr.bool){var frontAlpha=aAlpha/100;var rearAlpha=1-frontAlpha;var frontRGB=$clrHEXTo("rgb",frontHEX);var rearRGB=$clrHEXTo("rgb",rearHEX);var newR=Math.round((frontRGB.R*frontAlpha)+(rearRGB.R*rearAlpha));var newG=Math.round((frontRGB.G*frontAlpha)+(rearRGB.G*rearAlpha));var newB=Math.round((frontRGB.B*frontAlpha)+(rearRGB.B*rearAlpha));newR=$numFitRange(newR,0,255);newG=$numFitRange(newG,0,255);newB=$numFitRange(newB,0,255);return $clrRGBTo("HEX",newR,newG,newB);}}function $imgResize(classname,aType,tarNum,zoomable){if(crStr.bool){var type=aType.toLowerCase();var tarNodes=$getNodes(classname);if(tarNodes){for(var i=0;i<tarNodes.length;i++){if(tarNodes[i].tagName=="IMG"){var defW=tarNodes[i].width;var newW=defW;var defH=tarNodes[i].height;var newH=defH;var landscape;if(defW>defH){landscape=true;}else{landscape=false;}var useScale;if(type=="w"||(type=="s"&&landscape)){if(!zoomable&&defW<=tarNum){}else{useScale=tarNum/defW;newW=tarNum;newH=Math.round(defH*useScale);}}else if(type=="h"||(type=="s"&&!landscape)){if(!zoomable&&defH<=tarNum){}else{useScale=tarNum/defH;newW=Math.round(defW*useScale);newH=tarNum;}}tarNodes[i].width=newW;tarNodes[i].height=newH;}}}}}function $imgresize(classname,type,tarNum){if(type=="h"){type="w";}else if(type=="v"){type="h";}else if(type=="s"){type="s";}$imgResize(classname,type,tarNum,false);}function $imgFillIn(){if(crStr.bool){var posAry=new Array("lt","ct","rt","lc","cc","rc","lb","cb","rb");var totalNodes=0;var finishedNum=0;for(var k=0;k<posAry.length;k++){var posType=posAry[k];var tempClass="imgfillin_"+posType;var tempNodes=$getNodes(tempClass);if(tempNodes){for(var kk=0;kk<tempNodes.length;kk++){var workNode=tempNodes[kk];if($tag("img",workNode).length>=1){totalNodes++;var workImg=$tag("img",workNode)[0];var tempImg=new Image();tempImg.src=workImg.src;var imgW,imgH;if(tempImg.width>=1&&tempImg.height>=1){imgW=tempImg.width;imgH=tempImg.height;var aStyle=$style(workNode);var useW=$unitToNum(aStyle.width);var useH=$unitToNum(aStyle.height);var tempScaleW=useW/imgW;var tempScaleH=useH/imgH;var newW,newH;if(tempScaleW>tempScaleH){newW=useW;newH=Math.ceil(imgH*tempScaleW);}else{newW=Math.ceil(imgW*tempScaleH);newH=useH;}workImg.width=newW;workImg.height=newH;if(aStyle.position!="absolute"&&aStyle.position!="fixed"){workNode.style.position="relative";}workNode.style.overflow="hidden";workImg.style.position="absolute";workImg.style.display="block";if(posType.charAt(0)=="l"){workImg.style.left=0;}else if(posType.charAt(0)=="c"){workImg.style.left=Math.round((useW-newW)/2)+"px";}else{workImg.style.left=useW-newW+"px";}if(posType.charAt(1)=="t"){workImg.style.top=0;}else if(posType.charAt(1)=="c"){workImg.style.top=Math.round((useH-newH)/2)+"px";}else{workImg.style.top=useH-newH+"px";}finishedNum++;}else{}}}}}if(totalNodes!=finishedNum){setTimeout($imgFillIn,350);}else{klibImgFillInFinished=true;}}}function $imgOverFade(tarname){if(crStr.bool){if(bsrName=="firefox"){if(arguments.length==1){$imgOver(tarname);}else if(arguments.length==3){$imgOver(tarname,arguments[1]);}else{if(arguments[1]!==true&&arguments[1]!==false){$imgOver(tarname,arguments[1]);}else{$imgOver(tarname);}}}else if(!cellPhone&&!aTablet){var newImgId=tarname+"-klibimgfade";if(!$id(newImgId)){var tarParentNode=$id(tarname).parentNode;var nowSrc=$id(tarname).src;var src1=nowSrc.substr(0,nowSrc.lastIndexOf("_"));var src2="_on";if(arguments.length==2){if(arguments[1]!==true&&arguments[1]!==false){src2=arguments[1];}}else if(arguments.length==3){src2=arguments[1];}src3=nowSrc.substr(nowSrc.lastIndexOf("."));var newImgPath=src1+src2+src3;$addImgNode(tarParentNode,newImgPath,false,$id(tarname).offsetWidth,$id(tarname).offsetHeight,$id(tarname).alt,'');var newImg=$tag("img",tarParentNode)[1];$setId(newImg,newImgId,true);var pngFile=false;if($id(newImgId).src.indexOf("png")>=0){pngFile=true;}if(bsrType=="ie"&&!newIE&&pngFile){$id(newImgId).style.visibility="hidden";}else{$setAlpha(newImgId,0);}}var alphaBase=true;if(arguments.length==2){if(arguments[1]===true||arguments[1]===false){alphaBase=arguments[1];}}else if(arguments.length==3){alphaBase=arguments[2];}$id(newImgId).style.position="absolute";$id(newImgId).style.top=$id(tarname).offsetTop+"px";$id(newImgId).style.left=$id(tarname).offsetLeft+"px";if(!$aryFind(klibImgOverFadeAry,newImgId)[0]){klibImgOverFadeAry.push(newImgId);}if(!$aryFind(klibImgOverFadeBaseAry,tarname)[0]){klibImgOverFadeBaseAry.push(tarname);klibImgOverFadeTypeAry.push(alphaBase);}if($aryFind(klibImgOutFadeAry,newImgId)[0]){klibImgOutFadeAry.splice($aryFind(klibImgOutFadeAry,newImgId)[1],1);}if($aryFind(klibImgOutFadeBaseAry,tarname)[0]){klibImgOutFadeTypeAry.splice($aryFind(klibImgOutFadeBaseAry,tarname)[1],1);klibImgOutFadeBaseAry.splice($aryFind(klibImgOutFadeBaseAry,tarname)[1],1);}clearTimeout(klibImgFadeTimer);klibImgFadeTimer=setTimeout($imgFadeAni,40);}}}function $imgOutFade(tarname){if(crStr.bool){if(bsrName=="firefox"){$imgOut(tarname);}else if(!cellPhone&&!aTablet){var newImgId=tarname+"-klibimgfade";var alphaBase=true;if(arguments.length==2){alphaBase=arguments[1];}if($id(newImgId)){if(!$aryFind(klibImgOutFadeAry,newImgId)[0]){klibImgOutFadeAry.push(newImgId);}if(!$aryFind(klibImgOutFadeBaseAry,tarname)[0]){klibImgOutFadeBaseAry.push(tarname);klibImgOutFadeTypeAry.push(alphaBase);}if($aryFind(klibImgOverFadeAry,newImgId)[0]){klibImgOverFadeAry.splice($aryFind(klibImgOverFadeAry,newImgId)[1],1);}if($aryFind(klibImgOverFadeBaseAry,tarname)[0]){klibImgOverFadeTypeAry.splice($aryFind(klibImgOverFadeBaseAry,tarname)[1],1);klibImgOverFadeBaseAry.splice($aryFind(klibImgOverFadeBaseAry,tarname)[1],1);}clearTimeout(klibImgFadeTimer);klibImgFadeTimer=setTimeout($imgFadeAni,40);}}}}function $imgFadeAni(){var imgFadeAniSpeed=20;for(var k=0;k<klibImgOverFadeAry.length;k++){var workId=klibImgOverFadeAry[k];var baseId=klibImgOverFadeBaseAry[k];var fadeType=klibImgOverFadeTypeAry[k];var pngFile=false;if($id(workId).src.indexOf("png")>=0){pngFile=true;}var nowAlpha=$getAlpha(workId);var newAlpha=$numFitRange(nowAlpha+imgFadeAniSpeed,0,100);if(newAlpha<100){$setAlpha(workId,newAlpha);if(fadeType){$setAlpha(baseId,100-newAlpha);}}else{if(bsrType=="ie"&&!newIE&&pngFile){$id(workId).style.visibility="visible";if(fadeType){$id(baseId).style.visibility="hidden";}}else{$setAlpha(workId,100);if(fadeType){$setAlpha(baseId,0);}}var thisPos=$aryFind(klibImgOverFadeAry,workId)[1];klibImgOverFadeAry.splice(thisPos,1);klibImgOverFadeBaseAry.splice(thisPos,1);klibImgOverFadeTypeAry.splice(thisPos,1);}}for(var kk=0;kk<klibImgOutFadeAry.length;kk++){var workId2=klibImgOutFadeAry[kk];var baseId2=klibImgOutFadeBaseAry[kk];var fadeType2=klibImgOutFadeTypeAry[kk];var pngFile2=false;if($id(workId2).src.indexOf("png")>=0){pngFile2=true;}var nowAlpha2=$getAlpha(workId2);var newAlpha2=$numFitRange(nowAlpha2-imgFadeAniSpeed,0,100);if(bsrType=="ie"&&!newIE&&pngFile2){newAlpha2=0;}if(newAlpha2>0){$setAlpha(workId2,newAlpha2);if(fadeType2){$setAlpha(baseId2,100-newAlpha2);}}else{if(bsrType=="ie"&&!newIE&&pngFile2){$id(workId2).style.visibility="hidden";if(fadeType2){$id(baseId2).style.visibility="visible";}}else{$setAlpha(workId2,0);if(fadeType2){$setAlpha(baseId2,100);}}var thisPos2=$aryFind(klibImgOutFadeAry,workId2)[1];klibImgOutFadeAry.splice(thisPos2,1);klibImgOutFadeBaseAry.splice(thisPos2,1);klibImgOutFadeTypeAry.splice(thisPos2,1);}}if(klibImgOverFadeAry.length>=1||klibImgOutFadeAry.length>=1){klibImgFadeTimer=setTimeout($imgFadeAni,40);}}function $imgOverFadePrep(){if(crStr.bool){if(!cellPhone&&!aTablet){var nodeAry=$getWithAttr("onmouseover");if(nodeAry){var tarIdAry=new Array(0);var tarTypeAry=new Array(0);for(var k=0;k<nodeAry.length;k++){var attrStr=$getAttr(nodeAry[k],"onmouseover");if($str(attrStr,"imgOverFade(")||$str(attrStr,"imgOver(")){var checkStr;if($str(attrStr,"imgOverFade(")){checkStr=$strSearchWithGroup(attrStr,"imgOverFade(",")");}else if($str(attrStr,"imgOver(")){checkStr=$strSearchWithGroup(attrStr,"imgOver(",")");}if(checkStr!==""){var attrArguments=checkStr.split(",");var tempId=$strReplaceAll(attrArguments[0],"'","");tempId=$strReplaceAll(tempId,'"','');tarIdAry.push(tempId);if(attrArguments.length==1||!$str(attrArguments[1],"_")){tarTypeAry.push("_on");}else{var tempType=$strReplaceAll(attrArguments[1],"'","");tempType=$strReplaceAll(tempType,'"','');tarTypeAry.push(tempType);}}}}for(k=0;k<tarIdAry.length;k++){var tarImgNode=$id(tarIdAry[k]);if(tarImgNode){var tempSrc=tarImgNode.src;var cacheImg=new Image();cacheImg.src=tempSrc.replace("_off",tarTypeAry[k]);}}}}}}function $imgOver(tarname,newname){if(crStr.bool){if(!cellPhone&&!aTablet){var nowSrc=$id(tarname).src;var src1=nowSrc.substr(0,nowSrc.lastIndexOf("_"));var src2;if(newname){src2=newname;}else{src2="_on";}var src3=nowSrc.substr(nowSrc.lastIndexOf("."));$id(tarname).src=src1+src2+src3;}}}function $imgOut(tarname,newname){if(crStr.bool){if(!cellPhone&&!aTablet){var nowSrc=$id(tarname).src;var src1=nowSrc.substr(0,nowSrc.lastIndexOf("_"));var src2;if(newname){src2=newname;}else{src2="_off";}var src3=nowSrc.substr(nowSrc.lastIndexOf("."));$id(tarname).src=src1+src2+src3;}}}function $imgOverPrep(){$imgOverFadePrep();}function $classOver(tarname,newname){if(crStr.bool){var nowSrc=$getWithClass(tarname)[0].src;var src1=nowSrc.substr(0,nowSrc.lastIndexOf("_"));var src2;if(newname){src2=newname;}else{src2="_on";}var src3=nowSrc.substr(nowSrc.lastIndexOf("."));$getWithClass(tarname)[0].src=src1+src2+src3;}}function $classOut(tarname,newname){if(crStr.bool){var nowSrc=$getWithClass(tarname)[0].src;var src1=nowSrc.substr(0,nowSrc.lastIndexOf("_"));var src2;if(newname){src2=newname;}else{src2="_off";}var src3=nowSrc.substr(nowSrc.lastIndexOf("."));$getWithClass(tarname)[0].src=src1+src2+src3;}}function $imgDataMakeAry(aValue){if(crStr.bool){var tarImg,workImg,workResult;var workStatus=true;if($id(aValue)){tarImg=$id(aValue);workResult=$imgDataMakeCheck(tarImg);if(!workResult){workStatus=false;}}else if($getWithClass(aValue).length>=1){var tarImgAry=$getWithClass(aValue);for(var ii=0;ii<tarImgAry.length;ii++){tarImg=tarImgAry[ii];workResult=$imgDataMakeCheck(tarImg);if(!workResult){workStatus=false;break;}}}if(!workStatus){klibImgDataMakeAryValue=aValue;setTimeout($imgDataMakeAryContinue,50);}}}function $imgDataMakeAryContinue(){$imgDataMakeAry(klibImgDataMakeAryValue);}function $imgDataMakeCheck(tarImg){var relativePath=$relativePath(tarImg.src);if(!$aryFind(klibImgDataMakeAryPath,relativePath)[0]){var workImg=new Image();workImg.src=relativePath;if(workImg.width>=1&&workImg.height>=1){klibImgDataMakeAryPath.push(relativePath);klibImgDataMakeAryWidth.push(workImg.width);klibImgDataMakeAryHeight.push(workImg.height);return true;}else{return false;}}else{return true;}}function $getImgData(aPath,aValue){if(crStr.bool){aPath=$relativePath(aPath);if($aryFind(klibImgDataMakeAryPath,aPath)[0]){var aryNum=$aryFind(klibImgDataMakeAryPath,aPath)[1];if(aValue.toUpperCase().substr(0,1)=="W"){var workW=klibImgDataMakeAryWidth[aryNum];if(aValue.split(":")[1]>0){workW=Math.floor(workW*aValue.split(":")[1]);}return workW;}else if(aValue.toUpperCase().substr(0,1)=="H"){var workH=klibImgDataMakeAryHeight[aryNum];if(aValue.split(":")[1]>0){workH=Math.floor(workH*aValue.split(":")[1]);}return workH;}else{return 0;}}else{return false;}}}function $getRetinaCode(){if(crStr.bool){if(window.devicePixelRatio>=1.5){return "_x2";}else{return "";}}}function $imgRetina(tarObj,disClass){if(crStr.bool){if(window.devicePixelRatio>=1.5){$imgRetinaAct(tarObj,disClass);}}}function $imgRetinaAct(tarObj,disClass){var tempAry,imgRetinaAry,i,ii;if(tarObj=="all"){tempAry=$tag("img");if(disClass){imgRetinaAry=new Array(0);for(i=0;i<tempAry.length;i++){var className=$getClass(tempAry[i]);if(disClass[0].toLowerCase()=="class"&&className.length>=1){var checkFlag=true;for(ii=1;ii<=disClass.length-1;ii++){var checkClassName=disClass[ii];if(className.indexOf(checkClassName)>=0){checkFlag=false;break;}}if(checkFlag){imgRetinaAry.push(tempAry[i]);}}else{if(!className||className.indexOf(disClass)<0){imgRetinaAry.push(tempAry[i]);}}}}else{imgRetinaAry=tempAry;}}else{if(tarObj[0].toLowerCase()=="class"){imgRetinaAry=new Array(0);for(i=1;i<tarObj.length;i++){tempAry=$getWithClass(tarObj[i]);for(ii=0;ii<tempAry.length;ii++){imgRetinaAry.push(tempAry[ii]);}}}else if(tarObj[0].toLowerCase()=="id"){imgRetinaAry=new Array(0);for(i=1;i<tarObj.length;i++){imgRetinaAry.push($id(tarObj[i]));}}}for(i=0;i<imgRetinaAry.length;i++){var originalPath=imgRetinaAry[i].src;var tempPos=originalPath.lastIndexOf("/");var pathTxt=originalPath.substr(0,tempPos);var fileName=originalPath.substr(tempPos+1);var tempTxt=pathTxt.substr(pathTxt.length-3);if(tempTxt!="_x2"){pathTxt=pathTxt+"_x2";imgRetinaAry[i].src=pathTxt+"/"+fileName;}}}function $imgRetinaWithCSS(tarNodeNameAry){if(crStr.bool){if(window.devicePixelRatio>=1.5&&bsrType!="ie"){$imgRetinaWithCSSAct1(tarNodeNameAry);}}}function $imgRetinaWithCSSAct1(tarNodeNameAry){var imgRetinaWithCSSAry=new Array(0);var i,ii;if(tarNodeNameAry[0].toUpperCase()=="ID"){for(i=1;i<tarNodeNameAry.length;i++){var tempNode=$id(tarNodeNameAry[i]);imgRetinaWithCSSAry.push(tempNode);}}else if(tarNodeNameAry[0].toUpperCase()=="CLASS"){for(i=1;i<tarNodeNameAry.length;i++){var tempClassAry=$getWithClass(tarNodeNameAry[i]);for(ii=0;ii<tempClassAry.length;ii++){imgRetinaWithCSSAry.push(tempClassAry[ii]);}}}else if(tarNodeNameAry[0].toUpperCase()=="TAG"){for(i=1;i<tarNodeNameAry.length;i++){var tempTagAry=$tag(tarNodeNameAry[i]);for(ii=0;ii<tempTagAry.length;ii++){imgRetinaWithCSSAry.push(tempTagAry[ii]);}}}if(imgRetinaWithCSSAry.length>=1){$imgRetinaWithCSSAct2(imgRetinaWithCSSAry);}}function $imgRetinaWithCSSAct2(tarNodeAry){for(i=0;i<tarNodeAry.length;i++){var tempImgSrc=$imgGetBgFilePath(tarNodeAry[i]);if(tempImgSrc!="none"){$imgSetBgSize(tarNodeAry[i]);var newImgSrc=tempImgSrc.replace("/images/","/images_x2/");tarNodeAry[i].style.backgroundImage="url("+newImgSrc+")";}}}function $imgGetBgFilePath(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);var filePath=$style(tarNode).backgroundImage;if(filePath!="none"){if(filePath.indexOf("url('")>=0||filePath.indexOf('url("')>=0){filePath=filePath.substr(5,filePath.length-7);}else if(filePath.indexOf("url(")>=0){filePath=filePath.substr(4,filePath.length-5);}return filePath;}else{return "none";}}}function $imgGetBgSize(aNode,useBase){if(crStr.bool){var tarNode=$getTarNode(aNode);var filePath=$imgGetBgFilePath(tarNode);var baseW=0,baseH=0,resultW=0,resultH=0;if(filePath!="none"){var tempImg=new Image();tempImg.src=filePath;baseW=tempImg.width;baseH=tempImg.height;if(useBase||(bsrType=="ie"&&!newIE)){resultW=baseW;resultH=baseH;}else{var cssSize=$style(tarNode).backgroundSize;if(cssSize=="auto"||cssSize=="auto auto"){resultW=baseW;resultH=baseH;}else{var checkPx=$strSearchAll(cssSize,"px");var checkPer=$strSearchAll(cssSize,"%");var checkAuto=$strSearchAll(cssSize,"auto");if(checkAuto.length===0){if((checkPx.length==1&&checkPer.length===0)||(checkPx.length===0&&checkPer.length==1)){cssSize+=" auto";}}checkPx=$strSearchAll(cssSize,"px");checkPer=$strSearchAll(cssSize,"%");checkAuto=$strSearchAll(cssSize,"auto");var sizeW=cssSize.split(" ")[0];var sizeH=cssSize.split(" ")[1];if(checkPx.length==2){resultW=Number(sizeW.split("px")[0]);resultH=Number(sizeH.split("px")[0]);}else if(checkPer.length==2){resultW=Math.round((Number(sizeW.split("%")[0])/100)*tarNode.offsetWidth);resultH=Math.round((Number(sizeH.split("%")[0])/100)*tarNode.offsetHeight);}else if(checkAuto.length==1){if(cssSize.substr(0,4)=="auto"){if(cssSize.indexOf("px")>=0){resultH=Number(sizeH.replace("px",""));}else{var tempNum1=Number(sizeH.replace("%",""))/100;resultH=Math.round(tarNode.offsetHeight*tempNum1);}resultW=Math.round((resultH/baseH)*baseW);}else{if(cssSize.indexOf("px")>=0){resultW=Number(sizeW.replace("px",""));}else{var tempNum2=Number(sizeW.replace("%",""))/100;resultW=Math.round(tarNode.offsetWidth*tempNum2);}resultH=Math.round((resultW/baseW)*baseH);}}else{if(cssSize.indexOf("px")<cssSize.indexOf("%")){resultW=Number(sizeW.replace("px",""));var tempNum3=Number(sizeH.replace("%",""))/100;resultH=Math.round(tarNode.offsetHeight*tempNum3);}else{var tempNum4=Number(sizeW.replace("%",""))/100;resultW=Math.round(tarNode.offsetWidth*tempNum4);resultH=Number(sizeH.replace("px",""));}}}}}return {"W":resultW,"H":resultH};}}function $imgSetBgSize(aNode,overwrite){if(crStr.bool){if(bsrType!="ie"||newIE){var tarNode=$getTarNode(aNode);var filePath=$imgGetBgFilePath(tarNode);if(filePath!="none"){var tempImg=new Image();tempImg.src=filePath;var tempW=tempImg.width;var tempH=tempImg.height;var nowBgSize=$style(tarNode).backgroundSize;if(nowBgSize=="auto"||overwrite){tarNode.style.backgroundSize=tempW+"px "+tempH+"px";return tempW+"px "+tempH+"px";}else{return undefined;}}else{return undefined;}}}}function $loc(checkStr,replaceStr){if(crStr.bool){var tempLoc=document.location.href;if(arguments.length==1){if(tempLoc.indexOf(checkStr)>=0){return true;}else{return false;}}else if(arguments.length==2){if(tempLoc.indexOf(checkStr)>=0){return tempLoc.replace(checkStr,replaceStr);}else{return null;}}else{return tempLoc;}}}function $relativePath(aPath){if(crStr.bool){if(aPath.indexOf("//")<=0){return aPath;}else{var htmlPath=$loc();htmlPath=htmlPath.split("?")[0];var frontPath;if(htmlPath.indexOf(".htm")>=0){if(htmlPath.lastIndexOf(".htm")<htmlPath.lastIndexOf("/")){var htmPos=htmlPath.lastIndexOf(".htm");htmlPath=htmlPath.substr(0,htmPos+4);}var lastPos=htmlPath.lastIndexOf("/");frontPath=htmlPath.substr(0,lastPos)+"/";}else{frontPath=htmlPath;if(frontPath.charAt(frontPath.length-1)!="/"){frontPath+="/";}}var resultPath="";if(aPath.indexOf(frontPath)>=0){resultPath=aPath.replace(frontPath,"");}else{var checkPath=frontPath;var upDirCount=0;var checkEnd=false;do{checkPath=checkPath.substr(0,checkPath.length-1);var parent1SlashPos=checkPath.lastIndexOf("/");var parent2SlashPos=checkPath.lastIndexOf("//");if(parent1SlashPos-1!=parent2SlashPos){upDirCount++;checkPath=checkPath.substr(0,parent1SlashPos+1);if(aPath.indexOf(checkPath)>=0){for(var i=1;i<=upDirCount;i++){resultPath+="../";}resultPath+=aPath.replace(checkPath,"");checkEnd=true;}}else{resultPath=aPath;checkEnd=true;}}while(!checkEnd);}return resultPath;}}}function $getHierarchy(){if(crStr.bool){var tarDir;var testDir="";var returnCode=false;if(arguments.length==1){testDir=arguments[0];}else if(arguments.length==2){if(arguments[1]===true){tarDir=arguments[0];}else{testDir=arguments[0];tarDir=arguments[1];}returnCode=true;}var thisLoc=$loc();if(thisLoc.indexOf("http://")>=0){thisLoc=thisLoc.replace("http://","");}else if(thisLoc.indexOf("file:///")>=0){thisLoc=thisLoc.replace("file:///","");var htmlPos=thisLoc.indexOf("html/");var slashPos=$strLastIndexWithPos(thisLoc,"/",htmlPos);thisLoc=thisLoc.substr(slashPos+1);}if(testDir!==""){var testDirPos=thisLoc.indexOf("/"+testDir+"/");thisLoc=thisLoc.substr(testDirPos+1);}thisLoc=thisLoc.split("?")[0];thisLoc=thisLoc.split("=")[0];thisLoc=thisLoc.split("@")[0];thisLoc=thisLoc.split("#")[0];if(thisLoc.substr(thisLoc.length-1)=="/"){thisLoc=thisLoc.substr(0,thisLoc.length-1);}var hierarchyAry=thisLoc.split("/");if(hierarchyAry.length>=2&&hierarchyAry[hierarchyAry.length-1].indexOf(".")>=0){hierarchyAry.splice(hierarchyAry.length-1,1);}if(!returnCode){return hierarchyAry.length-1;}else{var backNum;if(tarDir===""){backNum=hierarchyAry.length-1;}else{if($aryFind(hierarchyAry,tarDir)[0]){backNum=(hierarchyAry.length-1)-$aryFind(hierarchyAry,tarDir)[1];}else{backNum=-1;}}var backCode="";if(backNum===0){backCode="./";}else if(backNum>=1){for(var i=1;i<=backNum;i++){backCode+="../";}}else{backCode=null;}return backCode;}}}function $setOwnURLID(URLID,scrollable){if(crStr.bool){if(URLID){document.location.href="#/"+URLID;}else{if($loc().indexOf("#")>=0){if(scrollable){var workURL=$loc();if(workURL.indexOf("#")>=0){var sharpPos=workURL.indexOf("#");workURL=workURL.substr(0,sharpPos);}document.location.href=workURL;}else{document.location.href="#";}}}}}function $getOwnURLID(){if(crStr.bool){var idPos=$loc().indexOf("#/");var ownID;if(idPos>=0){ownID=$loc().substr(idPos+2);if(ownID.length===0){ownID=false;}}else{ownID=false;}return ownID;}}function $setIDWithTitle(URLID,newTitle){if(crStr.bool){if(klibDefaultTitle===""){klibDefaultTitle=document.title;}$setOwnURLID(URLID);if(newTitle===''){document.title=klibDefaultTitle;}else{document.title=newTitle;}}}function $goIndex(tarNum){if(crStr.bool){if(tarNum>0){tarNum=9999;}else{tarNum=Math.abs(tarNum);}var newURL;if($loc().indexOf("#")>0){newURL=$loc().substr(0,$loc().indexOf("#"));}else{newURL=$loc();}if(newURL.indexOf("?")>0){newURL=newURL.substr(0,newURL.indexOf("?"));}else{newURL=newURL;}if(newURL.toLowerCase().indexOf(".htm")>0){newURL=newURL.substr(0,newURL.lastIndexOf("/"));}if(newURL.toLowerCase().indexOf(".php")>0){newURL=newURL.substr(0,newURL.lastIndexOf("/"));}if(newURL.toLowerCase().indexOf(".cgi")>0){newURL=newURL.substr(0,newURL.lastIndexOf("/"));}if(newURL.substr(newURL.length-1,1)=="/"){newURL=newURL.substr(0,newURL.length-1);}var fileSystem=newURL.substr(0,newURL.lastIndexOf("//")+2);var dirPath=newURL.substr(newURL.lastIndexOf("//")+2);var dirAry=dirPath.split("/");if(tarNum>dirAry.length-1){tarNum=dirAry.length-1;}newURL=fileSystem;for(k=0;k<dirAry.length-tarNum;k++){newURL+=dirAry[k]+"/";}if($loc().indexOf("http")<0){newURL+="index.html";}document.location.href=newURL;}}function $checkhttp(){if(crStr.bool){var nowType="file:";if($loc("https:")){nowType="https:";}else if($loc("http:")){nowType="http:";}if(nowType=="https:"||nowType=="http:"){var newURL="";var checkAry="";if(arguments.length>=2){checkAry=arguments;}else{checkAry=arguments[0].split(" ");}for(var i=0;i<checkAry.length;i++){if($loc(checkAry[i])){newURL=$loc("http:","https:");break;}}if(newURL===""&&$loc("https:")){newURL=$loc("https:","http:");}if(newURL!==""&&newURL.indexOf(nowType)<0){document.location.href=newURL;}}}}function $writeCookie(cName,cValue,cDue,cLangType){if(crStr.bool){var yDay=new Date();yDay.setSeconds(yDay.getSeconds()-1);yDay=yDay.toGMTString();document.cookie=cName+"=0; expires="+yDay+"; path=/";var xDay=new Date();var dueNum=Number(cDue.substr(0,cDue.length-1));if(cDue.indexOf("m")>=0){xDay.setSeconds(xDay.getSeconds()+(60*dueNum));}else if(cDue.indexOf("d")>=0){xDay.setHours(xDay.getHours()+(24*dueNum));}xDay=xDay.toGMTString();var useValue;if(cLangType=="j"){useValue=escape(cValue);}else{useValue=cValue;}document.cookie=cName+"="+useValue+"; expires="+xDay+"; path=/";}}function $writeCookieDic(cDic,cDue,cLangType){if(crStr.bool){if($dicLength(cDic)>=1){for(var aKey in cDic){$writeCookie(aKey,cDic[aKey],cDue,cLangType);}}}}function $writeCookieAry(cAry,cDue,cLangType){if(crStr.bool){if(cAry.length%2===0){for(var i=0;i<cAry.length/2;i++){var cName=cAry[i*2];var cValue=cAry[(i*2)+1];$writeCookie(cName,cValue,cDue,cLangType);}}}}function $loadCookie(cName,cLangType){if(crStr.bool){var getcookie=document.cookie+";";if(getcookie.indexOf(cName)>=0){var gcName,gcValue,resultValue;do{var gcPos1=getcookie.indexOf("=");var gcPos2=getcookie.indexOf(";");gcName=getcookie.substr(0,gcPos1);gcValue=getcookie.substr(gcPos1+1,gcPos2-gcPos1-1);getcookie=getcookie.substr(gcPos2+2);}while(gcName!=cName);if(cLangType=="j"){resultValue=unescape(gcValue);}else{resultValue=gcValue;}return resultValue;}else{return null;}}}function $findCookie(cString){if(crStr.bool){var fcAry=$cookieToAry();var fcFound=false;for(var i=0;i<fcAry.length/2;i++){var cooName=fcAry[i*2];if(cooName.indexOf(cString)>=0){fcFound=true;break;}}return fcFound;}}function $deleteCookie(cName){if(crStr.bool){$writeCookie(cName,"","-1d");}}function $cookieToDic(cLangType){if(crStr.bool){var getcookie=document.cookie+";";var cookieToDic={};if(getcookie.length>=2){do{var gcPos1=getcookie.indexOf("=");var gcPos2=getcookie.indexOf(";");var gcName=getcookie.substr(0,gcPos1);var gcValue=getcookie.substr(gcPos1+1,gcPos2-gcPos1-1);var resultValue;if(cLangType=="j"){resultValue=unescape(gcValue);}else{resultValue=gcValue;}cookieToDic[gcName]=resultValue;getcookie=getcookie.substr(gcPos2+2);}while(getcookie.length>=2);}return cookieToDic;}}function $cookieToAry(cLangType){if(crStr.bool){var getcookie=document.cookie+";";var cookieToAry=new Array(0);if(getcookie.length>=2){do{var gcPos1=getcookie.indexOf("=");var gcPos2=getcookie.indexOf(";");var gcName=getcookie.substr(0,gcPos1);var gcValue=getcookie.substr(gcPos1+1,gcPos2-gcPos1-1);var resultValue;if(cLangType=="j"){resultValue=unescape(gcValue);}else{resultValue=gcValue;}cookieToAry.push(gcName);cookieToAry.push(resultValue);getcookie=getcookie.substr(gcPos2+2);}while(getcookie.length>=2);}return cookieToAry;}}function $getRSS(tarRSS,feedName){if(crStr.bool){var workRSS=tarRSS;var feedStartStr="<"+feedName;var feedStartAry=$strSearchAll(workRSS,feedStartStr,false);var feedEndtStr="/"+feedName+">";var feedEndAry=$strSearchAll(workRSS,feedEndtStr,false);var feeds=new Array(0);for(var i=0;i<feedStartAry.length;i++){var startPos=feedStartAry[i];var getLength=feedEndAry[i]-feedStartAry[i]+feedEndtStr.length;var aFeed=workRSS.substr(startPos,getLength);feeds.push(aFeed);}return feeds;}}function $getRSSAttr(feedAry,feedNum,aAttr){if(crStr.bool){if(feedNum<feedAry.length){var workFeed=feedAry[feedNum];var attrStartStr="<"+aAttr+">";var attrStartAry=$strSearchAll(workFeed,attrStartStr,false);var attrEndtStr="</"+aAttr+">";var attrEndAry=$strSearchAll(workFeed,attrEndtStr,false);var attrAry=new Array(0);for(var i=0;i<attrStartAry.length;i++){var startPos=attrStartAry[i]+attrStartStr.length;var getLength=attrEndAry[i]-attrStartAry[i]-attrStartStr.length;var getAttr=workFeed.substr(startPos,getLength);getAttr=$strReplaceAll(getAttr,"<![CDATA[","");getAttr=$strReplaceAll(getAttr,"]]>","");attrAry.push(getAttr);}if(attrAry.length>=2){return attrAry.join(",");}else{return attrAry[0];}}else{return null;}}}function $addEL(tarObj,useType,funcName,doFunction){if(crStr.bool){if(bsrType=="ie"&&!newIE){tarObj.attachEvent("on"+useType,funcName);}else{tarObj.addEventListener(useType,funcName,false);}if(doFunction){funcName();}}}function $delEL(tarObj,useType,funcName){if(crStr.bool){if(bsrType=="ie"&&!newIE){tarObj.detachEvent("on"+useType,funcName);}else{tarObj.removeEventListener(useType,funcName,false);}}}function $startMouseMonitor(){if(crStr.bool){klibMouseMonitor=true;document.onmousemove=function(e){if(bsrName.substr(0,2)!="ie"){klibMouseX=e.pageX;klibMouseY=e.pageY;}else{klibMouseX=event.clientX+$getScroll("X");klibMouseY=event.clientY+$getScroll("Y");}};}}function $klibMouseMonitor(){$startMouseMonitor();}function $stopMouseMonitor(){if(crStr.bool){if(klibMouseMonitor){document.onmousemove=null;klibMouseX=-1;klibMouseY=-1;klibMouseMonitor=false;}}}function $cssSprite(aNode,aSpeed){if(crStr.bool){if(bsrName!="ie8"){var tarNode=$getTarNode(aNode);if(!$aryFind(klibCssSpriteAryNode,tarNode)[0]){klibCssSpriteAryNode.push(tarNode);klibCssSpriteArySpeed.push(aSpeed);}else{var itemNum=$aryFind(klibCssSpriteAryNode,tarNode)[1];klibCssSpriteArySpeed[itemNum]=aSpeed;}clearTimeout(klibCssSpriteTimer);klibCssSpriteTimer=setTimeout($cssSpriteAct,40);}}}function $cssSpriteAct(){if(klibCssSpriteAryNode.length>=1){var finishedAry=new Array(0);for(var i=0;i<klibCssSpriteAryNode.length;i++){var useNode=klibCssSpriteAryNode[i];var useSpeed=klibCssSpriteArySpeed[i];var cssSize=$imgGetBgSize(useNode,false);var cssW=cssSize.W;var cssH=cssSize.H;var nodeW=useNode.offsetWidth;var nodeH=useNode.offsetHeight;var moveVector;if(cssW/nodeW>cssH/nodeH){moveVector="H";}else{moveVector="V";}var thisStyle,memoryValue;if(moveVector=="H"){thisStyle=$style(useNode);memoryValue=thisStyle.backgroundPosition.split(" ")[1];var nowLeft=thisStyle.backgroundPosition.split(" ")[0];nowLeft=$unitToNum(nowLeft);var newLeft;if(useSpeed<0){var minLeft=(cssW/2)*-1;newLeft=nowLeft+useSpeed;if(minLeft>=newLeft){finishedAry.push(useNode);}newLeft=Math.max(minLeft,newLeft);}else{var maxLeft=0;newLeft=nowLeft+useSpeed;if(maxLeft<=newLeft){finishedAry.push(useNode);}newLeft=Math.min(maxLeft,newLeft);}useNode.style.backgroundPosition=newLeft+"px "+memoryValue;}else{thisStyle=$style(useNode);memoryValue=thisStyle.backgroundPosition.split(" ")[0];var nowTop=thisStyle.backgroundPosition.split(" ")[1];nowTop=$unitToNum(nowTop);var newTop;if(useSpeed<0){var minTop=(cssH/2)*-1;newTop=nowTop+useSpeed;if(minTop>=newTop){finishedAry.push(useNode);}newTop=Math.max(minTop,newTop);}else{var maxTop=0;newTop=nowTop+useSpeed;if(maxTop<=newTop){finishedAry.push(useNode);}newTop=Math.min(maxTop,newTop);}useNode.style.backgroundPosition=memoryValue+" "+newTop+"px";}}if(finishedAry.length>=1){for(i=0;i<finishedAry.length;i++){var itemNum=$aryFind(klibCssSpriteAryNode,finishedAry[i])[1];klibCssSpriteAryNode.splice(itemNum,1);klibCssSpriteArySpeed.splice(itemNum,1);}}if(klibCssSpriteAryNode.length>=1){setTimeout($cssSpriteAct,40);}}}function $cssSpriteClean(){if(crStr.bool){if(arguments.length!==0){for(var k=0;k<arguments.length;k++){var classAry=$getWithClass(arguments[k]);if(classAry.length>=1){for(var kk=0;kk<classAry.length;kk++){$toHTML(classAry[kk],"");}break;}else{$toHTML(arguments[k],"");}}}else{var aAry=$tag("a");var attributeAry=new Array("onmouseover","onmouseout","onclick","onmousedown","onmouseup","onpress");var targetNodeAry=new Array(0);for(var i=0;i<aAry.length;i++){for(var ii=0;ii<attributeAry.length;ii++){var checkAttribute=$getAttr(aAry[i],attributeAry[ii]);if(checkAttribute){if(checkAttribute.indexOf("$cssSprite")>=0){targetNodeAry.push(aAry[i]);break;}}}}if(targetNodeAry.length>=1){for(var iii=0;iii<targetNodeAry.length;iii++){$toHTML(targetNodeAry[iii],"");}}}}}function $checkedRCB1(){if(crStr.bool){if(arguments.length===0){$checkedRCB1Monitor();}else{var allLabel=$tag("label");for(var k=0;k<allLabel.length;k++){var tarInput=$tag("input",allLabel[k])[0];if(tarInput){if(tarInput.checked){$setClass(allLabel[k],"checked",false,false);}else{$removeClass(allLabel[k],"checked");}}}}}}function $checkedRCB1Monitor(){$checkedRCB1(true);clearTimeout(klibCheckedRCB1Timer);klibCheckedRCB1Timer=setTimeout($checkedRCB1Monitor,100);}function $checkedRCB(){if(arguments.length===0){$checkedRCB1(true);}else{$checkedRCB1();}}function $checkedRCBMonitor(){$checkedRCB1Monitor();}function $checkedRCB2(){if(crStr.bool){if(arguments.length===0){$checkedRCB2Monitor();}else{var allLabel=$tag("label");for(var k=0;k<allLabel.length;k++){var previousNode=allLabel[k].previousSibling;if(bsrName=="ie8"){if(String(previousNode).indexOf("Text")>=0){previousNode=previousNode.previousSibling;}}else{if(previousNode.nodeType==3){previousNode=previousNode.previousSibling;}}if(previousNode&&previousNode.nodeName=="INPUT"){if(previousNode.checked){$setClass(allLabel[k],"checked",false,false);}else{$removeClass(allLabel[k],"checked");}}}}}}function $checkedRCB2Monitor(){$checkedRCB2(true);clearTimeout(klibCheckedRCB2Timer);klibCheckedRCB2Timer=setTimeout($checkedRCB2Monitor,100);}function $mDown(tarObj,tAlpha){if(crStr.bool){if(tAlpha){$setAlpha(tarObj,tAlpha);}else{$setAlpha(tarObj,50);}}}function $mUp(tarObj,tAlpha){if(crStr.bool){if(tAlpha){$setAlpha(tarObj,tAlpha);}else{$setAlpha(tarObj,100);}}}function $ddmovSet(ddtar,ddtype,minnum,maxnum){if(crStr.bool){klibDdmovID=ddtar;klibDdmovType=ddtype;klibDdmovMinNum=minnum;klibDdmovMaxNum=maxnum;$tag("body")[0].onmousemove=$ddmoving;$tag("body")[0].onmouseup=$ddmovOff;klibDdmovMouse1stX=klibMouseX;klibDdmovMouse1stY=klibMouseY;klibDdmovDiv1stX=$id(ddtar).offsetLeft;klibDdmovDiv1stY=$id(ddtar).offsetTop;klibDdmovFlag=true;}}function $ddmoving(){if(klibDdmovFlag){if(bsrName=="firefox"||bsrName=="opera"){window.getSelection().removeAllRanges();}else{event.returnValue=false;}var ddmovMouseNowX=klibMouseX;var ddmovMouseNowY=klibMouseY;if(klibDdmovType.toUpperCase()=="LR"){var tarX=klibDdmovDiv1stX+(ddmovMouseNowX-klibDdmovMouse1stX);if(tarX<klibDdmovMinNum){tarX=klibDdmovMinNum;}else if(tarX>klibDdmovMaxNum){tarX=klibDdmovMaxNum;}$id(klibDdmovID).style.left=tarX+"px";ddmovingLR(tarX,klibDdmovID);}else if(klibDdmovType.toUpperCase()=="TB"){var tarY=klibDdmovDiv1stY+(ddmovMouseNowY-klibDdmovMouse1stY);if(tarY<klibDdmovMinNum){tarY=klibDdmovMinNum;}else if(tarY>klibDdmovMaxNum){tarY=klibDdmovMaxNum;}$id(klibDdmovID).style.top=tarY+"px";ddmovingTB(tarY,klibDdmovID);}}}function $ddmovOff(){klibDdmovFlag=false;if(bsrName!="firefox"||bsrName=="opera"){event.returnValue=true;}}function $clickCircle(sizeSpeed,alphaSpeed,startAlpha,aColor){if(crStr.bool){if(bsrType!="ie"||newIE){var newNode=$createNode("div",0);document.body.appendChild(newNode);var size1st=16;newNode.style.position="absolute";newNode.style.width=size1st+"px";newNode.style.height=size1st+"px";newNode.style.left=klibMouseX-(size1st/2)+"px";newNode.style.top=klibMouseY-(size1st/2)+"px";newNode.style.borderRadius=(size1st/2)+"px";$setAlpha(newNode,startAlpha);var newColor;if(aColor.indexOf("rgba")>=0){newColor=$clrRGBAToHEX(aColor,false);}else if(aColor.indexOf("rgb")>=0){newColor=$clrStyleRGBTo("HEX",aColor);}else{newColor=aColor.replace("#","");}newNode.style.backgroundColor="#"+newColor;klibclickCircleCount++;$setId(newNode,"clickCircle"+klibclickCircleCount,true);var tempDic={};tempDic.id="clickCircle"+klibclickCircleCount;tempDic.size=sizeSpeed;tempDic.alpha=alphaSpeed;klibclickCircleAry.push(tempDic);clearTimeout(klibclickCircleTimer);$clickCircleAct();}}}function $clickCircleAct(){var removeList=new Array(0);for(var i=0;i<klibclickCircleAry.length;i++){var tarName=klibclickCircleAry[i].id;var nowAlpha=$getAlpha(tarName);var newAlpha=$numFitRange(nowAlpha-klibclickCircleAry[i].alpha,0,100);$setAlpha(tarName,newAlpha);if(newAlpha===0){removeList.push(tarName);}var nowL=$id(tarName).offsetLeft;var nowT=$id(tarName).offsetTop;var nowSize=$id(tarName).offsetWidth;var newSize=Math.ceil(nowSize+(2*klibclickCircleAry[i].size));if(newSize%2!==0){newSize++;}$id(tarName).style.left=nowL+((nowSize-newSize)/2)+"px";$id(tarName).style.top=nowT+((nowSize-newSize)/2)+"px";$id(tarName).style.width=newSize+"px";$id(tarName).style.height=newSize+"px";$id(tarName).style.borderRadius=newSize/2+"px";}for(i=removeList.length-1;i>=0;i--){var tempDic=klibclickCircleAry[i];var checkId=tempDic.id;if($aryFind(removeList,checkId)[0]){klibclickCircleAry.splice(i,1);$removeNode($id(checkId));}}if(klibclickCircleAry.length>=1){klibclickCircleTimer=setTimeout($clickCircleAct,40);}}function $getScroll(tarVctr){if(crStr.bool){var obj={};obj.x=document.documentElement.scrollLeft||document.body.scrollLeft;obj.y=document.documentElement.scrollTop||document.body.scrollTop;if(tarVctr.toLowerCase()=="x"){return obj.x;}else if(tarVctr.toLowerCase()=="y"){return obj.y;}}}function $scrToPX(tarPX){if(crStr.bool){if(klibScrToPXStart<0){var maxScrValue=$bodySize("H")-$innerSizeB("H");tarPX=$numFitRange(tarPX,0,maxScrValue);if(tarPX===false){tarPX=Number(0);}var direct=false;var constant=false;if(arguments.length==2){if(arguments[1]===true||arguments[1]===false){direct=arguments[1];}else{constant=arguments[1];}}else if(arguments.length==3){direct=arguments[1];constant=arguments[2];}if(constant===false){if(direct){window.scrollTo(0,tarPX);}else{klibScrToPXStart=$getScroll("Y");klibScrToPXTarPX=tarPX;$scrToPXAct();}}else{$scrConstantSetup(constant,tarPX);}}}}function $scrToPXAct(){if(crStr.bool){klibScrToPXCount++;var newPos=$aniEasing2(klibScrToPXStart,klibScrToPXTarPX,2.5,klibScrToPXCount);if(newPos[0]>=1){window.scrollTo(0,newPos[1]);var scrToPXTimer=setTimeout($scrToPXAct,40);}else{klibScrToPXStart=-9999;klibScrToPXCount=0;}}}function $scrToNode(aNode,scrBack){if(crStr.bool){if(klibScrToNodeStart<0){var tarNode=$getTarNode(aNode);var tarPX=$positionInPage(tarNode,"Y");if(!isNaN(scrBack)){tarPX-=scrBack;}var maxScrValue=$bodySize("H")-$innerSizeB("H");tarPX=$numFitRange(tarPX,0,maxScrValue);if(tarPX===false){tarPX=Number(0);}var direct=false;var constant=false;if(arguments.length==3){if(arguments[2]===true||arguments[2]===false){direct=arguments[2];}else{constant=arguments[2];}}else if(arguments.length==4){direct=arguments[2];constant=arguments[3];}if(constant===false){if(direct){window.scrollTo(0,tarPX);}else{klibScrToNodeStart=$getScroll("Y");klibScrToNodeTarPX=tarPX;$scrToNodeAct();}}else{$scrConstantSetup(constant,tarPX);}}}}function $scrToNodeAct(){if(crStr.bool){klibScrToNodeCount++;var newPos=$aniEasing2(klibScrToNodeStart,klibScrToNodeTarPX,2.5,klibScrToNodeCount);if(newPos[0]>=1){window.scrollTo(0,newPos[1]);var scrToNodeTimer=setTimeout($scrToNodeAct,40);}else{klibScrToNodeStart=-9999;klibScrToNodeCount=0;}}}function $scrToNodeXY(aNode,scrBackX,scrBackY,direct){if(crStr.bool){if(klibScrToNodeXYStartX<0||klibScrToNodeXYStartY<0){var tarNode=$getTarNode(aNode);var tarXonPX=$positionInPage(tarNode,"X");var tarYonPX=$positionInPage(tarNode,"Y");if(!isNaN(scrBackX)){tarXonPX-=scrBackX;}if(!isNaN(scrBackY)){tarYonPX-=scrBackY;}var maxScrValueX=$bodySize("W")-$innerSizeB("W");var maxScrValueY=$bodySize("H")-$innerSizeB("H");tarXonPX=$numFitRange(tarXonPX,0,maxScrValueX);tarYonPX=$numFitRange(tarYonPX,0,maxScrValueY);if(direct){window.scrollTo(tarXonPX,tarYonPX);}else{klibScrToNodeXYStartX=$getScroll("X");klibScrToNodeXYStartY=$getScroll("Y");klibScrToNodeXYTarX=tarXonPX;klibScrToNodeXYTarY=tarYonPX;$scrToNodeXYAct();}}}}function $scrToNodeXYAct(){if(crStr.bool){klibScrToNodeXYCount++;var newPosX=$aniEasing2(klibScrToNodeXYStartX,klibScrToNodeXYTarX,2.5,klibScrToNodeXYCount);var newPosY=$aniEasing2(klibScrToNodeXYStartY,klibScrToNodeXYTarY,2.5,klibScrToNodeXYCount);if(newPosX[0]===0){newPosX[1]=klibScrToNodeXYTarX;}if(newPosY[0]===0){newPosY[1]=klibScrToNodeXYTarY;}if(newPosX[0]>=1||newPosY[0]>=1){window.scrollTo(newPosX[1],newPosY[1]);var scrToNodeXYTimer=setTimeout($scrToNodeXYAct,40);}else{klibScrToNodeXYStartX=-9999;klibScrToNodeXYStartY=-9999;klibScrToNodeXYCount=0;}}}function $scrToURLID(scrollBack){if(crStr.bool){var checkID=$getOwnURLID();if(checkID){if($id(checkID)){if(arguments.length==1){$scrToNode($id(checkID),scrollBack);}else{$scrToNode($id(checkID),0);}}}}}function $scrToPT(){if(crStr.bool){if(klibScrToPTStart<0){var direct=false;var constant=false;if(arguments.length==1){if(arguments[0]===true||arguments[0]===false){direct=arguments[0];}else{constant=arguments[0];}}else if(arguments.length==2){direct=arguments[0];constant=arguments[1];}var tarPX=0;if(constant===false){if(direct){window.scrollTo(0,0);}else{klibScrToPTStart=$getScroll("Y");$scrToPTAct();}}else{$scrConstantSetup(constant,tarPX);}}}}function $scrToPTAct(){if(crStr.bool){klibScrToPTCount++;var newPos=$aniEasing2(klibScrToPTStart,0,2.5,klibScrToPTCount);if(newPos[0]>=1){window.scrollTo(0,newPos[1]);var scrToPTTimer=setTimeout($scrToPTAct,40);}else{klibScrToPTStart=-9999;klibScrToPTCount=0;}}}function $scrConstantSetup(aValue,tarPX){if(crStr.bool){var nowPos=$getScroll("Y");var movePX;if(aValue.indexOf("ms")>=0){var msNum=$unitToNum(aValue);movePX=(tarPX-nowPos)/(msNum/40);}else{if(nowPos<tarPX){movePX=$unitToNum(aValue);}else{movePX=$unitToNum(aValue)*-1;}}klibScrConstantVector=movePX;klibScrConstantTarPX=tarPX;klibScrConstantLastPos=false;$scrConstant();}}function $scrConstant(){if(crStr.bool){if(klibScrConstantLastPos!==false&&$getScroll("Y")!=klibScrConstantLastPos){klibScrConstantVector=false;klibScrConstantTarPX=false;klibScrConstantLastPos=false;}if(klibScrConstantTarPX!==false){var newScrPos=Math.round($getScroll("Y")+klibScrConstantVector);var endScroll=false;if(klibScrConstantVector>0){if(newScrPos>=klibScrConstantTarPX){newScrPos=klibScrConstantTarPX;endScroll=true;}}else{if(newScrPos<=klibScrConstantTarPX){newScrPos=klibScrConstantTarPX;endScroll=true;}}window.scrollTo(0,newScrPos);klibScrConstantLastPos=newScrPos;if(!endScroll){var scrConstantTimer=setTimeout($scrConstant,40);}else{klibScrConstantVector=false;klibScrConstantTarPX=false;klibScrConstantLastPos=false;}}}}function $springToPT(aSpeed){if(crStr.bool){if(!klibSpringToPTMoving){var scrollableNum=$bodySize("H")-$innerSizeB("H");var nowScrY=$getScroll("Y");if(aTablet&&scrollableNum-nowScrY<=80){nowScrY=scrollableNum;}if(scrollableNum==nowScrY){if(bsrType=="ie"&&(!newIE||bsrName=="ie9")){$scrToPT();}else{klibSpringToPTMoving=true;var bodyH=$bodySize("H");if(arguments.length===0){aSpeed=2.8;}if(bsrName=="ie10"){$tag("body")[0].style.msTransformOrigin="0 0";}else{$tag("body")[0].style.transformOrigin="0 0";}$springToPTAct1(aSpeed,bodyH);}}else{$scrToPT();}}}}function $springToPTAct1(aSpeed,bodyH){var bsrH=$innerSizeB("H");var minScale=bsrH/bodyH;minScale*=1.001;klibSpringToPTCount++;var aniAry=$aniEasing2(1*1000,minScale*1000,aSpeed,klibSpringToPTCount);if(aniAry[0]>=1){var useScale=aniAry[1]/1000;if(bsrName=="ie10"){$tag("body")[0].style.msTransform="scaleY("+useScale+")";}else{$tag("body")[0].style.transform="scaleY("+useScale+")";}var useScaledBodyH=Math.floor(bodyH*useScale);$scrToPX(useScaledBodyH-$innerSizeB("H"),true);setTimeout($springToPTAct1,40,aSpeed,bodyH);}else{$scrToPT(true);klibSpringToPTCount=0;setTimeout($springToPTAct2,80,aSpeed,bodyH);}}function $springToPTAct2(aSpeed,bodyH){var bsrH=$innerSizeB("H");var minScale=bsrH/bodyH;minScale*=1.001;klibSpringToPTCount++;var aniAry=$aniEasing2(minScale*1000,1*1000,aSpeed,klibSpringToPTCount);if(aniAry[0]>=1){var useScale=aniAry[1]/1000;if(bsrName=="ie10"){$tag("body")[0].style.msTransform="scaleY("+useScale+")";}else{$tag("body")[0].style.transform="scaleY("+useScale+")";}setTimeout($springToPTAct2,40,aSpeed,bodyH);}else{$tag("body")[0].style.transform="";klibSpringToPTCount=0;klibSpringToPTMoving=false;}}function $visibleInScr(aNode){if(crStr.bool){var tarNode=$getTarNode(aNode);var tarW=tarNode.offsetWidth;var tarH=tarNode.offsetHeight;var tarL=$positionInPage(tarNode,"X");var tarR=tarL+tarW;var tarTop=$positionInPage(tarNode,"Y");var tarBtm=tarTop+tarH;var winW=$innerSizeB("W");var winH=$innerSizeB("H");var scrX=$getScroll("X");var scrY=$getScroll("Y");var resultDic={};resultDic.top=false;resultDic.TOP=false;resultDic.right=false;resultDic.RIGHT=false;resultDic.bottom=false;resultDic.BOTTOM=false;resultDic.left=false;resultDic.LEFT=false;resultDic.all=false;resultDic.ALL=false;resultDic.out=false;resultDic.OUT=false;var viewTop=scrY;var viewBtm=scrY+winH;var viewLeft=scrX;var viewRight=scrX+winW;if(tarTop>=viewTop&&tarTop<=viewBtm&&tarR>=viewLeft&&tarL<=viewRight){resultDic.top=true;resultDic.TOP=true;}if(tarBtm>=viewTop&&tarBtm<=viewBtm&&tarR>=viewLeft&&tarL<=viewRight){resultDic.bottom=true;resultDic.BOTTOM=true;}if(tarL>=viewLeft&&tarL<=viewRight&&tarTop<=viewBtm&&tarBtm>=viewTop){resultDic.left=true;resultDic.LEFT=true;}if(tarR>=viewLeft&&tarR<=viewRight&&tarTop<=viewBtm&&tarBtm>=viewTop){resultDic.right=true;resultDic.RIGHT=true;}if(resultDic.top&&resultDic.bottom&&resultDic.left&&resultDic.right){resultDic.all=true;resultDic.ALL=true;}if(!resultDic.top&&!resultDic.bottom&&!resultDic.left&&!resultDic.right){resultDic.out=true;resultDic.OUT=true;}return resultDic;}}function $stickBars(){if(crStr.bool){if(!klibStickBarsStatus){klibStickBarsStatus=true;klibStickBarsNodes=$getNodes("stickbar");if(klibStickBarsNodes){var barNodes=klibStickBarsNodes;if(arguments.length==1&&arguments[0]===true){klibStickBarsWidth="browser";}for(var k=0;k<barNodes.length;k++){barNodes[k].style.position="fixed";barNodes[k].style.display="block";barNodes[k].style.zIndex=9999+k;var parentTop=$positionInPage(barNodes[k].parentNode,"Y");barNodes[k].style.top=parentTop-$getScroll("Y")+"px";}$addEL(window,'resize',$stickBarsOnresize,true);$addOnscroll($stickBarsAct);}}}}function $stickBarsOnresize(){var barNodes=klibStickBarsNodes;var bodyWidth=Math.max($bodySize("W"),$innerSizeB("W"));for(var k=0;k<barNodes.length;k++){if(klibStickBarsWidth=="browser"){barNodes[k].style.width=bodyWidth+"px";barNodes[k].style.left=$getScroll("X")*-1+"px";}else{barNodes[k].style.width=barNodes[k].parentNode.offsetWidth+"px";barNodes[k].style.left=$positionInPage(barNodes[k].parentNode,"X")-$getScroll("X")+"px";}}}function $stickBarsAct(){var barNodes=klibStickBarsNodes;for(var k=0;k<barNodes.length;k++){var workParent=barNodes[k].parentNode;$stickBarsOnresize();if($visibleInScr(workParent).OUT){barNodes[k].style.display="none";}else if($visibleInScr(workParent).TOP||$visibleInScr(workParent).ALL){barNodes[k].style.display="block";var parentTop=$positionInPage(workParent,"Y");barNodes[k].style.top=parentTop-$getScroll("Y")+"px";}else if(!$visibleInScr(workParent).TOP&&!$visibleInScr(workParent).OUT){barNodes[k].style.display="block";barNodes[k].style.top="0";var btmSpace=$positionInPage(workParent,"Y")+workParent.offsetHeight-$getScroll("Y");if(btmSpace<barNodes[k].offsetHeight){barNodes[k].style.top=btmSpace-barNodes[k].offsetHeight+"px";}}}}function $scrLoadImg(aKey){if(crStr.bool){if(arguments.length===0){if(klibScrLoadImgStatus.IMG===undefined){var useNodeAry=$getWithAttr("scrload-img");for(var i=0;i<useNodeAry.length;i++){klibScrLoadImgNode.push(useNodeAry[i]);klibScrLoadImgValue.push($getAttr(useNodeAry[i],"scrload-img"));klibScrLoadImgFading.push(false);klibScrLoadImgStatus.IMG=0;klibScrLoadImgStatus.BG=0;}if(klibScrLoadImgNode.length>=1){clearTimeout(klibScrLoadImgTimer);$scrLoadImgAct();}}}else{if(aKey.toUpperCase()=="IMG"){return klibScrLoadImgStatus.IMG;}else if(aKey.toUpperCase()=="BG"){return klibScrLoadImgStatus.BG;}else{return null;}}}}function $scrLoadImgAct(){var finishedAry=new Array(0);for(var i=0;i<klibScrLoadImgNode.length;i++){if($visibleInScr(klibScrLoadImgNode[i]).TOP){var useType=klibScrLoadImgValue[i].split(" ")[0];var filePath=klibScrLoadImgValue[i].split(" ")[1];if(filePath.indexOf(".jpg")<0&&filePath.indexOf(".gif")<0){filePath=filePath+".png";}var fadeSpeed=Number(klibScrLoadImgValue[i].split(" ")[2]);var workNode=klibScrLoadImgNode[i];var tarImg;if(useType.toLowerCase()=="img"){if($tag("img",workNode).length===0){code='<img src="'+filePath+'" alt="" />';$toHTML(workNode,code);klibScrLoadImgStatus.IMG++;if(fadeSpeed>=1){klibScrLoadImgFading[i]=true;tarImg=$tag("img",workNode)[0];$setAlpha(tarImg,0);}}else if(fadeSpeed>=1){tarImg=$tag("img",workNode)[0];var nowAlpha=$getAlpha(tarImg);var newAlpha=$numFitRange(nowAlpha+fadeSpeed,0,100);$setAlpha(tarImg,newAlpha);if(newAlpha==100){klibScrLoadImgFading[i]=false;}}}else{workNode.style.backgroundImage="url("+filePath+")";klibScrLoadImgStatus.BG++;}if(!klibScrLoadImgFading[i]){finishedAry.push(workNode);}}}if(finishedAry.length>=1){for(var ii=0;ii<finishedAry.length;ii++){var itemNum=$aryFind(klibScrLoadImgNode,finishedAry[ii])[1];klibScrLoadImgNode.splice(itemNum,1);klibScrLoadImgValue.splice(itemNum,1);klibScrLoadImgFading.splice(itemNum,1);}}if(klibScrLoadImgNode.length>=1){klibScrLoadImgTimer=setTimeout($scrLoadImgAct,40);}}function $scrDoFunc(scrNum,aRange,aFunc,anyTimes){if(crStr.bool){var bodyH=$bodySize("H");var bsrH=$innerSizeB("H");var scrollable=0;if(bodyH>bsrH){scrollable=bodyH-bsrH;}if(isNaN(scrNum)){var perNum=$unitToNum(scrNum);scrNum=Math.round(scrollable*(perNum/100));}var typeCode;if(anyTimes){typeCode="more";}else{typeCode="once";}if(aRange===null){klibScrDoFunc[typeCode+scrNum]=aFunc;}else{klibScrDoFunc[typeCode+scrNum+"_"+aRange]=aFunc;}clearTimeout(klibScrDoFuncTimer);$scrDoFuncAct();}}function $scrDoFuncAct(){var nowScrY=$getScroll("Y");for(var aKey in klibScrDoFunc){var doType=aKey.substr(0,4);var tempScrNum,tempRange;if(aKey.indexOf("_")>=0){tempScrNum=Number(aKey.substr(4).split("_")[0]);tempRange=Number(aKey.substr(4).split("_")[1]);}else{tempScrNum=Number(aKey.substr(4));tempRange=null;}var doFunc=false;if(tempRange!==null){if(nowScrY>=tempScrNum&&nowScrY<=tempScrNum+tempRange){doFunc=true;}}else{if(nowScrY>=tempScrNum){doFunc=true;}}if(doFunc){setTimeout(klibScrDoFunc[aKey],1);if(doType=="once"){$dicDeleteKey(klibScrDoFunc,aKey,true,true);}}}if($dicLength(klibScrDoFunc)>=1){klibScrDoFuncTimer=setTimeout($scrDoFuncAct,50);}}function $parallaxInit(){if(crStr.bool){klibPrlxNodeAry=new Array(0);klibPrlxTypeArys=new Array(0);klibPrlxValueArys=new Array(0);for(var k=0;k<klibTagAry.length;k++){var workAry=$tag(klibTagAry[k]);for(var kk=0;kk<workAry.length;kk++){var workNode=workAry[kk];var customAttrAry1=new Array("w","h");var customAttrAry2=new Array("x-rl","x-lr","x-c","x-l","x-r");var customAttrAry3=new Array("y-tb","y-bt","y-c","y-t","y-b");var customAttrAry4=new Array("rx-ct","rx-t","rx-b");var customAttrAry5=new Array("ry-ct","ry-l","ry-r");var customAttrAry6=new Array("rz-ct","rz-tl","rz-t","rz-tr","rz-l","rz-r","rz-bl","rz-b","rz-br");var customAttrAry7=new Array("a");var customAttrAry8=new Array("c-bg","c-tx");var customAttrAry9=new Array("vi");var customAttrAry10=new Array("br");var customAttrAry;if(bsrName=="ie8"){customAttrAry=$aryConcat(customAttrAry1,customAttrAry2,customAttrAry3,customAttrAry7,customAttrAry8,customAttrAry9);}else if(bsrName=="ie9"){customAttrAry=$aryConcat(customAttrAry1,customAttrAry2,customAttrAry3,customAttrAry6,customAttrAry7,customAttrAry8,customAttrAry9,customAttrAry10);}else{customAttrAry=$aryConcat(customAttrAry1,customAttrAry2,customAttrAry3,customAttrAry4,customAttrAry5,customAttrAry6,customAttrAry7,customAttrAry8,customAttrAry9,customAttrAry10);}for(var ci=0;ci<customAttrAry.length;ci++){var checkAttr="prlx-"+customAttrAry[ci];if($getAttr(workNode,checkAttr)!==null){var workValue=$getAttr(workNode,checkAttr);workValue=$strReplaceAll(workValue,"& ","&");workValue=$strReplaceAll(workValue," &","&");var tempValue=workValue.split("&");if(tempValue.length>=2){for(var ti=1;ti<tempValue.length;ti++){var valueItems=tempValue[ti].split(" ");if(valueItems.length==2){valueItems.unshift(tempValue[ti-1].split(" ")[3]);valueItems.unshift(tempValue[ti-1].split(" ")[2]);var newValue="";for(var tii=0;tii<valueItems.length;tii++){newValue+=valueItems[tii]+" ";}newValue=newValue.substr(0,newValue.length-1);tempValue[ti]=newValue;}}workValue="";for(ti=0;ti<tempValue.length;ti++){workValue+=tempValue[ti]+"&";}workValue=workValue.substr(0,workValue.length-1);}var thisAryNum=-1;if($aryFind(klibPrlxNodeAry,workNode)[0]){thisAryNum=$aryFind(klibPrlxNodeAry,workNode)[1];}else{klibPrlxNodeAry.push(workNode);}if(thisAryNum>=0){var getTypeAry=klibPrlxTypeArys[thisAryNum];getTypeAry.push(checkAttr);klibPrlxTypeArys[thisAryNum]=getTypeAry;var getValueAry=klibPrlxValueArys[thisAryNum];getValueAry.push(workValue);klibPrlxValueArys[thisAryNum]=getValueAry;}else{var newTypeAry=new Array(0);newTypeAry.push(checkAttr);klibPrlxTypeArys.push(newTypeAry);var newValueAry=new Array(0);newValueAry.push(workValue);klibPrlxValueArys.push(newValueAry);}}}}}for(var i=0;i<klibPrlxNodeAry.length;i++){var workTypeAry=klibPrlxTypeArys[i];var workValueAry=klibPrlxValueArys[i];for(var thisType=0;thisType<=1;thisType++){var newAttrAry=new Array(0);var newScrAry=new Array(0);var newValAry=new Array(0);var checkAttrAry;if(thisType===0){checkAttrAry=new Array("prlx-x-rl","prlx-x-lr","prlx-x-c","prlx-x-l","prlx-x-r");}else{checkAttrAry=new Array("prlx-y-tb","prlx-y-bt","prlx-y-c","prlx-y-t","prlx-y-b");}for(var ca=0;ca<checkAttrAry.length;ca++){if($aryFind(workTypeAry,checkAttrAry[ca])[0]){var workAttrName=checkAttrAry[ca];var workAryNum=$aryFind(workTypeAry,checkAttrAry[ca])[1];var thisValue=workValueAry[workAryNum];var thisValueSets=thisValue.split("&");for(var ii=0;ii<thisValueSets.length;ii++){var overwriteNumAry=new Array(0);var thisScr1=thisValueSets[ii].split(" ")[0];var thisScr2=thisValueSets[ii].split(" ")[2];for(var iii=0;iii<newScrAry.length;iii++){var checkScrBase=newScrAry[iii];var checkScr1=Number(checkScrBase.split("to")[0]);var checkScr2=Number(checkScrBase.split("to")[1]);if(!((thisScr1<checkScr1&&thisScr2<=checkScr1)||(thisScr1>=checkScr2&&thisScr2>checkScr2))){overwriteNumAry.push(iii);}}if(overwriteNumAry.length>=1){for(var iv=overwriteNumAry.length-1;iv>=0;iv--){newAttrAry.splice(overwriteNumAry[iv],1);newScrAry.splice(overwriteNumAry[iv],1);newValAry.splice(overwriteNumAry[iv],1);}}newAttrAry.push(workAttrName);newScrAry.push(thisScr1+"to"+thisScr2);newValAry.push(thisValueSets[ii].split(" ")[1]+"to"+thisValueSets[ii].split(" ")[3]);}}}for(var ca2=0;ca2<checkAttrAry.length;ca2++){var workAttrName2=checkAttrAry[ca2];var tempValue2="";for(var ni=0;ni<newAttrAry.length;ni++){if(newAttrAry[ni]==workAttrName2){tempValue2+=newScrAry[ni].split("to")[0]+" ";tempValue2+=newValAry[ni].split("to")[0]+" ";tempValue2+=newScrAry[ni].split("to")[1]+" ";tempValue2+=newValAry[ni].split("to")[1]+"&";}}tempValue2=tempValue2.substr(0,tempValue2.length-1);var findAry=$aryFind(workTypeAry,workAttrName2);if(findAry[0]){if(tempValue2!==""){workValueAry[findAry[1]]=tempValue2;}else{workTypeAry.splice(findAry[1],1);workValueAry.splice(findAry[1],1);}}}klibPrlxTypeArys[i]=workTypeAry;klibPrlxValueArys[i]=workValueAry;}}for(var si=0;si<klibPrlxValueArys.length;si++){var checkValueAry1=klibPrlxValueArys[si];for(var sii=0;sii<checkValueAry1.length;sii++){var checkValueAry2=checkValueAry1[sii].split("&");for(var siii=0;siii<checkValueAry2.length;siii++){var checkValueAry3=checkValueAry2[siii].split(" ");for(var siv=0;siv<checkValueAry3.length;siv++){if(siv%2===0){var checkScrPos=Number(checkValueAry3[siv]);klibPrlxScrMaxH=Math.max(klibPrlxScrMaxH,checkScrPos);}}}}}$parallaxReset();$addOnscroll($parallaxAct);klibPrlxStatus=true;}}function $parallaxReset(){if(crStr.bool){var nowPos=$getScroll("Y");var requireH=klibPrlxScrMaxH+$innerSizeB("H");if(cellPhone){requireH+=300;}else if(aTablet){requireH+=100;}if(!$id("klib-parallax-h")){var newNode=$createNode("div",0);newNode.style.position="absolute";newNode.style.width="1px";newNode.style.visibility="hidden";newNode.id="klib-parallax-h";$insert(newNode,document.body.firstChild,0);}$id("klib-parallax-h").style.height=requireH+"px";$parallaxSet(nowPos);}}function $parallaxAct(){if(crStr.bool){if(klibPrlxStatus){$parallaxSet($getScroll("Y"));}}}function $parallaxSet(nowPos){if(crStr.bool){var bodyNode=$tag("body")[0];for(var wk=0;wk<klibPrlxNodeAry.length;wk++){var workNode=klibPrlxNodeAry[wk];var workTypesAry=$aryCopy(klibPrlxTypeArys[wk]);var workValuesAry=$aryCopy(klibPrlxValueArys[wk]);for(var vii=0;vii<workTypesAry.length;vii++){var workType=workTypesAry[vii];if(workType.indexOf("prlx-w")>=0||workType.indexOf("prlx-h")>=0){var workValue=workValuesAry[vii];var newValue;var workAry0=new Array(0);var workAry1=new Array(0);var posAry=new Array(0);var valueAry=new Array(0);workAry0=workValue.split("&");for(var kk=0;kk<workAry0.length;kk++){var workAry=workAry0[kk].split(" ");for(var kkk=0;kkk<workAry.length;kkk++){workAry1.push(workAry[kkk]);}}if(workAry1.length%2===0){for(var k=0;k<workAry1.length;k++){if(k%2===0){posAry.push(workAry1[k]);}else{var checkValue=workAry1[k];if(workType.indexOf("prlx-w")>=0){if(checkValue.indexOf("px")>=0){checkValue=$unitToNum(checkValue);}else{if(workNode.parentNode==bodyNode){checkValue=$innerSizeB("W")*($unitToNum(checkValue)/100);}else{checkValue=workNode.parentNode.offsetWidth*($unitToNum(checkValue)/100);}}}else if(workType.indexOf("prlx-h")>=0){if(checkValue.indexOf("px")>=0){checkValue=$unitToNum(checkValue);}else{if(workNode.parentNode==bodyNode){checkValue=$innerSizeB("H")*($unitToNum(checkValue)/100);}else{checkValue=workNode.parentNode.offsetHeight*($unitToNum(checkValue)/100);}}}valueAry.push(checkValue);}}}if(posAry.length%2===0){for(var posi=0;posi<=posAry.length;posi++){if(posi===0){if(nowPos<=posAry[0]){newValue=valueAry[0];break;}}else if(posi==posAry.length){if(nowPos>=posAry[posAry.length-1]){newValue=valueAry[valueAry.length-1];break;}}else{if(nowPos>=posAry[posi-1]&&nowPos<=posAry[posi]){var startValue=valueAry[posi-1];var endValue=valueAry[posi];var startPos=posAry[posi-1];var endPos=posAry[posi];var nowScrNum=(nowPos-startPos)/(endPos-startPos);if(nowPos==startPos){newValue=startValue;}else if(nowPos==endPos){newValue=endValue;}else{newValue=startValue+((endValue-startValue)*nowScrNum);}break;}}}if(workType.indexOf("prlx-w")>=0){workNode.style.width=Math.ceil(newValue)+"px";}else if(workType.indexOf("prlx-h")>=0){workNode.style.height=Math.ceil(newValue)+"px";}}}}var newTypeOrder=new Array(0);var newValueOrder=new Array(0);var removeAryOrder=new Array(0);for(var wi=0;wi<workTypesAry.length;wi++){var checkAttrName=workTypesAry[wi];if(checkAttrName.indexOf("prlx-x")>=0){removeAryOrder.push(wi);var checkValue2=workValuesAry[wi];var orderAry1=checkValue2.split("&");for(var wii=0;wii<orderAry1.length;wii++){if(newTypeOrder.length===0){newTypeOrder.push(checkAttrName);newValueOrder.push(orderAry1[wii]);}else{var thisScr1=Number(orderAry1[wii].split(" ")[0]);var flagNum1=-1;for(var wiii=0;wiii<newValueOrder.length;wiii++){var checkScr2=Number(newValueOrder[wiii].split(" ")[2]);if(thisScr1>=checkScr2){flagNum1=wiii;}else{break;}}if(flagNum1<0){newTypeOrder.unshift(checkAttrName);newValueOrder.unshift(orderAry1[wii]);}else{newTypeOrder.splice(wiii,0,checkAttrName);newValueOrder.splice(wiii,0,orderAry1[wii]);}}}}}for(var iw=removeAryOrder.length-1;iw>=0;iw--){workTypesAry.splice(removeAryOrder[iw],1);workValuesAry.splice(removeAryOrder[iw],1);}if(newTypeOrder.length>=1){workTypesAry.push("prlx-x-l");var newValueSets="";for(var w=0;w<newValueOrder.length;w++){var newVScr1=newValueOrder[w].split(" ")[0];var newVScr2=newValueOrder[w].split(" ")[2];var newVData1=newValueOrder[w].split(" ")[1];var newVData2=newValueOrder[w].split(" ")[3];var useVector="W";var useOffset1=0;if(newTypeOrder[w].indexOf("-x-r")>=0){useOffset1=workNode.offsetWidth;}else if(newTypeOrder[w].indexOf("-x-c")>=0){useOffset1=Math.round(workNode.offsetWidth/2);}if(newVData1.indexOf("%")>=0){if(workNode.parentNode==bodyNode){newVData1=($innerSizeB(useVector)*($unitToNum(newVData1)/100))-useOffset1;}else{newVData1=(workNode.parentNode.offsetWidth*($unitToNum(newVData1)/100))-useOffset1;}}else{newVData1=$unitToNum(newVData1)-useOffset1;}var useOffset2=0;if(newTypeOrder[w].charAt(newTypeOrder[w].length-1)=="r"){useOffset2=workNode.offsetWidth;}else if(newTypeOrder[w].indexOf("-x-c")>=0){useOffset2=Math.round(workNode.offsetWidth/2);}if(newVData2.indexOf("%")>=0){if(workNode.parentNode==bodyNode){newVData2=($innerSizeB(useVector)*($unitToNum(newVData2)/100))-useOffset2;}else{newVData2=(workNode.parentNode.offsetWidth*($unitToNum(newVData2)/100))-useOffset2;}}else{newVData2=$unitToNum(newVData2)-useOffset2;}newValueSets+=newVScr1+" "+newVData1+" "+newVScr2+" "+newVData2+"&";}newValueSets=newValueSets.substr(0,newValueSets.length-1);workValuesAry.push(newValueSets);}newTypeOrder=new Array(0);newValueOrder=new Array(0);removeAryOrder=new Array(0);for(var wwi=0;wwi<workTypesAry.length;wwi++){var checkAttrName2=workTypesAry[wwi];if(checkAttrName2.indexOf("prlx-y")>=0){removeAryOrder.push(wwi);var checkValue3=workValuesAry[wwi];var orderAry2=checkValue3.split("&");for(var wwii=0;wwii<orderAry2.length;wwii++){if(newTypeOrder.length===0){newTypeOrder.push(checkAttrName2);newValueOrder.push(orderAry2[wwii]);}else{var thisScr2=Number(orderAry2[wwii].split(" ")[0]);var flagNum2=-1;for(var wwiii=0;wwiii<newValueOrder.length;wwiii++){var checkScr3=Number(newValueOrder[wwiii].split(" ")[2]);if(thisScr2>=checkScr3){flagNum2=wwiii;}else{break;}}if(flagNum2<0){newTypeOrder.unshift(checkAttrName2);newValueOrder.unshift(orderAry2[wwii]);}else{newTypeOrder.splice(wwiii,0,checkAttrName2);newValueOrder.splice(wwiii,0,orderAry2[wwii]);}}}}}for(var ix=removeAryOrder.length-1;ix>=0;ix--){workTypesAry.splice(removeAryOrder[ix],1);workValuesAry.splice(removeAryOrder[ix],1);}if(newTypeOrder.length>=1){workTypesAry.push("prlx-y-t");var newValueSets2="";for(var xxi=0;xxi<newValueOrder.length;xxi++){var newVScr3=newValueOrder[xxi].split(" ")[0];var newVScr4=newValueOrder[xxi].split(" ")[2];var newVData3=newValueOrder[xxi].split(" ")[1];var newVData4=newValueOrder[xxi].split(" ")[3];var useVector2="H";var useOffset3=0;if(newTypeOrder[xxi].indexOf("-y-b")>=0){useOffset3=workNode.offsetHeight;}else if(newTypeOrder[xxi].indexOf("-y-c")>=0){useOffset3=Math.round(workNode.offsetHeight/2);}if(newVData3.indexOf("%")>=0){if(workNode.parentNode==bodyNode){newVData3=($innerSizeB(useVector2)*($unitToNum(newVData3)/100))-useOffset3;}else{newVData3=(workNode.parentNode.offsetHeight*($unitToNum(newVData3)/100))-useOffset3;}}else{newVData3=$unitToNum(newVData3)-useOffset3;}var useOffset4=0;if(newTypeOrder[xxi].charAt(newTypeOrder[xxi].length-1)=="b"){useOffset4=workNode.offsetHeight;}else if(newTypeOrder[xxi].indexOf("-y-c")>=0){useOffset4=Math.round(workNode.offsetHeight/2);}if(newVData4.indexOf("%")>=0){if(workNode.parentNode==bodyNode){newVData4=($innerSizeB(useVector2)*($unitToNum(newVData4)/100))-useOffset4;}else{newVData4=(workNode.parentNode.offsetHeight*($unitToNum(newVData4)/100))-useOffset4;}}else{newVData4=$unitToNum(newVData4)-useOffset4;}newValueSets2+=newVScr3+" "+newVData3+" "+newVScr4+" "+newVData4+"&";}newValueSets2=newValueSets2.substr(0,newValueSets2.length-1);workValuesAry.push(newValueSets2);}for(var zii=0;zii<workTypesAry.length;zii++){var workType2=workTypesAry[zii];if(workType2.indexOf("prlx-w")<0&&workType2.indexOf("prlx-h")<0){var workValue2=workValuesAry[zii];var newValue2;var workAry2=new Array(0);var workAry3=new Array(0);var posAry2=new Array(0);var valueAry2=new Array(0);workAry2=workValue2.split("&");for(var wkk=0;wkk<workAry2.length;wkk++){var workAryX=workAry2[wkk].split(" ");for(var wkkk=0;wkkk<workAryX.length;wkkk++){workAry3.push(workAryX[wkkk]);}}if(workAry3.length%2===0){for(var zk=0;zk<workAry3.length;zk++){if(zk%2===0){posAry2.push(workAry3[zk]);}else{var checkValue4=workAry3[zk];if(workType2.indexOf("prlx-x")>=0){checkValue4=Number(checkValue4);}else if(workType2.indexOf("prlx-y")>=0){checkValue4=Number(checkValue4);}else if(workType2.indexOf("prlx-br")>=0){if(checkValue4.indexOf("%")>=0){var minWH=Math.min(workNode.offsetWidth,workNode.offsetHeight);checkValue4=minWH*($unitToNum(checkValue4)/100);}else{checkValue4=$unitToNum(checkValue4);}}else if(workType2.indexOf("prlx-r")>=0){checkValue4=$unitToNum(checkValue4);}else if(workType2.indexOf("prlx-a")>=0){if(checkValue4.indexOf("%")<0){checkValue4=$numFitRange(checkValue4*100,0,100);}else{checkValue4=$unitToNum(checkValue4);}if(checkValue4===false){checkValue4=0;}}else if(workType2.indexOf("prlx-c")>=0){}else if(workType2.indexOf("prlx-vi")>=0){}valueAry2.push(checkValue4);}}}if(posAry2.length%2===0){for(var posii=0;posii<=posAry2.length;posii++){if(posii===0){if(nowPos<=posAry2[0]){newValue2=valueAry2[0];break;}}else if(posii==posAry2.length){if(nowPos>=posAry2[posAry2.length-1]){newValue2=valueAry2[valueAry2.length-1];break;}}else{if(nowPos>=posAry2[posii-1]&&nowPos<posAry2[posii]){var startValue2=valueAry2[posii-1];var endValue2=valueAry2[posii];var startPos2=posAry2[posii-1];var endPos2=posAry2[posii];var nowScrNum2=(nowPos-startPos2)/(endPos2-startPos2);if(workType2.indexOf("prlx-c")>=0){var clrStep=$numFitRange(endPos2-startPos2,2,9999999);if(nowPos==startPos2){newValue2=startValue2;}else if(nowPos==endPos2){newValue2=endValue2;}else{var clrCount=$numFitRange(nowPos-startPos2,0,clrStep);newValue2=$clrTransition(String(startValue2),String(endValue2),clrStep,clrCount,true);}}else if(workType2.indexOf("prlx-vi")>=0){newValue2=startValue2;}else{if(nowPos==startPos2){newValue2=startValue2;}else if(nowPos==endPos2){newValue2=endValue2;}else{newValue2=startValue2+((endValue2-startValue2)*nowScrNum2);}}break;}}}if(workType2.indexOf("prlx-x")>=0){if(workNode.parentNode==bodyNode){workNode.style.position="fixed";}else{workNode.style.position="absolute";}workNode.style.left=Math.round(newValue2)+"px";}else if(workType2.indexOf("prlx-y")>=0){if(workNode.parentNode==bodyNode){workNode.style.position="fixed";}else{workNode.style.position="absolute";}workNode.style.top=Math.round(newValue2)+"px";}else if(workType2.indexOf("prlx-br")>=0){workNode.style.borderRadius=Math.floor(newValue2)+"px";}else if(workType2.indexOf("prlx-r")>=0){var useOrigin;if(workType2.indexOf("-tl")>=0){useOrigin="top left";}else if(workType2.indexOf("-tr")>=0){useOrigin="top right";}else if(workType2.indexOf("-bl")>=0){useOrigin="bottom left";}else if(workType2.indexOf("-br")>=0){useOrigin="bottom right";}else if(workType2.indexOf("-ct")>=0){useOrigin="center";}else if(workType2.indexOf("-t")>=0){useOrigin="top";}else if(workType2.indexOf("-b")>=0){useOrigin="bottom";}else if(workType2.indexOf("-l")>=0){useOrigin="left";}else if(workType2.indexOf("-r")>=0){useOrigin="right";}workNode.style.transformOrigin=useOrigin;workNode.style.webkitTransformOrigin=useOrigin;workNode.style.MozTransformOrigin=useOrigin;workNode.style.msTransformOrigin=useOrigin;workNode.style.OTransformOrigin=useOrigin;var useVector3;if(workType2.indexOf("-rx")>=0){useVector3="rotateX(";}else if(workType2.indexOf("-ry")>=0){useVector3="rotateY(";}else if(workType2.indexOf("-rz")>=0){useVector3="rotateZ(";if(bsrName=="ie9"){useVector3="rotate(";}}workNode.style.transform=useVector3+newValue2+"deg)";workNode.style.webkitTransform=useVector3+newValue2+"deg)";workNode.style.MozTransform=useVector3+newValue2+"deg)";workNode.style.msTransform=useVector3+newValue2+"deg)";workNode.style.OTransform=useVector3+newValue2+"deg)";}else if(workType2.indexOf("prlx-a")>=0){$setAlpha(workNode,newValue2);}else if(workType2.indexOf("prlx-c")>=0){if(bsrType=="ie"&&!newIE){if(newValue2.indexOf("rgba")>=0){newValue2=$clrRGBAToHEX(newValue2,true);}}if(workType2.indexOf("c-bg")>=0){workNode.style.backgroundColor=newValue2;}else if(workType2.indexOf("c-tx")>=0){workNode.style.color=newValue2;}}else if(workType2.indexOf("prlx-vi")>=0){if(newValue2==1){workNode.style.visibility="visible";}else{workNode.style.visibility="hidden";}}}}}}}}function $parallaxImgInit(){if(crStr.bool){klibPrlxImgNodeAry=new Array(0);klibPrlxImgTypeArys=new Array(0);klibPrlxImgValueArys=new Array(0);klibPrlxImgPathAry=new Array(0);for(var k=0;k<klibTagAry.length;k++){var workAry=$tag(klibTagAry[k]);for(var kk=0;kk<workAry.length;kk++){var workNode=workAry[kk];var customAttrAry=new Array("bi-file","bi-size","bi-pos","bi-rep");for(var ci=0;ci<customAttrAry.length;ci++){var checkAttr="prlx-"+customAttrAry[ci];if($getAttr(workNode,checkAttr)!==null){var workValue=$getAttr(workNode,checkAttr);workValue=$strReplaceAll(workValue,"& ","&");workValue=$strReplaceAll(workValue," &","&");if(checkAttr=="prlx-bi-file"){workValue=$strReplaceAll(workValue,"../","[ParentDir]");}var tempValue=workValue.split("&");if(tempValue.length>=2){for(var ti=1;ti<tempValue.length;ti++){var valueItems=tempValue[ti].split(" ");if(valueItems.length==2){if(checkAttr.indexOf("-rep")<0){valueItems.unshift(tempValue[ti-1].split(" ")[3]);}if(checkAttr.indexOf("-file")>=0){valueItems.unshift(tempValue[ti-1].split(" ")[0]);}else{valueItems.unshift(tempValue[ti-1].split(" ")[2]);}var newValue="";for(var tii=0;tii<valueItems.length;tii++){newValue+=valueItems[tii]+" ";}newValue=newValue.substr(0,newValue.length-1);tempValue[ti]=newValue;}}workValue="";for(ti=0;ti<tempValue.length;ti++){workValue+=tempValue[ti]+"&";}workValue=workValue.substr(0,workValue.length-1);}var thisAryNum=-1;if($aryFind(klibPrlxImgNodeAry,workNode)[0]){thisAryNum=$aryFind(klibPrlxImgNodeAry,workNode)[1];}else{klibPrlxImgNodeAry.push(workNode);}if(thisAryNum>=0){var getTypeAry=klibPrlxImgTypeArys[thisAryNum];getTypeAry.push(checkAttr);klibPrlxImgTypeArys[thisAryNum]=getTypeAry;var getValueAry=klibPrlxImgValueArys[thisAryNum];getValueAry.push(workValue);klibPrlxImgValueArys[thisAryNum]=getValueAry;}else{var newTypeAry=new Array(0);newTypeAry.push(checkAttr);klibPrlxImgTypeArys.push(newTypeAry);var newValueAry=new Array(0);newValueAry.push(workValue);klibPrlxImgValueArys.push(newValueAry);}}}}}for(var i=0;i<klibPrlxImgValueArys.length;i++){var checkValueAry1=klibPrlxImgValueArys[i];for(var ii=0;ii<checkValueAry1.length;ii++){var checkValueAry2=checkValueAry1[ii].split("&");var checkAttrType=klibPrlxImgTypeArys[i][ii];for(var iii=0;iii<checkValueAry2.length;iii++){var checkValueAry3=checkValueAry2[iii].split(" ");var checkH1=0;var checkH2=0;if(checkAttrType.indexOf("-file")>=0){checkH1=checkValueAry3[2];var pathbase1=checkValueAry3[0].split(".")[0];var pathbase2="."+checkValueAry3[0].split(".")[1];if(checkValueAry3[1]!="X"){klibPrlxImgPathAry.push(pathbase1+checkValueAry3[1]+pathbase2);}if(checkValueAry3[3]!="X"){klibPrlxImgPathAry.push(pathbase1+checkValueAry3[3]+pathbase2);}}else if(checkAttrType.indexOf("-size")>=0){checkH1=checkValueAry3[0];checkH2=checkValueAry3[2];}else if(checkAttrType.indexOf("-pos")>=0){checkH1=checkValueAry3[0];checkH2=checkValueAry3[2];}else if(checkAttrType.indexOf("-rep")>=0){checkH1=checkValueAry3[1];}klibPrlxImgScrMaxH=Math.max(klibPrlxImgScrMaxH,Number(checkH1));klibPrlxImgScrMaxH=Math.max(klibPrlxImgScrMaxH,Number(checkH2));var path=$imgGetBgFilePath(klibPrlxImgNodeAry[i]);if(path!="none"){klibPrlxImgPathAry.push(path);}}}}$parallaxImgCache();}}function $parallaxImgCache(){if(crStr.bool){var cacheImg=new Image();var allCached=0;for(var i=0;i<klibPrlxImgPathAry.length;i++){cacheImg.src=$strReplaceAll(klibPrlxImgPathAry[i],"[ParentDir]","../");}for(var ii=0;ii<klibPrlxImgPathAry.length;ii++){cacheImg.src=$strReplaceAll(klibPrlxImgPathAry[ii],"[ParentDir]","../");if(cacheImg.width>0&&cacheImg.height>0){allCached++;}}if(allCached==klibPrlxImgPathAry.length){$parallaxImgReset();$addOnscroll($parallaxImgAct);klibPrlxImgStatus=true;}else{setTimeout($parallaxImgCache,100);}}}function $parallaxImgReset(){if(crStr.bool){var nowPos=$getScroll("Y");var requireH=klibPrlxImgScrMaxH+$innerSizeB("H");if(!$id("klib-parallaximg-h")){var newNode=$createNode("div",0);newNode.style.position="absolute";newNode.style.width="1px";newNode.style.visibility="hidden";newNode.id="klib-parallaximg-h";$insert(newNode,document.body.firstChild,0);}$id("klib-parallaximg-h").style.height=requireH+"px";$parallaxImgSet(nowPos);}}function $parallaxImgAct(){if(crStr.bool){$parallaxImgSet($getScroll("Y"));}}function $parallaxImgSet(nowPos){if(crStr.bool){for(var wk=0;wk<klibPrlxImgNodeAry.length;wk++){var workNode=klibPrlxImgNodeAry[wk];var workTypesAry=$aryCopy(klibPrlxImgTypeArys[wk]);var workValuesAry=$aryCopy(klibPrlxImgValueArys[wk]);for(var vii=0;vii<workTypesAry.length;vii++){var workType=workTypesAry[vii];var workValue=workValuesAry[vii];var newValue;var workAry0=new Array(0);var workAry1=new Array(0);var posAry=new Array(0);var valueAry=new Array(0);workAry0=workValue.split("&");for(var kk=0;kk<workAry0.length;kk++){var workAry=workAry0[kk].split(" ");for(var kkk=0;kkk<workAry.length;kkk++){workAry1.push(workAry[kkk]);}}for(var k=0;k<workAry1.length;k++){if(workType.indexOf("-file")>=0){if(k%4==2){posAry.push(workAry1[k]);}else if(k%4===0){var pathbase1=workAry1[k].split(".")[0];var pathbase2="."+workAry1[k].split(".")[1];if(workAry1[k+1]!="X"){valueAry.push(pathbase1+workAry1[k+1]+pathbase2);}else{valueAry.push("none");}if(workAry1[k+3]!="X"){valueAry.push(pathbase1+workAry1[k+3]+pathbase2);}else{valueAry.push("none");}}}else if(workType.indexOf("-size")>=0){if(k%4===0){posAry.push(workAry1[k]);posAry.push(workAry1[k+2]);}else if(k%4==1){var valueA=workAry1[k].toLowerCase();var valueB=workAry1[k+2].toLowerCase();var startW,startH,endW,endH,baseW,baseH;var path=$imgGetBgFilePath(workNode);var tempImg=new Image();tempImg.src=path;baseW=tempImg.width;baseH=tempImg.height;for(var ab=0;ab<2;ab++){var tempStr,tempNum,tempValue,tempW,tempH;if(ab===0){tempValue=valueA;}else{tempValue=valueB;}var checkAuto=$strSearchAll(tempValue,"auto");var checkPer=$strSearchAll(tempValue,"%");var checkPx=$strSearchAll(tempValue,"px");if(checkAuto.length==2){tempW=baseW;tempH=baseH;}else if(checkPer.length==2){tempW=(Number(tempValue.split("%")[0])/100)*workNode.offsetWidth;tempH=(Number(tempValue.split("%")[1])/100)*workNode.offsetHeight;}else if(checkPx.length==2){tempW=Number(tempValue.split("px")[0]);tempH=Number(tempValue.split("px")[1]);}else if(checkAuto.length==1&&checkPer.length==1){if(tempValue.indexOf("auto")<tempValue.indexOf("%")){tempStr=tempValue.replace("auto","");tempNum=Number(tempStr.substr(0,tempStr.length-1))/100;tempH=Math.round(workNode.offsetHeight*tempNum);tempW=Math.round((tempH/baseH)*baseW);}else{tempNum=Number(tempValue.split("%")[0]/100);tempW=Math.round(workNode.offsetWidth*tempNum);tempH=Math.round((tempW/baseW)*baseH);}}else if(checkAuto.length==1&&checkPx.length==1){if(tempValue.indexOf("auto")<tempValue.indexOf("px")){tempStr=tempValue.replace("auto","");tempH=Number(tempStr.substr(0,tempStr.length-2));tempW=Math.round((tempH/baseH)*baseW);}else{tempW=Number(tempValue.split("px")[0]);tempH=Math.round((tempW/baseW)*baseH);}}else if(checkPer.length==1&&checkPx.length==1){if(tempValue.indexOf("%")<tempValue.indexOf("px")){tempNum=Number(tempValue.split("%")[0]/100);tempW=Math.round(workNode.offsetWidth*tempNum);tempStr=tempValue.replace(tempNum+"%","");tempH=Number(tempStr.replace("px",""));}else{tempW=Number(tempValue.split("px")[0]);tempStr=tempValue.split("px")[1];tempH=Number(tempStr.replace("%",""));}}if(ab===0){startW=tempW;startH=tempH;}else{endW=tempW;endH=tempH;}}valueAry.push(startW+"px"+startH+"px");valueAry.push(endW+"px"+endH+"px");}}else if(workType.indexOf("-pos")>=0){if(k%4===0){posAry.push(workAry1[k]);posAry.push(workAry1[k+2]);}else if(k%4==1){var valueC=workAry1[k].toLowerCase();var valueD=workAry1[k+2].toLowerCase();var nodeStyle=$style(workNode);var nodeInnerW=$getContSize(workNode,"W",true);var nodeInnerH=$getContSize(workNode,"H",true);for(var ab2=0;ab2<2;ab2++){var tempData,tempValue2,tempX,tempY;if(ab2===0){tempValue2=valueC;}else{tempValue2=valueD;}var checkPx2=$strSearchAll(tempValue2,"px");var checkPer2=$strSearchAll(tempValue2,"%");if(checkPx2.length==2){tempX=Number(tempValue2.split("px")[0]);tempY=Number(tempValue2.split("px")[1]);}else if(checkPer2.length==2){tempData=Number(tempValue2.split("%")[0])/100;tempX=Math.round((nodeInnerW-$imgGetBgSize(workNode).W)*tempData);tempData=Number(tempValue2.split("%")[1])/100;tempY=Math.round((nodeInnerH-$imgGetBgSize(workNode).H)*tempData);}else if(tempValue2.indexOf("px")<tempValue2.indexOf("%")){tempX=Number(tempValue2.split("px")[0]);tempData=Number(tempValue2.split("px")[1].replace("%",""))/100;tempY=Math.round((nodeInnerH-$imgGetBgSize(workNode).H)*tempData);}else{tempData=Number(tempValue2.split("%")[0])/100;tempX=Math.round((nodeInnerW-$imgGetBgSize(workNode).W)*tempData);tempY=Number(tempValue2.split("%")[1].replace("px",""));}valueAry.push(tempX+"px"+tempY+"px");}}}else if(workType.indexOf("-rep")>=0){if(k%3==1){posAry.push(workAry1[k]);}else if(k%3===0){valueAry.push(workAry1[k]);valueAry.push(workAry1[k+2]);}}}for(var posi=0;posi<=posAry.length;posi++){if(posi===0){if(nowPos<=posAry[0]){newValue=valueAry[0];break;}}else if(posi==posAry.length){if(nowPos>=posAry[posAry.length-1]){newValue=valueAry[valueAry.length-1];break;}}else{if(nowPos>=posAry[posi-1]&&nowPos<posAry[posi]){if(workType.indexOf("-size")>=0||workType.indexOf("-pos")>=0){var startNum1=Number(valueAry[posi-1].split("px")[0]);var startNum2=Number(valueAry[posi-1].split("px")[1]);var endNum1=Number(valueAry[posi].split("px")[0]);var endNum2=Number(valueAry[posi].split("px")[1]);var startPos=Number(posAry[posi-1]);var endPos=Number(posAry[posi]);var nowScrNum=(nowPos-startPos)/(endPos-startPos);if(nowPos==startPos){newValue=startNum1+"px"+startNum2+"px";}else if(nowPos==endPos){newValue=endNum1+"px"+endNum2+"px";}else{var tempNum1=startNum1+((endNum1-startNum1)*nowScrNum);var tempNum2=startNum2+((endNum2-startNum2)*nowScrNum);newValue=Math.round(tempNum1)+"px"+Math.round(tempNum2)+"px";}}else{newValue=valueAry[posi*2];}break;}}}if(workType.indexOf("-file")>=0){var oldValue=$imgGetBgFilePath(workNode);if(newValue!="none"){if(oldValue.indexOf(newValue)<0){newValue=$strReplaceAll(newValue,"[ParentDir]","../");workNode.style.backgroundImage="url("+newValue+")";}}else{workNode.style.backgroundImage="none";}}else if(workType.indexOf("-size")>=0){workNode.style.backgroundSize=newValue.split("px")[0]+"px "+newValue.split("px")[1]+"px";}else if(workType.indexOf("-pos")>=0){workNode.style.backgroundPosition=newValue.split("px")[0]+"px "+newValue.split("px")[1]+"px";}else if(workType.indexOf("-rep")>=0){var useRepeat;switch(newValue.toUpperCase()){case "N":useRepeat="no-repeat";break;case "X":useRepeat="repeat-x";break;case "Y":useRepeat="repeat-y";break;default:useRepeat="repeat";}workNode.style.backgroundRepeat=useRepeat;}}}}}function $setPrlxAttr(aNode,aAttribute,aValue,overwrite,reInit){if(crStr.bool){var tarNode=$getTarNode(aNode);var tarAttribute="prlx-"+aAttribute;var removed=false;var doInit=false;if(arguments.length==4){reInit=true;}if(tarNode.hasAttribute(tarAttribute)){if(aValue===""){tarNode.removeAttribute(tarAttribute);doInit=true;removed=true;}else{if(overwrite){tarNode.setAttribute(tarAttribute,aValue);doInit=true;}}}else{if(tarAttribute!=="prlx-"&&aValue!==""){tarNode.setAttribute(tarAttribute,aValue);doInit=true;}}if(removed){reInit=true;if(tarAttribute.indexOf("prlx-x")>=0){$resetCSS(tarNode,"left");var checkPrlxYAry=new Array("prlx-y-tb","prlx-y-bt","prlx-y-c","prlx-y-t","prlx-y-b");var hasPrlxY=false;for(var i=0;i<checkPrlxYAry.length;i++){if(tarNode.hasAttribute(checkPrlxYAry[i])){hasPrlxY=true;break;}}if(!hasPrlxY){$resetCSS(tarNode,"position");}}else if(tarAttribute.indexOf("prlx-y")>=0){$resetCSS(tarNode,"top");var checkPrlxXAry=new Array("prlx-x-rl","prlx-x-lr","prlx-x-c","prlx-x-l","prlx-x-r");var hasPrlxX=false;for(var ii=0;ii<checkPrlxXAry.length;ii++){if(tarNode.hasAttribute(checkPrlxXAry[ii])){hasPrlxX=true;break;}}if(!hasPrlxX){$resetCSS(tarNode,"position");}}else if(tarAttribute.indexOf("prlx-w")>=0){$resetCSS(tarNode,"width");}else if(tarAttribute.indexOf("prlx-h")>=0){$resetCSS(tarNode,"height");}else if(tarAttribute.indexOf("prlx-br")>=0){$resetCSS(tarNode,"borderRadius");}else if(tarAttribute.indexOf("prlx-r")>=0){$resetCSS(tarNode,"transform");$resetCSS(tarNode,"webkitTransform");$resetCSS(tarNode,"MozTransform");$resetCSS(tarNode,"msTransform");$resetCSS(tarNode,"OTransform");}else if(tarAttribute.indexOf("prlx-a")>=0){$resetCSS(tarNode,"opacity");if(bsrType=="ie"&&!newIE){$resetCSS(tarNode,"filter");}}else if(tarAttribute.indexOf("prlx-c-bg")>=0){$resetCSS(tarNode,"backgroundColor");}else if(tarAttribute.indexOf("prlx-c-tx")>=0){$resetCSS(tarNode,"color");}else if(tarAttribute.indexOf("prlx-vi")>=0){$resetCSS(tarNode,"visibility");}if(tarAttribute.indexOf("bi-file")>=0){$resetCSS(tarNode,"backgroundImage");}else if(tarAttribute.indexOf("bi-size")>=0){$resetCSS(tarNode,"backgroundSize");}else if(tarAttribute.indexOf("bi-pos")>=0){$resetCSS(tarNode,"backgroundPosition");}else if(tarAttribute.indexOf("bi-rep")>=0){$resetCSS(tarNode,"backgroundRepeat");}}if(reInit&&doInit){if(aAttribute.indexOf("bi-")>=0){$parallaxImgInit();}else{$parallaxInit();}}}}function $scrPrlx(tarPX,aSpeed,warpPositions){if(crStr.bool){var nowPos=$getScroll("Y");var movePX;if(aSpeed.indexOf("ms")>=0){var msNum=$unitToNum(aSpeed);movePX=(tarPX-nowPos)/(msNum/40);}else{if(nowPos<tarPX){movePX=$unitToNum(aSpeed);}else{movePX=$unitToNum(aSpeed)*-1;}}if(warpPositions){klibScrPrlxWarpPos=$strReplaceAll(warpPositions," &","&");klibScrPrlxWarpPos=$strReplaceAll(klibScrPrlxWarpPos,"& ","&");}klibScrPrlxVector=movePX;klibScrPrlxTarPX=tarPX;klibScrPrlxLastPos=false;$scrPrlxAct();}}function $scrPrlxAct(){if(crStr.bool){if(klibScrPrlxLastPos!==false&&$getScroll("Y")!=klibScrPrlxLastPos){klibScrPrlxVector=false;klibScrPrlxTarPX=false;klibScrPrlxLastPos=false;klibScrPrlxWarpPos=false;}if(klibScrPrlxTarPX!==false){var newScrPos=Math.round($getScroll("Y")+klibScrPrlxVector);var endScroll=false;if(klibScrPrlxVector>0){if(newScrPos>=klibScrPrlxTarPX){newScrPos=klibScrPrlxTarPX;endScroll=true;}}else{if(newScrPos<=klibScrPrlxTarPX){newScrPos=klibScrPrlxTarPX;endScroll=true;}}if(klibScrPrlxWarpPos!==false){var warpAry=klibScrPrlxWarpPos.split("&");for(var k=0;k<warpAry.length;k++){var warpPos1=Number(warpAry[k].split(" ")[0]);var warpPos2=Number(warpAry[k].split(" ")[1]);var warpStart=Math.min(warpPos1,warpPos2);var warpEnd=Math.max(warpPos1,warpPos2);if(newScrPos>=warpStart&&newScrPos<=warpEnd){if(klibScrPrlxVector>0){newScrPos=warpEnd;}else{newScrPos=warpStart;}}}}window.scrollTo(0,newScrPos);klibScrPrlxLastPos=newScrPos;if(!endScroll){var scrPrlxTimer=setTimeout($scrPrlxAct,40);}else{klibScrPrlxVector=false;klibScrPrlxTarPX=false;klibScrPrlxLastPos=false;klibScrPrlxWarpPos=false;}}}}function $aniEasing1(aStart,aEnd,aSpeed,aCount){if(crStr.bool){var aniEasingAry=new Array(0);var aDistance=aEnd-aStart;var endCount=aSpeed*Math.PI;if(aCount<=endCount){var easingNum=Math.round(Math.cos(aCount/aSpeed)*(aDistance/2))+(aDistance/2);easingNum=aDistance-easingNum;if(aCount!=Math.ceil(endCount/2)){aniEasingAry[0]=1;}else{aniEasingAry[0]=2;}aniEasingAry[1]=aStart+easingNum;}else{aniEasingAry[0]=0;aniEasingAry[1]=0;}return aniEasingAry;}}function $aniEasing2(aStart,aEnd,aSpeed,aCount){if(crStr.bool){var aniEasingAry=new Array(0);var aniMoveAry=new Array(0);var aDistance=aEnd-aStart;var aeVectr;if(aDistance>=0){aeVectr=1;}else{aeVectr=-1;}var aeTotalMove=0;var aeCenterCount=0;var aeiReachCenter=false;var aei=0;do{var aeTempMove=Math.ceil(Math.pow(aSpeed,aei))*aeVectr;aniMoveAry.push(aeTempMove);aeTotalMove+=aeTempMove;if(Math.abs(aDistance/2)<Math.abs(aeTotalMove)){aeCenterCount=aei;aeiReachCenter=true;}aei++;}while(!aeiReachCenter);var aeToCenter=$arySumItems(aniMoveAry,0,aniMoveAry.length-1);aniMoveAry[aniMoveAry.length-1]=aDistance-(aeToCenter*2);for(aei=0;aei<=aeCenterCount-1;aei++){aniMoveAry[aeCenterCount+1+aei]=aniMoveAry[aeCenterCount-1-aei];}if(aCount<aniMoveAry.length){var aeResultNum=$arySumItems(aniMoveAry,0,aCount+1);if(aCount!=aeCenterCount){aniEasingAry[0]=1;}else{aniEasingAry[0]=2;}aniEasingAry[1]=aStart+aeResultNum;}else{aniEasingAry[0]=0;aniEasingAry[1]=0;}return aniEasingAry;}}function $aniEaseInOut(moveType,aStart,aEnd,aSpeed,aCount){if(crStr.bool){var aniEaseInOutAry=new Array(0);var aniMoveAry=new Array(0);var aDistance=aEnd-aStart;var aeVectr;if(aDistance>=0){aeVectr=1;}else{aeVectr=-1;}var aeTotalMove=0;var aeEndCount=0;var aei=0;do{var aeTempMove=Math.ceil(Math.pow(aSpeed,aei))*aeVectr;aniMoveAry.push(aeTempMove);aeTotalMove+=aeTempMove;if(Math.abs(aDistance)<Math.abs(aeTotalMove)){aeEndCount=aei;}aei++;}while(aeEndCount===0);var aeBeforeEnd=$arySumItems(aniMoveAry,0,aniMoveAry.length-1);aniMoveAry[aniMoveAry.length-2]=aniMoveAry[aniMoveAry.length-2]+(aDistance-aeBeforeEnd);aniMoveAry.length=aniMoveAry.length-1;if(moveType.toLowerCase()=="out"){aniMoveAry=aniMoveAry.reverse();}if(aCount<aniMoveAry.length){var aeResultNum=$arySumItems(aniMoveAry,0,aCount+1);aniEaseInOutAry[0]=1;aniEaseInOutAry[1]=aStart+aeResultNum;}else{aniEaseInOutAry[0]=0;aniEaseInOutAry[1]=0;}return aniEaseInOutAry;}}function $aniColor(aNode,tarItem,tarColor,touchable){if(crStr.bool){if(arguments.length==3){touchable=false;}var usable=true;if(!touchable&&(aTablet||cellPhone)){usable=false;}if(usable){var tarNode=$getTarNode(aNode);tarItem=$strReplaceAll(tarItem,"tx","color");tarItem=$strReplaceAll(tarItem,"bg","backgroundColor");tarItem=$strReplaceAll(tarItem,"bc","borderColor");tarItem=$strReplaceAll(tarItem,"bt","borderTopColor");tarItem=$strReplaceAll(tarItem,"br","borderRightColor");tarItem=$strReplaceAll(tarItem,"bl","borderLeftColor");tarItem=$strReplaceAll(tarItem,"bb","borderBottomColor");if(tarNode){var registedNum=-1;if($aryFind(klibAniColorNode,tarNode)[0]){var aryNums=$aryFind(klibAniColorNode,tarNode);for(var i=0;i<aryNums.length;i++){if(klibAniColorPart[aryNums[i]]==tarItem){registedNum=aryNums[i];break;}}}var baseColor;if(bsrName=="firefox"&&tarItem.split(" ")[0]=="borderColor"){baseColor=$getColor(tarNode,"borderTopColor");}else{baseColor=$getColor(tarNode,tarItem.split(" ")[0]);}tarColor=$strReplaceAll(tarColor," ","");if(registedNum<0){klibAniColorNode.push(tarNode);klibAniColorPart.push(tarItem);klibAniColorClrs.push(baseColor+" "+tarColor);klibAniColorStep.push(0);}else{klibAniColorClrs[registedNum]=baseColor+" "+tarColor;klibAniColorStep[registedNum]=0;}clearTimeout(klibAniColorTimer);$aniColorAct();}}}}function $aniColorAct(){var removable=new Array(0);for(var i=0;i<klibAniColorNode.length;i++){var workNode=klibAniColorNode[i];var newStep=Number(klibAniColorStep[i])+1;var color1=klibAniColorClrs[i].split(" ")[0];var color2=klibAniColorClrs[i].split(" ")[1];var newColor;if(newStep<8){newColor=$clrTransition(color1,color2,8,newStep,true);klibAniColorStep[i]=newStep;}else{newColor=$clrTransition(color2,color2,2,1,true);removable.push(i);}var workPart=klibAniColorPart[i].split(" ");for(var ii=0;ii<workPart.length;ii++){workNode.style[workPart[ii]]=newColor;}}for(i=removable.length-1;i>=0;i--){klibAniColorNode.splice(i,1);klibAniColorPart.splice(i,1);klibAniColorClrs.splice(i,1);klibAniColorStep.splice(i,1);}if(klibAniColorNode.length>=1){klibAniColorTimer=setTimeout($aniColorAct,35);}}function $aniDelayFade(aClass,aSpeed,aDelay){if(crStr.bool){if(!$aryFind(klibAniDelayFadeAry,aClass)[0]){klibAniDelayFadeAry.push(aClass);klibAniDelayFadeValue.push(aSpeed+"_"+aDelay+"_0");clearTimeout(klibAniDelayFadeTimer);klibAniDelayFadeTimer=setTimeout($aniDelayFadeAct,40);}}}function $aniDelayFadeAct(){var setTimeoutDelay=40;var removableAry=new Array(0);for(var i=0;i<klibAniDelayFadeAry.length;i++){var useClassName=klibAniDelayFadeAry[i];var useClassAry=$getWithClass(useClassName);var useSpeed=Number(klibAniDelayFadeValue[i].split("_")[0]);var baseDelay=Number(klibAniDelayFadeValue[i].split("_")[1]);var nowCount=Number(klibAniDelayFadeValue[i].split("_")[2]);var useDelay=baseDelay;if(baseDelay<0){useClassAry=useClassAry.reverse();useDelay=Math.abs(baseDelay);}var nodeRange=Math.floor((nowCount*setTimeoutDelay)/useDelay);nodeRange=$numFitRange(nodeRange,0,useClassAry.length-1);var finished=0;for(var ii=0;ii<=nodeRange;ii++){var nowAlpha=$getAlpha(useClassAry[ii]);var newAlpha=$numFitRange(nowAlpha+useSpeed,0,100);$setAlpha(useClassAry[ii],newAlpha);if(newAlpha===100||newAlpha===0){finished++;}}if(finished==useClassAry.length){removableAry.push(useClassName);}else{nowCount++;klibAniDelayFadeValue[i]=useSpeed+"_"+baseDelay+"_"+nowCount;}}if(removableAry.length>=1){for(var iii=0;iii<removableAry.length;iii++){var itemNum=$aryFind(klibAniDelayFadeAry,removableAry[iii])[1];klibAniDelayFadeAry.splice(itemNum,1);klibAniDelayFadeValue.splice(itemNum,1);}}if(klibAniDelayFadeAry.length>=1){klibAniDelayFadeTimer=setTimeout($aniDelayFadeAct,setTimeoutDelay);}}function $aniCircle(aNode,tarSize,tarSpeed){if(crStr.bool){var tarNode=$getTarNode(aNode);var tarId=tarNode.id;if(!tarId){var newId,checkFlag;do{checkFlag=false;newId="anicircleimg-byjsid-"+Math.ceil(Math.random()*9999);if($dicFindKey(klibAniCircleDic,newId,true,true,true).FOUND===0){$setId(tarNode,newId,true);tarId=newId;checkFlag=true;}}while(!checkFlag);}var cngBorderRadius=true;if(arguments.length==4){cngBorderRadius=arguments[3];}if($dicFindKey(klibAniCircleDic,tarId,true,true,true).FOUND===0){var itemAry=new Array(0);itemAry.push(tarNode.offsetWidth);itemAry.push(tarNode.offsetTop);itemAry.push(tarNode.offsetLeft);itemAry.push(tarSize);itemAry.push(tarSpeed);itemAry.push(cngBorderRadius);klibAniCircleDic[tarId]=itemAry;}else{var editItemAry=klibAniCircleDic[tarId];editItemAry[0]=tarNode.offsetWidth;editItemAry[1]=tarNode.offsetTop;editItemAry[2]=tarNode.offsetLeft;editItemAry[3]=tarSize;editItemAry[4]=tarSpeed;editItemAry[5]=cngBorderRadius;klibAniCircleDic[tarId]=editItemAry;}if(!klibAniCircleMoving){klibAniCircleMoving=true;$aniCircleAct();}}}function $aniCircleAct(){if($dicLength(klibAniCircleDic)>=1){var deletableIdAry=new Array(0);for(var key in klibAniCircleDic){var tarItemAry=klibAniCircleDic[key];var nowSize=$id(key).offsetWidth;var newSize,offsetSize;if(tarItemAry[0]<tarItemAry[3]){newSize=Math.ceil($id(key).offsetWidth+(tarItemAry[4]*2));newSize=$numFitRange(newSize,tarItemAry[0],tarItemAry[3]);if(newSize>=tarItemAry[3]){deletableIdAry.push(key);}if(newSize%2!==0){newSize-=1;}offsetSize=Math.round(tarItemAry[0]-newSize)/2;}else{newSize=Math.floor($id(key).offsetWidth-(tarItemAry[4]*2));newSize=$numFitRange(newSize,tarItemAry[3],tarItemAry[0]);if(newSize<=tarItemAry[3]){deletableIdAry.push(key);}if(newSize%2!==0){newSize+=1;}offsetSize=Math.round(tarItemAry[0]-newSize)/2;}$id(key).style.width=newSize+"px";$id(key).style.height=newSize+"px";$id(key).style.top=tarItemAry[1]+offsetSize+"px";$id(key).style.left=tarItemAry[2]+offsetSize+"px";if(tarItemAry[5]){$id(key).style.borderRadius=(newSize/2)+"px";}}if(deletableIdAry.length>=1){for(var di=0;di<deletableIdAry.length;di++){$dicDeleteKey(klibAniCircleDic,deletableIdAry[di],true,true);}}if($dicLength(klibAniCircleDic)>=1){setTimeout($aniCircleAct,40);}else{klibAniCircleMoving=false;}}}function $aniPendulum(aNode,baseAngle,aRange,aSpeed,firstAngle){if(crStr.bool){if(bsrType!="ie"||newIE){var tarNode=$getTarNode(aNode);if(!$aryFind(klibAniPendulumNode,tarNode)[0]){klibAniPendulumNode.push(tarNode);if(arguments.length==4){firstAngle=0;}var aValue="";aValue+=baseAngle+"_"+aRange+"_"+aSpeed;klibAniPendulumValue.push(aValue);var checkDic=$mathCountForAngle(aRange,aSpeed,firstAngle);klibAniPendulumCount.push(checkDic.count);var angle1st=Number(baseAngle)+Number(checkDic.angle)+"deg";if(bsrType=="ie"){tarNode.style.msTransform="rotate("+angle1st+")";}else{tarNode.style.transform="rotate("+angle1st+")";}klibAniPendulumPause.push(true);clearTimeout(klibAniPendulumTimer);klibAniPendulumTimer=setTimeout($aniPendulumAct,40);}}}}function $aniPendulumAct(){for(var i=0;i<klibAniPendulumNode.length;i++){if(klibAniPendulumPause[i]){var tarNode=klibAniPendulumNode[i];var useBaseAngle=Number(klibAniPendulumValue[i].split("_")[0]);var useRange=Number(klibAniPendulumValue[i].split("_")[1]);var useSpeed=Number(klibAniPendulumValue[i].split("_")[2]);var nowCount=klibAniPendulumCount[i];var aStep=useSpeed/20;var newAngle=Math.round(Math.sin(aStep*nowCount)*useRange);newAngle+=useBaseAngle;if(bsrType=="ie"){tarNode.style.msTransform="rotate("+newAngle+"deg)";}else{tarNode.style.transform="rotate("+newAngle+"deg)";}nowCount++;klibAniPendulumCount[i]=nowCount;}}klibAniPendulumTimer=setTimeout($aniPendulumAct,40);}function $mathCountForAngle(aRange,aSpeed,firstAngle){var aStep=aSpeed/20;var angleAry=new Array(0);for(var i=0;i<200;i++){var tempAngle=Math.round(Math.sin(aStep*i)*aRange);angleAry.push(tempAngle);}var checkAry=new Array(0);for(i=0;i<angleAry.length;i++){var checkAngle=angleAry[i];var checkResult=Math.abs(firstAngle-checkAngle);checkAry.push(checkResult);}var resultDic={};resultDic.count=$aryMinItem(checkAry,false);resultDic.angle=angleAry[$aryMinItem(checkAry,false)];return resultDic;}function $pausePendulum(aNode){var tarNode=$getTarNode(aNode);var tarItemNum=$aryFind(klibAniPendulumNode,tarNode)[1];if(tarItemNum>=0){klibAniPendulumPause[tarItemNum]=false;}}function $resumePendulum(aNode){var tarNode=$getTarNode(aNode);var tarItemNum=$aryFind(klibAniPendulumNode,tarNode)[1];if(tarItemNum>=0){klibAniPendulumPause[tarItemNum]=true;}}function $aniFadeSW(aNode,aSpeed){if(crStr.bool){var tarNode=$getTarNode(aNode);var exist=false;if(tarNode){for(var i in klibAniFadeSWSettings){var tempSet=klibAniFadeSWSettings[i];if(tempSet.NODE==tarNode){exist=true;break;}}if(!exist){var newSet={};newSet.NODE=tarNode;newSet.SPEED=aSpeed;newSet.TARNUM=-1;if(arguments.length==3){newSet.TARNUM=arguments[2];}newSet.COUNT=0;newSet.BORDERCOUNT=Math.ceil(100/aSpeed);klibAniFadeSWSettings.push(newSet);if(underIE8){var tempChildNodes=newSet.NODE.childNodes;for(var ii in tempChildNodes){if(tempChildNodes[ii].nodeType==1){tempChildNodes[ii].style.filter="inherit";}}}clearTimeout(klibAniFadeSWTimer);klibAniFadeSWTimer=setTimeout($klibAniFadeSWAct,40);}}}}function $klibAniFadeSWAct(){var finishedAry=new Array(0);for(var i in klibAniFadeSWSettings){var tempSet=klibAniFadeSWSettings[i];var newCount=tempSet.COUNT+1;var useAlpha;if(newCount<tempSet.BORDERCOUNT){useAlpha=100-(tempSet.SPEED*newCount);}else if(newCount==tempSet.BORDERCOUNT){useAlpha=0;}else{useAlpha=tempSet.SPEED*(newCount-tempSet.BORDERCOUNT);}useAlpha=$numFitRange(useAlpha,0,100);if(newCount==tempSet.BORDERCOUNT){$setAlpha(tempSet.NODE,0);var tempChildNodes=tempSet.NODE.childNodes;var itemChildNodes=new Array(0);for(var k in tempChildNodes){if(tempChildNodes[k].nodeType==1){itemChildNodes.push(tempChildNodes[k]);}}var nowDisplayNum=-1;var tempStyle;for(k in itemChildNodes){tempStyle=$style(itemChildNodes[k]);if(tempStyle.display=="block"){nowDisplayNum=Number(k);$setClass(itemChildNodes[k],"sw-now",true,false);}}var nextDisplayNum;if(tempSet.TARNUM<0){nextDisplayNum=$numNext(0,itemChildNodes.length,nowDisplayNum);}else{nextDisplayNum=tempSet.TARNUM;}for(k in itemChildNodes){tempStyle=$style(itemChildNodes[k]);if(k==nextDisplayNum){itemChildNodes[k].style.display="block";$setClass(itemChildNodes[k],"sw-now",false,false);}else{itemChildNodes[k].style.display="none";}}}else if(newCount!=tempSet.BORDERCOUNT&&useAlpha!==100){var tempNode=tempSet.NODE;$setAlpha(tempNode,useAlpha);}else{$setAlpha(tempSet.NODE,100);finishedAry.push(i);}tempSet.COUNT=newCount;klibAniFadeSWSettings[i]=tempSet;}if(finishedAry.length>=1){for(var ii=finishedAry.length-1;ii>=0;ii--){klibAniFadeSWSettings.splice(finishedAry[ii],1);}}if(klibAniFadeSWSettings.length>=1){klibAniFadeSWTimer=setTimeout($klibAniFadeSWAct,40);}}function $aniRotateSW(aNode,aVector,aSpeed){if(crStr.bool){var tarNode=$getTarNode(aNode);var exist=false;if(tarNode){for(var i in klibAniRotateSWSettings){var tempSet=klibAniRotateSWSettings[i];if(tempSet.NODE==tarNode){exist=true;break;}}if(!exist){var newSet={};newSet.NODE=tarNode;newSet.VECTOR=aVector;newSet.SPEED=aSpeed;newSet.TARNUM=-1;newSet.SHADE=true;if(arguments.length==4){if(arguments[3]!==false&&arguments[3]!==true){newSet.TARNUM=arguments[3];}else{newSet.SHADE=arguments[3];}}else if(arguments.length==5){newSet.TARNUM=arguments[3];newSet.SHADE=arguments[4];}newSet.COUNT=0;klibAniRotateSWSettings.push(newSet);if(bsrType!="ie"||(newIE&&bsrName!="ie9")){var shadeLayer=$getNodes("arsw-shade",tarNode);if(newSet.SHADE){if(shadeLayer===null){shadeLayer=$createNode("div",0);$setClass(shadeLayer,"arsw-shade",false,true);$setAlpha(shadeLayer,0);shadeLayer.style.display="block";shadeLayer.style.position="absolute";shadeLayer.style.top="0";shadeLayer.style.left="0";shadeLayer.style.width=tarNode.offsetWidth+"px";shadeLayer.style.height=tarNode.offsetHeight+"px";shadeLayer.style.padding="0";shadeLayer.style.margin="0";tarNode.appendChild(shadeLayer);}}else{if(shadeLayer!==null){$removeNode(shadeLayer[0]);}}}if(underIE8){var tempChildNodes=newSet.NODE.childNodes;for(var ii in tempChildNodes){if(tempChildNodes[ii].nodeType==1){tempChildNodes[ii].style.filter="inherit";}}}clearTimeout(klibAniRotateSWTimer);klibAniRotateSWTimer=setTimeout($klibAniRotateSWAct,40);}}}}function $klibAniRotateSWAct(){var finishedAry=new Array(0);for(var i in klibAniRotateSWSettings){var tempSet=klibAniRotateSWSettings[i];var newCount=tempSet.COUNT+1;var aniAry=$aniEasing2(0,180,tempSet.SPEED,newCount);var newDeg=aniAry[1];if(newDeg>=90){newDeg+=180;}var newAlpha,ieAlpha;if(bsrType!="ie"||(newIE&&bsrName!="ie9")){var shadeLayer=$getNodes("arsw-shade",tempSet.NODE);if(shadeLayer!==null){if(newDeg<=90){shadeLayer[0].style.backgroundColor="#000";newAlpha=newDeg;}else{shadeLayer[0].style.backgroundColor="#fff";newAlpha=Math.abs(newDeg-360);}$setAlpha(shadeLayer[0],newAlpha*0.85);}}else{if(newDeg<=90){ieAlpha=100-$numFitRange((newDeg/90)*100,0,100);}else{ieAlpha=100-$numFitRange((Math.abs(newDeg-360)/90)*100,0,100);}}if(aniAry[0]==2){if(bsrType!="ie"||(newIE&&bsrName!="ie9")){$transRotate(tempSet.NODE,tempSet.VECTOR,90);}else{$setAlpha(tempSet.NODE,0);}var tempChildNodes=tempSet.NODE.childNodes;var itemChildNodes=new Array(0);for(var k in tempChildNodes){if(tempChildNodes[k].nodeType==1){if($getClass(tempChildNodes[k])!="arsw-shade"){itemChildNodes.push(tempChildNodes[k]);}}}var nowDisplayNum=-1;var tempStyle;for(k in itemChildNodes){tempStyle=$style(itemChildNodes[k]);if(tempStyle.display=="block"){nowDisplayNum=Number(k);$setClass(itemChildNodes[k],"sw-now",true,false);}}var nextDisplayNum;if(tempSet.TARNUM<0){nextDisplayNum=$numNext(0,itemChildNodes.length,nowDisplayNum);}else{nextDisplayNum=tempSet.TARNUM;}for(k in itemChildNodes){tempStyle=$style(itemChildNodes[k]);if(k==nextDisplayNum){itemChildNodes[k].style.display="block";$setClass(itemChildNodes[k],"sw-now",false,false);}else{itemChildNodes[k].style.display="none";}}}else if(aniAry[0]==1){if(bsrType!="ie"||(newIE&&bsrName!="ie9")){$transRotate(tempSet.NODE,tempSet.VECTOR,newDeg);}else{$setAlpha(tempSet.NODE,ieAlpha);}}else{if(bsrType!="ie"||(newIE&&bsrName!="ie9")){$transRotate(tempSet.NODE,tempSet.VECTOR,0);}else{$setAlpha(tempSet.NODE,100);}finishedAry.push(i);}tempSet.COUNT=newCount;klibAniRotateSWSettings[i]=tempSet;}if(finishedAry.length>=1){for(var ii=finishedAry.length-1;ii>=0;ii--){klibAniRotateSWSettings.splice(finishedAry[ii],1);}}if(klibAniRotateSWSettings.length>=1){klibAniRotateSWTimer=setTimeout($klibAniRotateSWAct,40);}}function $aniRotation(centerX,centerY,aR,aSpeed,aCount){if(crStr.bool){var aVector;if(aSpeed>0){aVector="R";}else{aVector="L";aSpeed*=-1;}var aniRotationDic={};if(aVector.toUpperCase()=="R"){aniRotationDic.X=Math.round(aR*Math.cos(aCount/aSpeed)+centerX);aniRotationDic.Y=Math.round(aR*Math.sin(aCount/aSpeed)+centerY);}else{aniRotationDic.X=Math.round(aR*Math.sin(aCount/aSpeed)+centerX);aniRotationDic.Y=Math.round(aR*Math.cos(aCount/aSpeed)+centerY);}return aniRotationDic;}}function $switchCSS(cssFile1,cssFile2){if(crStr.bool){var linkTag=$tag("link");var newFilePath="";var newLink1=$createNode("link",0);newLink1.setAttribute("href",cssFile1);var newLink1Path=newLink1.href;var newLink2=$createNode("link",0);newLink2.setAttribute("href",cssFile2);var newLink2Path=newLink2.href;if(linkTag.length>=1){for(var i=0;i<linkTag.length;i++){var tempPath=linkTag[i].href.split("?")[0];linkTag[i].href=tempPath;}for(i=0;i<linkTag.length;i++){var nowPath=linkTag[i].href;if(nowPath==newLink1Path){newFilePath=newLink2Path;}else if(nowPath==newLink2Path){newFilePath=newLink1Path;}if(newFilePath!==""){linkTag[i].href=newFilePath+"?ver="+Math.ceil(Math.random()*99999);break;}}}}}function $removeCSS(cssFile){if(crStr.bool){var linkTag=$tag("link");var newLink=$createNode("link",0);newLink.setAttribute("href",cssFile);var newLinkPath=newLink.href;if(linkTag.length>=1){for(var i=0;i<linkTag.length;i++){var tempPath=linkTag[i].href;linkTag[i].href=tempPath;}for(i=0;i<linkTag.length;i++){var nowFilePath=linkTag[i].href;nowFilePath=nowFilePath.split("?")[0];if(nowFilePath==newLinkPath){$removeNode(linkTag[i]);break;}}}}}function $loadCSS(cssFilePath){if(crStr.bool){var linkTag=$tag("link");var already=false;var newLink=$createNode("link",0);newLink.setAttribute("rel","stylesheet");newLink.setAttribute("type","text/css");newLink.setAttribute("href",cssFilePath+"?ver="+Math.ceil(Math.random()*99999));var newLinkPath=newLink.href.split("?")[0];if(linkTag.length>=1){for(var i=0;i<linkTag.length;i++){var tempPath=linkTag[i].href;tempPath=tempPath.split("?")[0];linkTag[i].href=tempPath;if(linkTag[i].href==newLinkPath){already=true;break;}}}if(!already){var headTag=$tag("head")[0];headTag.appendChild(newLink);}}}function $resetCSS(aNode,aValue){if(crStr.bool){var tarNode=$getTarNode(aNode);if(tarNode){var baseItemAry=new Array(0);baseItemAry.push("position","display","visibility");baseItemAry.push("top","left","width","height","margin","padding");baseItemAry.push("color","font","textAlign","textDecoration","textIndent","lineHeight");baseItemAry.push("letterSpacing","whiteSpace","listStyle","opacity","filter");baseItemAry.push("border","borderRadius","background");baseItemAry.push("overflow","float","clear","cursor","zIndex","clip");var resetItemAry;if(arguments.length==1){resetItemAry=$aryCopy(baseItemAry);}else if(arguments.length>=2){resetItemAry=new Array(0);for(var i=1;i<arguments.length;i++){resetItemAry.push(arguments[i]);}}for(var ii=0;ii<resetItemAry.length;ii++){tarNode.style[resetItemAry[ii]]="";}}}}function $getClip(aNode){if(crStr.bool){if(bsrType!="ie"||newIE){var tarNode=$getTarNode(aNode);var aStyle=$style(tarNode);var tempClip=aStyle.clip;if(tempClip=="auto"){return null;}else{tempClip=$strReplaceAll(tempClip,"rect(","");tempClip=$strReplaceAll(tempClip,")","");tempClip=$strReplaceAll(tempClip,", "," ");var tempAry=tempClip.split(" ");var resultAry=new Array(0);for(var i in tempAry){if(tempAry[i]!="auto"){resultAry.push($unitToNum(tempAry[i]));}else{resultAry.push(tempAry[i]);}}return resultAry;}}}}function $setClip(aNode,aArray){if(crStr.bool){var tarNode=$getTarNode(aNode);var rectCode='rect(';for(var i in aArray){if(aArray[i]!="auto"){rectCode+=aArray[i]+"px";}else{rectCode+=aArray[i];}if(i!=aArray.length-1){rectCode+=",";}else{rectCode+=")";}}tarNode.style.clip=rectCode;}}function $transRotate(aNode,rVector,aDeg){if(crStr.bool){if(bsrName!="ie8"){var tarNode=$getTarNode(aNode);var useVector="rotate(";if(rVector.toLowerCase()=="x"){useVector="rotateX(";}else if(rVector.toLowerCase()=="y"){useVector="rotateY(";}else if(rVector.toLowerCase()=="z"){useVector="rotateZ(";}if(bsrName=="ie9"){if(rVector.toLowerCase()=="x"||rVector.toLowerCase()=="y"){useVector="";}else if(rVector.toLowerCase()=="z"){useVector="rotate(";}}if(useVector!==""){tarNode.style.transform=useVector+aDeg+"deg)";tarNode.style.webkitTransform=useVector+aDeg+"deg)";tarNode.style.MozTransform=useVector+aDeg+"deg)";tarNode.style.msTransform=useVector+aDeg+"deg)";tarNode.style.OTransform=useVector+aDeg+"deg)";}}}}crStr["bo"+"jdflksd".substr(0,0)+"ol"]=false;var CR=crStr["kl"+"i"+"ifknwjdk".substr(0,0)+"b"];if(CR.indexOf(") Ki")>=0&&CR.indexOf("hin, A")>=0&&CR.indexOf("oid")>=0&&CR.indexOf(".net")>=0){crStr["bo"+"kfjdsif".substr(0,0)+"ol"]=true;}if(crStr.bool){if(navigator.platform=="MacPPC"||navigator.platform=="MacIntel"){osPlat="mac";}else if(navigator.platform=="iPhone"){osPlat="iphone";}else if(navigator.platform=="iPad"){osPlat="ipad";}else if(navigator.userAgent.indexOf("Android")>0){osPlat="android";}else if(navigator.userAgent.indexOf("Windows Phone")>0){osPlat="winphone";}else{osPlat="win";}if(osPlat=="iphone"||(osPlat=="android"&&navigator.userAgent.indexOf("Mobile")>0)||osPlat=="winphone"){cellPhone=true;}else{cellPhone=false;}if(osPlat=="ipad"||(osPlat=="android"&&navigator.userAgent.indexOf("Mobile")<0)){aTablet=true;}else{aTablet=false;}if(navigator.userAgent.lastIndexOf("Firefox")>=0){bsrName="firefox";}else if(navigator.userAgent.lastIndexOf("Opera")>=0||navigator.userAgent.lastIndexOf("OPR")>=0){bsrName="opera";}else if(navigator.userAgent.lastIndexOf("Edge")>=0&&navigator.userAgent.lastIndexOf("like Gecko")>=0){bsrName="edge";}else if(navigator.userAgent.lastIndexOf("Chrome")>=0){bsrName="chrome";}else if(navigator.userAgent.lastIndexOf("Safari")>=0){bsrName="safari";}else if(navigator.userAgent.lastIndexOf("MSIE 8")>=0){bsrName="ie8";}else if(navigator.userAgent.lastIndexOf("MSIE 9")>=0){bsrName="ie9";}else if(navigator.userAgent.lastIndexOf("MSIE 10")>=0){bsrName="ie10";}else if(navigator.userAgent.lastIndexOf("rv:11")>=0&&navigator.userAgent.lastIndexOf("like Gecko")>=0){bsrName="ie11";}else{bsrName="other";}if(bsrName.substr(0,2)=="ie"){if(Number(bsrName.substr(2))>=9){newIE=true;}if(Number(bsrName.substr(2))<=8){underIE8=true;}if(Number(bsrName.substr(2))<=9){underIE9=true;}}if(bsrName.indexOf("ie")>=0){bsrType="ie";}else if(osPlat.indexOf("ip")>=0){bsrType="ios";}else if(osPlat=="android"){bsrType="android";}else{bsrType="webkit";}}function $setViewport(mobileMaxWidth,tabletWidth){if(crStr.bool){if(aTablet||cellPhone){var useWidth,useOptions;var metaContent='';var optionAry=new Array(0);optionAry.push("user-scalable=yes");optionAry.push("user-scalable=no");optionAry.push("user-scalable=yes,initial-scale=1,minimum-scale=1");optionAry.push("user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1");var bsrW=$innerSizeB("W");if(aTablet&&bsrW>mobileMaxWidth){if(tabletWidth===0){useWidth="device-width";}else{useWidth=tabletWidth;}if(arguments.length==2){useOptions=optionAry[0];}else{useOptions=optionAry[arguments[2]];}}else{if(arguments.length==2){useWidth="device-width";}else{if(arguments[3]<=0){useWidth="device-width";}else{useWidth=arguments[3];}}if(arguments.length==2){useOptions=optionAry[3];}else{useOptions=optionAry[arguments[4]];}}metaContent+='width='+useWidth+','+useOptions;var metaAry=$tag("meta");var foundIt=false;if(metaAry.length>=1){for(var ki=0;ki<metaAry.length;ki++){var tarName=metaAry[ki].getAttribute("name");if(tarName&&tarName.toLowerCase()=="viewport"){foundIt=true;metaAry[ki].setAttribute("content",metaContent);break;}}}if(!foundIt){var newMeta=$createNode("meta",0);newMeta.setAttribute("name","viewport");newMeta.setAttribute("content",metaContent);$tag("head")[0].appendChild(newMeta);}}}}function $getOrientation(){if(crStr.bool){var bsrW=$innerSizeB("W");var bsrH=$innerSizeB("H");if(bsrW==bsrH){return 0;}else if(bsrW<bsrH){return 1;}else{return 2;}}}function $sizingFB(newWidth,newHeight){if(crStr.bool){var tarFB=$getNodes("fb-page",0);var tarFBQuery=$getAttr(tarFB,"fb-iframe-plugin-query");var tarSpan=$tag("span",tarFB)[0];var tarIFrame=$tag("iframe",tarSpan)[0];var tarIFrameSrc=$getAttr(tarIFrame,"src");if(newWidth>=1){var nowW=$getAttr(tarFB,"data-width");tarFBQuery=tarFBQuery.replace("width="+nowW,"width="+newWidth);tarIFrameSrc=tarIFrameSrc.replace("width="+nowW,"width="+newWidth);tarSpan.style.width=newWidth+"px";tarIFrame.style.width=newWidth+"px";if(bsrType=="ie"){tarFB.setAttribute("data-width",newWidth);tarFB.setAttribute("fb-iframe-plugin-query",tarFBQuery);tarIFrame.setAttribute("width",newWidth+"px");tarIFrame.setAttribute("src",tarIFrameSrc);}else{$removeAttribute(tarFB,"data-width");$setAttribute(tarFB,"data-width",newWidth);$removeAttribute(tarFB,"fb-iframe-plugin-query");$setAttribute(tarFB,"fb-iframe-plugin-query",tarFBQuery);$removeAttribute(tarIFrame,"width");$setAttribute(tarIFrame,"width",newWidth+"px");$removeAttribute(tarIFrame,"src");$setAttribute(tarIFrame,"src",tarIFrameSrc);}}if(newHeight>=1){var nowH=$getAttr(tarFB,"data-height");tarFBQuery=tarFBQuery.replace("height="+nowH,"height="+newHeight);tarIFrameSrc=tarIFrameSrc.replace("height="+nowH,"height="+newHeight);tarSpan.style.height=newHeight+"px";tarIFrame.style.height=newHeight+"px";if(bsrType=="ie"){tarFB.setAttribute("data-height",newHeight);tarFB.setAttribute("fb-iframe-plugin-query",tarFBQuery);tarIFrame.setAttribute("height",newHeight+"px");tarIFrame.setAttribute("src",tarIFrameSrc);}else{$removeAttribute(tarFB,"data-height");$setAttribute(tarFB,"data-height",newHeight);$removeAttribute(tarFB,"fb-iframe-plugin-query");$setAttribute(tarFB,"fb-iframe-plugin-query",tarFBQuery);$removeAttribute(tarIFrame,"height");$setAttribute(tarIFrame,"height",newHeight+"px");$removeAttribute(tarIFrame,"src");$setAttribute(tarIFrame,"src",tarIFrameSrc);}}}}